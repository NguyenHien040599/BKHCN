(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~614db18d"],{"0838":function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("cd55"),o=a("49e2"),r=a("132d"),l=a("a722"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a(n["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(o["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(r["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Ngày hẹn trả\n      ")]),a(i["a"],[a(s["b"],[a(l["a"],{staticClass:"pl-2",attrs:{wrap:""}},[a(r["a"],{staticClass:"hover-pointer",attrs:{color:"primary"},on:{click:t.showDatePicker}},[t._v("event")])],1)],1)],1)],1)],1)],1)},d=[],p={props:["dueDateEdit"],data:function(){return{dueDateInput:"",minDate:null}},created:function(){var t=this;t.dueDateInput=t.dueDateEdit?t.formatDateInput(t.dueDateEdit):""},watch:{},mounted:function(){this.dueDateInput=this.dueDateEdit?this.formatDateInput(this.dueDateEdit):"",this.minDate=this.getCurentDateTime("date")},methods:{getDateInput:function(){var t=this,e=t.dueDateInput?new Date(t.dueDateInput).getTime():"";return e},getCurentDateTime:function(t){var e=new Date;return"datetime"===t?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):"date"===t?"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")):void 0},formatDateInput:function(t){return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()}}},u=p,m=a("2877"),h=Object(m["a"])(u,c,d,!1,null,null,null);e["a"]=h.exports},1136:function(t,e,a){"use strict";var i=a("0798"),s=a("8336"),n=a("b0af"),o=a("99d9"),r=a("2e4b"),l=a("169a"),c=a("cd55"),d=a("49e2"),p=a("0e8f"),u=a("4bd4"),m=a("132d"),h=a("a722"),f=a("8860"),g=a("e449"),v=a("490a"),y=a("9910"),_=a("2677"),C=a("71d9"),S=a("2a7f"),b=a("3a2f"),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a(c["a"],{attrs:{value:[!0],expand:""}},[a(d["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(m["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin chung hồ sơ")]),t.mauCongVan?t._e():a(n["a"],[a(o["b"],{staticClass:"py-0"},[3==t.originality&&"citizen"===t.thongTinChiTietHoSo.applicantIdType&&t.traCuuLgspCongDan&&t.quyenTraCuuLgsp&&"037"==t.serviceCheckCsdldc?a(s["a"],{staticClass:"mx-0 ml-2 mt-2 mb-0",style:t.loadingSearchLgsp?"pointer-events: none":"",attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.showDialogSearchLgspCongDan()}}},[t.loadingSearchLgsp?t._e():a(m["a"],[t._v("fas fa fa-search-plus")]),t.loadingSearchLgsp?a(v["a"],{attrs:{size:24,indeterminate:"",color:"white"}}):t._e(),t._v(" \n            "),t.loadingSearchLgsp?t._e():a("span",[t._v("Kiểm tra thông tin công dân")]),t.loadingSearchLgsp?a("span",[t._v("Đang kiểm tra thông tin công dân")]):t._e()],1):t._e(),a(h["a"],{staticClass:"px-2 py-2",attrs:{wrap:""}},[t.showOptionName&&t.metaData&&t.metaData.hasOwnProperty("optionName")&&t.metaData["optionName"]?a(p["a"],{attrs:{xs12:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0"},[t._v("Dịch vụ: ")]),a("span",{staticClass:"pl-0 text-bold",staticStyle:{"text-align":"justify"}},[t._v(" "+t._s(t.metaData["optionName"])+" ")])])]):t._e(),1!==t.originality?a(p["a"],{staticClass:"pr-3",staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Chủ hồ sơ: ")]),a(b["a"],{attrs:{top:""}},[a("span",{staticClass:"text-bold "},[t._v(t._s(t.thongTinChiTietHoSo.applicantName))]),a("span",{staticClass:"pl-0 text-bold",attrs:{slot:"activator"},slot:"activator"},[t._v(" "+t._s(t.thongTinChiTietHoSo&&t.thongTinChiTietHoSo.applicantName&&t.thongTinChiTietHoSo.applicantName.length>100?t.thongTinChiTietHoSo.applicantName.substr(0,100)+"...":t.thongTinChiTietHoSo.applicantName))])])],1),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v(t._s("citizen"===t.thongTinChiTietHoSo.applicantIdType?"Số CMND/ căn cước":"Mã số thuế")+": ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantIdNo))])]),a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ: ")]),a(b["a"],{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(String(t.thongTinChiTietHoSo.address).replace(/\./g,"").length<100?String(t.thongTinChiTietHoSo.address).replace(/\./g,""):String(t.thongTinChiTietHoSo.address).replace(/\./g,"").substr(100)+"...")+" "+t._s(t.thongTinChiTietHoSo.wardName)+"\n                    "),t.thongTinChiTietHoSo.wardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]):t._e()]),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(String(t.thongTinChiTietHoSo.address).replace(/\./g,""))+" "+t._s(t.thongTinChiTietHoSo.wardName)),t.thongTinChiTietHoSo.wardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]):t._e()])])],1),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0"},[t._v("Thư điện tử: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactTelNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a(g["a"],{staticStyle:{position:"relative !important"},attrs:{"offset-y":""}},[a("span",{staticClass:"pr-2",attrs:{slot:"activator"},slot:"activator"},[t._v("\n                    Thông tin người nộp\n                    "),a(m["a"],{staticStyle:{position:"absolute",right:"-12px",top:"-2px"},attrs:{color:"blue",size:"22"}},[t._v("arrow_drop_down")])],1),a(f["a"],{staticClass:"px-3 py-2"},[a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Tên người nộp:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(t.thongTinChiTietHoSo.applicantName)+"\n                      ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateName)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Số CMND/ căn cước: ")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(t.thongTinChiTietHoSo.applicantIdNo)+"\n                      ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateIdNo)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(String(t.thongTinChiTietHoSo.address).replace(/\./g,""))+" "+t._s(t.thongTinChiTietHoSo.wardName)+"\n                        "),t.thongTinChiTietHoSo.wardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.districtName)+", "+t._s(t.thongTinChiTietHoSo.cityName))]):t._e()]):a("span",{staticClass:"pl-0 text-bold"},[t._v(" \n                        "+t._s(String(t.thongTinChiTietHoSo.delegateAddress).replace(/\./g,""))+" "+t._s(t.thongTinChiTietHoSo.delegateWardName)+"\n                        "),t.thongTinChiTietHoSo.delegateWardName?a("span",[t._v(", "+t._s(t.thongTinChiTietHoSo.delegateDistrictName)+", "+t._s(t.thongTinChiTietHoSo.delegateCityName))]):t._e()])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Thư điện tử:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactEmail)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateEmail)+" ")])]),a("div",{staticClass:"xs12 sm12 py-1"},[a("span",{staticClass:"pr-2"},[t._v("Số điện thoại:")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.contactTelNo)+" ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateTelNo)+" ")])])])],1)],1)]):t._e(),1===t.originality?a(p["a"],{staticClass:"pr-3",staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Cơ quan: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.govAgencyName)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])]),t.thongTinChiTietHoSo.hasOwnProperty("fromATM")&&2==t.thongTinChiTietHoSo.fromATM?a("div",{staticClass:"xs12 sm12",staticStyle:{display:"flex","align-items":"center"}},[a(m["a"],{staticClass:"mr-2",staticStyle:{color:"blue !important"},attrs:{color:"blue",size:"32"}},[t._v("atm")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" Hồ sơ tiếp nhận qua ATM ")])],1):t._e(),t.thongTinChiTietHoSo.hasOwnProperty("receiveFromATM")&&2==t.thongTinChiTietHoSo.receiveFromATM?a("div",{staticClass:"xs12 sm12",staticStyle:{display:"flex","align-items":"center"}},[a(m["a"],{staticClass:"mr-2",staticStyle:{color:"orange !important"},attrs:{color:"orange",size:"32"}},[t._v("atm")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" Hồ sơ nhận kết quả qua ATM ")])],1):t._e()]):t._e(),1!==t.originality?a(p["a"],{staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[t.thongTinChiTietHoSo.online?a("span",{staticClass:"pr-2"},[t._v("Ngày gửi trực tuyến: ")]):a("span",{staticClass:"pr-2"},[t._v("Ngày nộp hồ sơ: ")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Thời hạn giải quyết: ")]),t.thongTinChiTietHoSo.durationCount>0?a("span",{staticClass:"pl-0 text-bold "},[t._v(" \n                  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc \n                ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v("\n                  Không quy định\n                ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])])]):a(p["a"],{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[t.thongTinChiTietHoSo.online?a("span",{staticClass:"pr-2"},[t._v("Ngày gửi trực tuyến: ")]):a("span",{staticClass:"pr-2"},[t._v("Ngày nộp hồ sơ: ")]),t.thongTinChiTietHoSo.online?a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.submitDate)+" ")]):a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])])]),1!==t.originality?a(p["a"],{staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),t.thongTinChiTietHoSo.originDossierNo?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Hồ sơ gốc: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.originDossierNo)+" ")])]):t._e(),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])]),t.thongTinChiTietHoSo.hasOwnProperty("fromATM")&&2==t.thongTinChiTietHoSo.fromATM?a("div",{staticClass:"xs12 sm12",staticStyle:{display:"flex","align-items":"center"}},[a(m["a"],{staticClass:"mr-2",staticStyle:{color:"blue !important"},attrs:{color:"blue",size:"32"}},[t._v("atm")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" Hồ sơ tiếp nhận qua ATM ")])],1):t._e(),t.thongTinChiTietHoSo.hasOwnProperty("receiveFromATM")&&2==t.thongTinChiTietHoSo.receiveFromATM?a("div",{staticClass:"xs12 sm12",staticStyle:{display:"flex","align-items":"center"}},[a(m["a"],{staticClass:"mr-2",staticStyle:{color:"orange !important"},attrs:{color:"orange",size:"32"}},[t._v("atm")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" Hồ sơ nhận kết quả qua ATM ")])],1):t._e(),t.checkSoBan(t.thongTinChiTietHoSo)&&"paying"===t.thongTinChiTietHoSo.dossierStatus&&t.xacthuc_BNG?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số bản: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(JSON.parse(t.thongTinChiTietHoSo.metaData).tongSoBan)+" bản")])]):t._e(),t.checkTongSoTien(t.thongTinChiTietHoSo)&&"paying"===t.thongTinChiTietHoSo.dossierStatus&&t.xacthuc_BNG?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Tổng số tiền: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.formarMoney(JSON.parse(t.thongTinChiTietHoSo.metaData).tongSoTien)))])]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("<br/>")<0&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("\n                Ghi chú:\n              ")]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("<br/>")<0&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a(b["a"],{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierNote)+" ")])])],1):t._e(),t.thongTinChiTietHoSo["groupDossierId"]&&!t.mauCongVan?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Nhóm hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold",style:t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?"cursor: pointer; color: #0072bc":"",attrs:{title:t.thongTinChiTietHoSo["permission"].indexOf("write")>=0?"Chi tiết nhóm hồ sơ":""},on:{click:t.detailGroup}},[t._v("\n                  "+t._s(t.groupDossierName)+"\n                ")])]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("<br/>")<0&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("\n                Ghi chú:\n              ")]):t._e()]):a(p["a"],{staticStyle:{"word-break":"break-word"},attrs:{xs12:"",sm4:""}},[t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("<br/>")<0&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1",staticStyle:{color:"#0b72ba"}},[t._v("\n                Ghi chú:\n              ")]):t._e(),t.thongTinChiTietHoSo.dossierNote&&"null"!==t.thongTinChiTietHoSo.dossierNote&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("<br/>")<0&&String(t.thongTinChiTietHoSo.dossierNote).indexOf("</br>")<0?a("div",{staticClass:"xs12 sm12 pb-1 overHidden"},[a(b["a"],{attrs:{top:""}},[a("span",{staticClass:"text-bold ",attrs:{slot:"activator"},slot:"activator"},[t._v(t._s(t.thongTinChiTietHoSo.dossierNote)+" ")]),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierNote)+" ")])])],1):t._e(),t.thongTinChiTietHoSo.extendDate?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pl-0 text-bold"},[t._v("Hẹn lại: "+t._s(t.thongTinChiTietHoSo.extendDate))])]):t._e()])],1)],1)],1),t.mauCongVan?a(n["a"],[a(o["b"],{staticClass:"py-0"},[a(h["a"],{staticClass:"px-2 py-2",attrs:{wrap:""}},[a(p["a"],{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Chủ hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantName))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số CMND/ căn cước: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.applicantIdNo))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Giới tính: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(0===t.metaData.gender?"Nam":"Nữ"))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày sinh: ")]),a("span",{staticClass:"pl-0 text-bold"},[t.metaData.birthDateDay&&t.metaData.birthDateMonth&&t.metaData.birthDateYear?a("span",[t._v(t._s(t.metaData.birthDateDay)+"/ ")]):t._e(),t.metaData.birthDateMonth&&t.metaData.birthDateYear?a("span",[t._v(t._s(t.metaData.birthDateMonth)+"/ ")]):t._e(),t.metaData.birthDateYear?a("span",[t._v(t._s(t.metaData.birthDateYear)+" ")]):t._e()])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Quê quán: ")]),a("span",{staticClass:"text-bold pl-0"},[t.metaData.wardNativeName?a("span",[t._v(t._s(t.metaData.wardNativeName)+", ")]):t._e(),t.metaData.districtNativeName?a("span",[t._v(t._s(t.metaData.districtNativeName)+", ")]):t._e(),t.metaData.cityNativeName?a("span",[t._v(t._s(t.metaData.cityNativeName)+" ")]):t._e()])])]),a(p["a"],{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Nơi đăng ký HKTT: ")]),a("span",{staticClass:"text-bold pl-0"},[t.thongTinChiTietHoSo.address?a("span",[t._v(t._s(t.thongTinChiTietHoSo.address)+", ")]):t._e(),t.thongTinChiTietHoSo.wardName?a("span",[t._v(t._s(t.thongTinChiTietHoSo.wardName)+", ")]):t._e(),t.thongTinChiTietHoSo.districtName?a("span",[t._v(t._s(t.thongTinChiTietHoSo.districtName)+", ")]):t._e(),t.thongTinChiTietHoSo.cityName?a("span",[t._v(t._s(t.thongTinChiTietHoSo.cityName)+" ")]):t._e()])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Tình trạng: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.metaData.state&&1===t.metaData.state?"Đã chết":"Còn sống"))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số năm được hưởng: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.metaData.yearPayment?t.metaData.yearPayment:""))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mức trợ cấp (đồng/tháng): ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.metaData.subsidy?t.currency(t.metaData.subsidy):""))])])]),a(p["a"],{attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Mã hồ sơ: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])]),t.thongTinChiTietHoSo.originDossierNo?a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Hồ sơ gốc: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v("  "+t._s(t.thongTinChiTietHoSo.originDossierNo)+" ")])]):t._e(),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày tiếp nhận: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.receiveDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Thời hạn giải quyết: ")]),t.thongTinChiTietHoSo.durationCount>0?a("span",{staticClass:"pl-0 text-bold "},[t._v(" \n                  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc \n                ")]):a("span",{staticClass:"pl-0 text-bold "},[t._v("\n                  Không quy định\n                ")])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Ngày hẹn trả: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dueDate))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Trạng thái: ")]),a("span",{staticClass:"pl-0 text-bold "},[t._v(" "+t._s(t.thongTinChiTietHoSo.dossierStatusText)+" ")])])])],1)],1)],1):t._e()],1)],1),t.mauCongVan?a(c["a"],{attrs:{value:[!0],expand:""}},[a(d["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(m["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin người nộp")]),a(n["a"],[a(o["b"],{staticClass:"py-0"},[a(h["a"],{staticClass:"px-2 py-2",attrs:{wrap:""}},[a(p["a"],{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Họ tên: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateName))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("CMND/ hộ chiếu: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateIdNo))])])]),a(p["a"],{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Địa chỉ: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateAddress))])]),a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Số điện thoại: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateTelNo))])])]),a(p["a"],{staticClass:"pr-3",attrs:{xs12:"",sm4:""}},[a("div",{staticClass:"xs12 sm12 pb-1"},[a("span",{staticClass:"pr-2"},[t._v("Email: ")]),a("span",{staticClass:"pl-0 text-bold"},[t._v(" "+t._s(t.thongTinChiTietHoSo.delegateEmail))])])])],1)],1)],1)],1)],1):t._e(),a(l["a"],{attrs:{scrollable:"",persistent:"","max-width":"1000px"},model:{value:t.dialog_searchLgsp,callback:function(e){t.dialog_searchLgsp=e},expression:"dialog_searchLgsp"}},[a(n["a"],[a(C["a"],{attrs:{dark:"",color:"primary"}},[a(S["b"],[t._v("Tra cứu CSDL Quốc Gia về dân cư")]),a(y["a"]),a(s["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.closeSearchLgsp.apply(null,arguments)}}},[a(m["a"],[t._v("close")])],1)],1),a(o["b"],{staticClass:"py-1"},[a(u["a"],{ref:"formLgsp",staticClass:"py-3 px-0 grid-list",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a(h["a"],{staticClass:"px-0 py-0",attrs:{row:"",wrap:""}},[a(p["a"],{attrs:{xs12:""}},[a(_["a"],{attrs:{label:"Số CCCD hoặc số CMND",rules:[t.rules.required],box:"",clearable:""},model:{value:t.applicantIdNoLgsp,callback:function(e){t.applicantIdNoLgsp=e},expression:"applicantIdNoLgsp"}})],1),a(p["a"],{attrs:{xs12:""}},[a(_["a"],{attrs:{label:"Họ và tên",rules:[t.rules.required],box:"",clearable:""},model:{value:t.applicantNameLgsp,callback:function(e){t.applicantNameLgsp=e},expression:"applicantNameLgsp"}})],1),a(p["a"],{attrs:{xs12:""}},[a(g["a"],{ref:"menuApplicantIdDate",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menuApplicantIdDate,callback:function(e){t.menuApplicantIdDate=e},expression:"menuApplicantIdDate"}},[a(_["a"],{attrs:{slot:"activator",label:"Ngày sinh",rules:[t.rules.required],box:"","append-icon":"event",placeholder:"dd/mm/yyyy",mask:"##/##/####"},on:{blur:function(e){t.ngaysinh=t.parseDate(t.applicantBirthDate)}},slot:"activator",model:{value:t.applicantBirthDate,callback:function(e){t.applicantBirthDate=e},expression:"applicantBirthDate"}}),a(r["a"],{ref:"picker",attrs:{min:"1900-01-01",max:t.getMaxdate(),"first-day-of-week":1,locale:"vi","no-title":""},on:{input:function(e){t.menuApplicantIdDate=!1}},model:{value:t.ngaysinh,callback:function(e){t.ngaysinh=e},expression:"ngaysinh"}})],1)],1),a(p["a"],{staticClass:"text-right",attrs:{xs12:""}},[a(s["a"],{staticClass:"mx-0 my-0",attrs:{color:"primary",loading:t.loadingSearchLgsp,disabled:t.loadingSearchLgsp},on:{click:t.searchLgspCongDan}},[a(m["a"],{attrs:{size:"20"}},[t._v("search")]),t._v("\n                 \n                Tra cứu CSDL dân cư\n                "),a("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Đang tải...")])],1)],1)],1)],1),a("div",[a("div",{staticClass:"mx-1 flex mb-3"},[a(i["a"],{attrs:{outline:"",color:t.lgspAlertColor,icon:"warning",value:!0}},[t._v("\n              "+t._s(t.messageLgsp)+"\n            ")])],1),t.applicantLgspInfomation&&"green"==t.lgspAlertColor?a(h["a"],{attrs:{wrap:""}},[a(p["a"],{staticClass:"pr-2",attrs:{xs12:"",md6:""}},[a("div",[a("table",{staticClass:"datatable table my-3",staticStyle:{"border-top":"1px solid #dedede"}},[a("tbody",[a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Họ và tên công dân")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.HoVaTen.Ten))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số định danh cá nhân/ CCCD")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.SoDinhDanh))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số chứng minh nhân dân")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.SoCMND))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Ngày sinh")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.formatNgaySinh(t.applicantLgspInfomation.NgayThangNamSinh.NgayThangNam)))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Giới tính")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s("1"==t.applicantLgspInfomation.GioiTinh?"Nam":"2"==t.applicantLgspInfomation.GioiTinh?"Nữ":"Chưa có thông tin"))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Quốc tịch")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s("VN"==t.applicantLgspInfomation.QuocTich?"Việt Nam":t.applicantLgspInfomation.QuocTich))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Dân tộc")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.getTenDanhMuc(t.applicantLgspInfomation.DanToc,"dantoc")))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Tôn giáo")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.getTenDanhMuc(t.applicantLgspInfomation.TonGiao,"tongiao")))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Địa chỉ thường trú")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.ThuongTru.ChiTiet))]),a("span",[t._v(", "+t._s(t.diaChiThuongTruTraCuuQr))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Nơi ở hiện tại")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.noiOHienTaiTraCuuQr))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Nhóm máu")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.getNhomMau(t.applicantLgspInfomation.NhomMau)))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Tình trạng hôn nhân")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.getTinhTrangHonNhan(t.applicantLgspInfomation.TinhTrangHonNhan)))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Họ và tên vợ/ chồng")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.VoChong.HoVaTen))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Quốc tịch")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s("VN"==t.applicantLgspInfomation.VoChong.QuocTich?"Việt Nam":t.applicantLgspInfomation.VoChong.QuocTich))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số định danh cá nhân/ CCCD")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.VoChong.SoDinhDanh))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số chứng minh nhân dân")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.VoChong.SoCMND))])])])])])])]),a(p["a"],{staticClass:"pl-2",attrs:{xs12:"",md6:""}},[a("div",[a("table",{staticClass:"datatable table my-3",staticStyle:{"border-top":"1px solid #dedede"}},[a("tbody",[a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số sổ hộ khẩu")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.SoSoHoKhau))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Chủ hộ")])]),a("td",{staticClass:"pt-2"},[a("p",[t._v(t._s(t.applicantLgspInfomation.ChuHo.HoVaTen))]),a("p",[t._v("Quan hệ: "+t._s(t.applicantLgspInfomation.ChuHo.QuanHe))]),a("p",[t._v("Số CMND: "+t._s(t.applicantLgspInfomation.ChuHo.SoCMND))]),a("p",[t._v("Số định danh: "+t._s(t.applicantLgspInfomation.ChuHo.SoDinhDanh))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Họ và tên cha")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.Cha.HoVaTen))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Quốc tịch")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s("VN"==t.applicantLgspInfomation.Cha.QuocTich?"Việt Nam":t.applicantLgspInfomation.Cha.QuocTich))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số định danh cá nhân/ CCCD")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.Cha.SoDinhDanh))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số chứng minh nhân dân")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.Cha.SoCMND))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Họ và tên mẹ")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.Me.HoVaTen))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Quốc tịch")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s("VN"==t.applicantLgspInfomation.Me.QuocTich?"Việt Nam":t.applicantLgspInfomation.Me.QuocTich))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số định danh cá nhân/ CCCD")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.Me.SoDinhDanh))])])]),a("tr",[a("td",{staticClass:"pt-2",attrs:{width:"200"}},[a("span",{staticClass:"text-bold"},[t._v("Số chứng minh nhân dân")])]),a("td",{staticClass:"pt-2"},[a("span",[t._v(t._s(t.applicantLgspInfomation.Me.SoCMND))])])])])])])])],1):t._e(),a(p["a"],{staticClass:"text-right my-2",attrs:{xs12:""}},[a(s["a"],{staticClass:"mx-0 my-0 white--text",attrs:{color:"red"},on:{click:t.closeSearchLgsp}},[a(m["a"],{staticClass:"white--text",attrs:{size:"20"}},[t._v("clear")]),t._v("\n               \n              Đóng\n            ")],1)],1)],1)],1)],1)],1)],1)},x=[],D=a("bbd0");function F(t,e){return k(t)||I(t,e)||w(t,e)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){if(t){if("string"===typeof t)return P(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function I(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,s,n,o,r=[],l=!0,c=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(i=n.call(a)).done)&&(r.push(i.value),r.length!==e);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}function k(t){if(Array.isArray(t))return t}var A={props:{detailDossier:{type:Object,default:function(){}},mauCongVan:{type:String,default:function(){return""}}},watch:{detailDossier:function(t){var e=this;e.thongTinChiTietHoSo=t;try{e.metaData=JSON.parse(t.metaData)}catch(a){}e.thongTinChiTietHoSo["groupDossierId"]&&e.$store.dispatch("getDetailDossier",e.thongTinChiTietHoSo["groupDossierId"]).then((function(t){e.groupDossierNo=t["dossierNo"],e.groupDossierName=t["dossierName"]})),e.traCuuLgspCongDan&&"citizen"===e.thongTinChiTietHoSo.applicantIdType&&3==e.originality&&e.$store.dispatch("checkRoleSearchLgsp",{serviceCode:e.thongTinChiTietHoSo.serviceCode}).then((function(t){t.hasOwnProperty("serviceCode")&&(e.quyenTraCuuLgsp=t.serviceCode),t.hasOwnProperty("serviceDvcqg")&&(e.serviceCheckCsdldc=t.serviceDvcqg)})).catch((function(t){e.quyenTraCuuLgsp=!1}))},ngaysinh:function(t){this.applicantBirthDate=this.formatDate(t)},menuApplicantIdDate:function(t){var e=this;t&&this.$nextTick((function(){return e.$refs.picker.activePicker="YEAR"}))}},components:{},data:function(){return{thongTinChiTietHoSo:"",metaData:"",groupDossierNo:"",groupDossierName:"",showContactDetail:!1,xacthuc_BNG:!1,showOptionName:!1,applicantIdNoLgsp:"",applicantNameLgsp:"",applicantBirthDate:null,ngaysinh:null,menuApplicantIdDate:!1,applicantLgspInfomation:"",warningLgsp:!1,messageLgsp:"Tra cứu cơ sở dữ liệu dân cư",lgspAlertColor:"primary",traCuuLgspCongDan:!1,dialog_searchLgsp:!1,rules:{required:function(t){return!!t||"Thông tin bắt buộc"},credit:function(t){if(t){if(9===t.length){var e=/^(([0-9]{9,9}))$/;return e.test(t)||"Số CCCD, số CMND gồm 9 hoặc 12 ký tự 0-9"}var a=/^(([0-9]{12,12}))$/;return a.test(t)||"Số CCCD, số CMND gồm 9 hoặc 12 ký tự 0-9"}return!0}},quyenTraCuuLgsp:!1,serviceCheckCsdldc:"",checkAccSso:!1,citys:[],diaChiThuongTruTraCuuQr:"",noiOHienTaiTraCuuQr:"",danhmuctongiao:D.danhmuctongiao,danhmucdantoc:D.danhmucdantoc}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},userLoginInfomation:function(){return this.$store.getters.getUserLogin}},created:function(){var t=this;try{t.showOptionName=showOptionName}catch(a){}try{t.checkAccSso=checkAccSso}catch(a){}try{t.traCuuLgspCongDan=traCuuLgspCongDan}catch(a){}t.thongTinChiTietHoSo=t.detailDossier,t.thongTinChiTietHoSo["groupDossierId"]&&t.$store.dispatch("getDetailDossier",t.thongTinChiTietHoSo["groupDossierId"]).then((function(e){t.groupDossierNo=e["dossierNo"],t.groupDossierName=e["dossierName"]}));try{xacthuc_BNG&&(t.xacthuc_BNG=!0)}catch(a){}var e={collectionCode:"ADMINISTRATIVE_REGION",level:0,parent:0};t.$store.getters.getDictItems(e).then((function(e){t.citys=e.data}))},mounted:function(){var t=this;t.thongTinChiTietHoSo=t.detailDossier},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(t){e.thongTinChiTietHoSo=t}))},goBack:function(){window.history.back()},durationText:function(t,e){var a;if(1===t&&e>8){var i,s=Math.floor(e/8)+" ngày";i=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",a="".concat(s," ").concat(i)}else 0===t?a=e+" ngày":1===t&&e<=8&&(a=e+" giờ");return a},detailGroup:function(){var t=this;t.thongTinChiTietHoSo["permission"].indexOf("write")>=0&&t.$router.push("/danh-sach-ho-so/0/nhom-ho-so/"+t.thongTinChiTietHoSo["groupDossierId"])},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},checkSoBan:function(t){try{var e=JSON.parse(t.metaData);return"tongSoBan"in e}catch(a){return!1}},checkTongSoTien:function(t){try{var e=JSON.parse(t.metaData);return"tongSoTien"in e}catch(a){return!1}},formarMoney:function(t){var e=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});return e.format(parseFloat(t))},showDialogSearchLgspCongDan:function(){var t=this;if(t.applicantIdNoLgsp=t.thongTinChiTietHoSo.applicantIdNo,t.applicantNameLgsp=t.thongTinChiTietHoSo.applicantName,t.applicantLgspInfomation="",t.checkAccSso){var e={maSoCaNhan:t.thongTinChiTietHoSo["applicantIdNo"],type:"citizen"};t.$store.dispatch("getStatusAccount",e).then((function(e){if(e&&e.profile){var a=JSON.parse(e.profile);a&&a.hasOwnProperty("ngaySinh")&&a.ngaySinh&&"01/01/1970"!==a.ngaySinh&&(t.applicantBirthDate=a.ngaySinh)}t.dialog_searchLgsp=!0})).catch((function(){t.dialog_searchLgsp=!0}))}else t.dialog_searchLgsp=!0},searchLgspCongDan:function(t){var e=this;if(String(e.applicantIdNoLgsp).trim()&&String(e.applicantNameLgsp).trim()&&e.applicantBirthDate&&8===String(e.applicantBirthDate).length){var a="";if(String(e.applicantBirthDate).indexOf("/")>0){var i=String(e.applicantBirthDate).split("/");a=i[2]+"-"+i[1]+"-"+i[0]}else a=String(e.applicantBirthDate).substring(4,8)+"-"+String(e.applicantBirthDate).substring(2,4)+"-"+String(e.applicantBirthDate).substring(0,2);var s={applicantIdNo:String(e.applicantIdNoLgsp).trim(),applicantName:e.convertString(String(e.applicantNameLgsp).trim()).toUpperCase(),birthDate:a,StaffEmail:e.userLoginInfomation&&e.userLoginInfomation.hasOwnProperty("employeeEmail")?e.userLoginInfomation.employeeEmail:"",GovAgencyCode:e.thongTinChiTietHoSo?e.thongTinChiTietHoSo.govAgencyCode:"",MaDVC:e.thongTinChiTietHoSo?e.thongTinChiTietHoSo.serviceCode:""};e.loadingSearchLgsp=!0,e.$store.dispatch("searchLgspCongDan",s).then((function(t){if(e.loadingSearchLgsp=!1,e.applicantLgspInfomation=t,e.warningLgsp=!1,e.applicantLgspInfomation&&e.applicantLgspInfomation.hasOwnProperty("SoLuongCongDan")&&"0"!=String(e.applicantLgspInfomation["SoLuongCongDan"])){e.lgspAlertColor="green",e.warningLgsp=!0,e.messageLgsp='Số CCCD/ CMND: "'+e.applicantIdNoLgsp+'", họ tên: "'+e.applicantNameLgsp+'" có thông tin trên CSDL quốc gia về dân cư';var a={ThuongTruTinhThanh:"",ThuongTruQuanHuyen:"",ThuongTruXaPhuong:""},i=e.citys.find((function(t){return t.itemCode==e.applicantLgspInfomation.ThuongTru.MaTinhThanh}));a.ThuongTruTinhThanh=i?i.itemName:"",i&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:i.itemCode}).then((function(t){var i=t.data.find((function(t){return t.itemCode==e.applicantLgspInfomation.ThuongTru.MaQuanHuyen}));a.ThuongTruQuanHuyen=i?i.itemName:"",i&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:i.itemCode}).then((function(t){var i=t.data.find((function(t){return t.itemCode==e.applicantLgspInfomation.ThuongTru.MaPhuongXa}));a.ThuongTruXaPhuong=i?i.itemName:"",e.diaChiThuongTruTraCuuQr=a.ThuongTruXaPhuong+", "+a.ThuongTruQuanHuyen+", "+a.ThuongTruTinhThanh}))}));var s={TinhThanh:"",QuanHuyen:"",XaPhuong:""},n=e.citys.find((function(t){return t.itemCode==e.applicantLgspInfomation.NoiOHienTai.MaTinhThanh}));s.TinhThanh=n?n.itemName:"",n&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:n.itemCode}).then((function(t){var a=t.data.find((function(t){return t.itemCode==e.applicantLgspInfomation.NoiOHienTai.MaQuanHuyen}));s.QuanHuyen=a?a.itemName:"",a&&e.$store.getters.getDictItems({collectionCode:"ADMINISTRATIVE_REGION",level:1,parent:a.itemCode}).then((function(t){var a=t.data.find((function(t){return t.itemCode==e.applicantLgspInfomation.NoiOHienTai.MaPhuongXa}));s.XaPhuong=a?a.itemName:"",e.noiOHienTaiTraCuuQr=e.applicantLgspInfomation.NoiOHienTai.ChiTiet+" "+s.XaPhuong+", "+s.QuanHuyen+", "+s.TinhThanh}))}))}else e.lgspAlertColor="red",e.warningLgsp=!0,e.messageLgsp='Số CCCD/ CMND: "'+e.applicantIdNoLgsp+'", họ tên: "'+e.applicantNameLgsp+'" không có thông tin trên CSDL quốc gia về dân cư'})).catch((function(t){if(e.lgspAlertColor="red",e.loadingSearchLgsp=!1,e.applicantLgspInfomation="",e.warningLgsp=!0,e.messageLgsp="Số CCCD/ CMND: "+String(e.applicantIdNoLgsp).trim()+", họ tên: "+String(e.applicantNameLgsp).trim()+" không có thông tin trên CSDL quốc gia về dân cư",t.hasOwnProperty("errorCode")){var a=t.errorCode;switch(a){case"004":e.messageLgsp="Thủ tục chưa được cấp phép khai thác CSDL dân cư";break;case"005":e.messageLgsp="Tài khoản cán bộ không có quyền thao tác";break;default:e.messageLgsp="Số CCCD/ CMND: "+String(e.applicantNameLgsp).trim()+", họ tên: "+String(e.applicantNameLgsp).trim()+" không có thông tin trên CSDL quốc gia về dân cư"}}}))}else toastr.error("Vui lòng nhập đầy đủ số CCCD/ CMND, họ tên và ngày sinh để tra cứu")},closeSearchLgsp:function(){var t=this;t.dialog_searchLgsp=!1},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=F(e,3),i=a[0],s=a[1],n=a[2];return"".concat(n,"/").concat(s,"/").concat(i)},getMaxdate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))},parseDateInput:function(t){if(t){var e="";e=isNaN(t)?new Date(t):new Date(Number(t));var a="".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear());return a}},parseDate:function(t){if(!t)return null;var e=t.split("/"),a=F(e,3),i=a[0],s=a[1],n=a[2];return"".concat(n,"-").concat(s.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},convertString:function(t){return t=t.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),t=t.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),t=t.replace(/ì|í|ị|ỉ|ĩ/g,"i"),t=t.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),t=t.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),t=t.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),t=t.replace(/đ/g,"d"),t=t.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A"),t=t.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E"),t=t.replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I"),t=t.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O"),t=t.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U"),t=t.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y"),t=t.replace(/Đ/g,"D"),t=t.toLocaleLowerCase().replace(/\s/g,""),t},formatNgaySinh:function(t){return t?t.slice(6,8)+"/"+t.slice(4,6)+"/"+t.slice(0,4):""},getTinhTrangHonNhan:function(t){return"2"==t?"Đang có vợ/ chồng":"1"==t?"Chưa kết hôn":"3"==t?"Đã ly hôn hoặc góa vợ/ chồng":"Chưa có thông tin"},getTenDanhMuc:function(t,e){var a=this;if(t){if("tongiao"===e){var i=a.danhmuctongiao.find((function(e){return Number(e.TONGIAO)==Number(t)}));return i?i.TENTONGIAO:""}if("dantoc"===e){var s=a.danhmucdantoc.find((function(e){return Number(e.MADANTOC)==Number(t)}));return s?s.TENGOI:""}return""}return""},getNhomMau:function(t){return"00"==t?"Chưa có thông tin":"01"==t?"Nhóm máu A":"02"==t?"Nhóm máu B":"03"==t?"Nhóm máu AB":"04"==t?"Nhóm máu O":"Chưa có thông tin"}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},E=A,O=a("2877"),L=Object(O["a"])(E,T,x,!1,null,null,null);e["a"]=L.exports},"24fb":function(t,e,a){"use strict";var i=a("4ca6"),s=a("8336"),n=a("b0af"),o=a("99d9"),r=a("169a"),l=a("cd55"),c=a("49e2"),d=a("0e8f"),p=a("132d"),u=a("a722"),m=a("8860"),h=a("ba95"),f=a("5d23"),g=a("e449"),v=a("490a"),y=a("9910"),_=a("71d9"),C=a("2a7f"),S=a("3a2f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.active?a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a(l["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(c["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(p["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Kết quả xử lý\n        "),"hsm"===t.esignType||"pluginAndHSM"===t.esignType?a(s["a"],{staticClass:"mr-2",style:"pluginAndHSM"===t.esignType?"position: absolute;right: 115px;bottom: 2px;":"position: absolute;right: 55px;bottom: 2px;",attrs:{readonly:t.loadingHsm,disabled:t.loadingHsm,color:"primary"},on:{click:function(e){return e.stopPropagation(),t.kySoHsmAll.apply(null,arguments)}}},[a(p["a"],{attrs:{size:"22",color:"white"}},[t._v("drive_file_rename_outline")]),t._v("  \n          Đóng dấu tất cả giấy tờ\n        ")],1):t._e(),("plugin"===t.esignType||"pluginAndHSM"===t.esignType)&&t.thaoTacGop&&t.kySoThaoTacGop?a(s["a"],{staticClass:"mr-2",staticStyle:{color:"#fff !important",position:"absolute",right:"55px",bottom:"2px"},attrs:{readonly:t.loadingHsm,disabled:t.loadingHsm,color:"orange"},on:{click:function(e){return e.stopPropagation(),t.getDanhSachFileThaoTacGop.apply(null,arguments)}}},[a(p["a"],{staticStyle:{color:"#fff !important"},attrs:{size:"22",color:"white"}},[t._v("drive_file_rename_outline")]),t._v("  \n          Ký số giấy tờ đã có\n        ")],1):t._e()],1),a(n["a"],t._l(t.createFiles,(function(e,r){return a("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a(l["a"],{staticClass:"expaned__list__data",attrs:{expand:"",value:t.currentFormView==="formAlpaca"+e.partNo+t.id?[!0]:[!1]}},[a(c["a"],{attrs:{"hide-actions":""}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},[a("div",{staticClass:"mr-2",staticStyle:{"min-width":"20px",display:"flex"},on:{click:function(a){return t.loadAlpcaFormClick(e)}}},[a("div",{staticClass:"header__tphs",staticStyle:{"min-width":"20px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(r+1)+".")]),t._v("  ")]),a("div",{staticClass:"header__tphs"},[t._v("\n                      "+t._s(e.partName)+" "),e.required?a("span",{staticStyle:{color:"red"}},[t._v(" (*)")]):t._e(),t._v("\n                        \n\n                      "),e.hasForm||e.eForm?a("span",{staticStyle:{color:"#004b94"}},[t._v("(Giấy tờ nhập trực tuyến)")]):t._e(),t._v("\n                        \n\n                    ")])]),t._l(t.dossierFilesItems,(function(i,n){return e.partNo+t.id===i.dossierPartNo+t.id&&i.fileSize?a("div",{key:n+"cr"},[a("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.viewFile2(i,n)}}},[a(p["a"],{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(i.fileType)["color"],size:t.getDocumentTypeIcon(i.fileType)["size"]}},[t._v("\n                          "+t._s(t.getDocumentTypeIcon(i.fileType)["icon"])+"\n                        ")]),t._v("\n                        "+t._s(i.displayName)+" - \n                        "),a("i",[t._v(t._s(i.modifiedDate))])],1),3===t.originality&&t.activePdfEditor&&"pdf"===i["fileType"].toLocaleLowerCase()?a(S["a"],{attrs:{top:""}},[a(s["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){return e.stopPropagation(),t.showEditorPdf(i)}},slot:"activator"},[a(p["a"],{attrs:{size:"14",color:"primary"}},[t._v("chat")])],1),a("span",[t._v("Ghi chú trên giấy tờ")])],1):t._e(),a(s["a"],{staticClass:"mx-0 my-0",attrs:{title:"Xóa",icon:"",ripple:""},on:{click:function(e){return e.stopPropagation(),t.deleteSingleFile(i,n,r)}}},[a(p["a"],{staticStyle:{color:"red"}},[t._v("delete_outline")])],1),"plugin"!==t.esignType&&"pluginAndHSM"!==t.esignType||"pdf"!==i.fileType.toLowerCase()||t.typeSignPlugin?t._e():a(g["a"],{attrs:{right:"","offset-y":"",transition:"slide-x-transition",title:"Ký số tài liệu đính kèm"},nativeOn:{click:function(t){t.stopPropagation()}}},[a(s["a"],{attrs:{slot:"activator",flat:"",icon:"",color:"indigo"},slot:"activator"},[a(p["a"],{attrs:{size:"18"}},[t._v("fa fa-pencil-square-o")])],1),a(m["a"],[a(h["a"],[a(f["c"],{on:{click:function(e){return e.stopPropagation(),t.signAction(i,n,"","approved")}}},[a(p["a"],{attrs:{size:"18",color:"blue"}},[t._v("create")]),t._v("    KÝ PHÊ DUYỆT\n                            ")],1)],1),a(h["a"],[a(f["c"],{on:{click:function(e){return e.stopPropagation(),t.signAction(i,n,"","issued")}}},[a(p["a"],{attrs:{size:"18",color:"red"}},[t._v("fas fa fa-dot-circle-o")]),t._v("    ĐÓNG DẤU\n                            ")],1)],1),a(h["a"],[a(f["c"],{on:{click:function(e){return e.stopPropagation(),t.signAction(i,n,"","income")}}},[a(p["a"],{attrs:{size:"16",color:"green"}},[t._v("fas fa fa-file-text")]),t._v("    KÝ VĂN BẢN\n                            ")],1)],1)],1)],1),a(S["a"],{attrs:{top:""}},["plugin"!==t.esignType&&"pluginAndHSM"!==t.esignType||"pdf"!==i.fileType.toLowerCase()||!t.typeSignPlugin?t._e():a(s["a"],{attrs:{slot:"activator",flat:"",icon:"",color:"indigo"},on:{click:function(e){return e.stopPropagation(),t.signAction(i,n,"",t.typeSignPlugin)}},slot:"activator"},[a(p["a"],{attrs:{size:"18"}},[t._v("fa fa-pencil-square-o")])],1),a("span",[t._v("Ký duyệt, đóng dấu")])],1),a(S["a"],{attrs:{top:""}},["hsm"!==t.esignType&&"pluginAndHSM"!==t.esignType||"pdf"!==i.fileType.toLowerCase()?t._e():a(s["a"],{attrs:{slot:"activator",readonly:t.loadingHsm,disabled:t.loadingHsm,flat:"",icon:"",color:"green"},on:{click:function(e){return e.stopPropagation(),t.signHsm(i,n,"")}},slot:"activator"},[a(p["a"],{attrs:{size:"22"}},[t._v("drive_file_rename_outline")])],1),a("span",[t._v("Ký số HSM")])],1)],1)]):t._e()}))],2)]),e.eForm?a(n["a"],[a(o["b"],{staticStyle:{overflow:"hidden","background-color":"rgba(244, 247, 213, 0.19)"}},[a(u["a"],{attrs:{wrap:""}},[a(d["a"],{staticClass:"text-xs-right",attrs:{xs12:""}},[a("div",{style:t.pstFixed>t.pstEl&&t.pstFixed<t.endEl+t.pstEl?"position:fixed;top:5px;z-index:101":"",attrs:{id:"wrapForm"+e.partNo+t.id}},[e.eForm&&e["editForm"]&&!e.embed?a(s["a"],{attrs:{color:"primary",id:"saveBtn"+e.partNo+e.templateNo},on:{click:function(a){return a.stopPropagation(),t.saveAlpacaForm(e,r)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a(p["a"],{attrs:{color:"white"}},[t._v("save")]),t._v(" \n                          Lưu lại\n                        ")],1):t._e(),e["editForm"]&&e.daKhai&&e.eForm?a(s["a"],{attrs:{color:"primary"},on:{click:function(a){return a.stopPropagation(),t.previewFormAlpaca(e,r)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a(p["a"],{attrs:{color:"white"}},[t._v("print")]),t._v(" \n                          Xem\n                        ")],1):t._e(),!e["editForm"]&&e.eForm?a(s["a"],{attrs:{color:"primary"},on:{click:function(a){return a.stopPropagation(),t.editFormAlpaca(e,r)}}},[a(p["a"],{attrs:{color:"white"}},[t._v("edit")]),t._v(" \n                          Sửa\n                        ")],1):t._e(),e.daKhai&&e.eForm?a(s["a"],{attrs:{color:"primary"},on:{click:function(a){return a.stopPropagation(),t.deleteSingleFileEform(e,r)}}},[t.loadingApacal?a("i",{staticClass:"fa fa-spinner",attrs:{"aria-hidden":"true"}}):a(p["a"],{attrs:{color:"white"}},[t._v("delete")]),t._v(" \n                          Xóa\n                        ")],1):t._e()],1),t.createFiles[r]["editForm"]&&!t.createFiles[r].embed?a("div",{attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e(),t.createFiles[r]["editForm"]&&t.createFiles[r].embed?a("div",[a("iframe",{attrs:{id:"formAlpaca"+e.partNo+t.id+"embed",width:"100%",height:"500px",frameborder:"0",src:""}})]):t._e(),t.createFiles[r]["editForm"]?t._e():a("iframe",{staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"displayPDF"+e.partNo+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})])],1)],1)],1):t._e()],1)],1),a("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[t.loading?a("content-placeholders",{staticClass:"mt-1"},[a("content-placeholders-text",{attrs:{lines:1}})],1):a(u["a"],{attrs:{row:"",wrap:""}},[a(d["a"],{style:"plugin"===t.esignType||"pluginAndHSM"===t.esignType?"width: 120px":"width: 100px"},[e["multiple"]?a("input",{staticStyle:{display:"none"},attrs:{type:"file",multiple:"",id:"file"+e.partNo},on:{change:function(a){t.doActionGroupNew&&t.thaoTacGop?t.createFileEntry("",e,r):t.onUploadSingleFile(a,e,r)}}}):a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(a){t.doActionGroupNew&&t.thaoTacGop?t.createFileEntry("",e,r):t.onUploadSingleFile(a,e,r)}}}),t.progressUploadPart+t.id===e.partNo+t.id?a(v["a"],{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t._e(),t.progressUploadPart+t.id!==e.partNo+t.id&&e.eForm?a(S["a"],{attrs:{top:""}},[a(s["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return t.loadAlpcaFormClick(e)}},slot:"activator"},[a(i["a"],[a(p["a"],{attrs:{size:"24",color:"#004b94"}},[t._v("edit")])],1)],1),a("span",[t._v("Giấy tờ nhập trực tuyến")])],1):t._e(),t.progressUploadPart+t.id!==e.partNo+t.id?a(S["a"],{attrs:{top:""}},[a(s["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(a){return t.pickFile(e)}},slot:"activator"},[a(i["a"],[a(p["a"],{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),e.partTip["extensions"]||e.partTip["maxSize"]?a("span",[t._v("Tải giấy tờ lên (Chấp nhận tải lên các định dạng: "+t._s(e.partTip["extensions"])+". Tối đa "+t._s(e.partTip["maxSize"])+" MB)")]):a("span",[t._v("Tải giấy tờ lên")])],1):t._e(),t.progressUploadPart+t.id===e.partNo+t.id||!t.thaoTacGop||"plugin"!==t.esignType&&"pluginAndHSM"!==t.esignType?t._e():a(S["a"],{attrs:{top:""}},[a(s["a"],{staticClass:"mx-0 my-0 ml-2",attrs:{slot:"activator",icon:""},nativeOn:{click:function(a){return t.createFileEntry("https://kiemthu-mt-gov-vn-9001.fds.vn",e,r)}},slot:"activator"},[a(i["a"],[a(p["a"],{attrs:{size:"20",color:"orange"}},[t._v("fa fa-pencil-square-o")])],1)],1),a("span",[t._v("Tải lên và ký duyệt giấy tờ")])],1)],1)],1)],1)],1)})),0),a(r["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a(n["a"],[a(_["a"],{attrs:{dark:"",color:"primary"}},[a(C["b"],[t._v(t._s(t.documentType))]),a(y["a"]),a(s["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a(p["a"],[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a(v["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1),a(r["a"],{attrs:{"hide-overlay":"",persistent:"","max-width":"350",transition:"fade-transition"},model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[a(n["a"],{attrs:{flat:""}},[a(_["a"],{attrs:{flat:"",dark:"",color:"#1867c0"}},[a(C["b"],{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.labelConfirm))]),a(y["a"])],1),a(o["a"],{staticClass:"mt-3"},[a(d["a"],{staticClass:"text-xs-center"},[a(s["a"],{staticClass:"mr-2",attrs:{color:"primary"},nativeOn:{click:function(e){return t.confirmAction.apply(null,arguments)}}},[a(p["a"],[t._v("send")]),t._v(" \n            Đồng ý\n          ")],1),a(s["a"],{staticClass:"ml-2",staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){t.dialogConfirm=!1}}},[a(p["a"],[t._v("close")]),t._v(" \n            Bỏ qua\n          ")],1)],1)],1)],1)],1),a(r["a"],{attrs:{"max-width":"1000",transition:"fade-transition"},model:{value:t.dialogSelectDosier,callback:function(e){t.dialogSelectDosier=e},expression:"dialogSelectDosier"}},[a(n["a"],{attrs:{flat:""}},[a(_["a"],{attrs:{flat:"",dark:"",color:"primary"}},[a(C["b"],[t._v("Chọn hồ sơ")]),a(y["a"]),a(s["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelAddFile.apply(null,arguments)}}},[a(p["a"],[t._v("close")])],1)],1),a(o["b"],{staticClass:"pt-0 pb-0 px-0"},[a("ho-so-nhom",{attrs:{dossiersgroup:t.dossierIntoGroup}})],1),a(o["a"],[a(y["a"]),a(s["a"],{attrs:{color:"primary"},nativeOn:{click:function(e){return t.addFileToDossier()}}},[a(p["a"],[t._v("send")]),t._v(" \n          Xác nhận\n        ")],1),a(s["a"],{staticStyle:{color:"#fff"},attrs:{color:"red"},nativeOn:{click:function(e){return t.cancelAddFile.apply(null,arguments)}}},[a(p["a"],[t._v("close")]),t._v(" \n          Bỏ qua\n        ")],1)],1)],1)],1),a(r["a"],{attrs:{fullscreen:"","hide-overlay":"",scrollable:"",transition:"dialog-bottom-transition"},model:{value:t.dialog_editor_pdf,callback:function(e){t.dialog_editor_pdf=e},expression:"dialog_editor_pdf"}},[t.activePdfEditor&&t.showViewerPdfEditor?a(n["a"],[a(o["b"],[a("div",{attrs:{id:"content-pdf-editor"}},[a("div",{staticClass:"toolbar"},[a("button",{staticClass:"cursor",attrs:{type:"button","data-tooltype":"cursor"}},[t._v("➚")]),a("div",{staticClass:"spacer"}),a("button",{staticClass:"rectangle",staticStyle:{"margin-right":"8px"},attrs:{type:"button","data-tooltype":"area"}},[t._v(" ")]),a("button",{staticClass:"highlight",staticStyle:{"margin-right":"8px"},attrs:{type:"button","data-tooltype":"highlight"}},[t._v(" ")]),a("button",{staticClass:"strikeout",attrs:{type:"button","data-tooltype":"strikeout"}},[t._v(" ")]),a("div",{staticClass:"spacer"}),a("button",{staticClass:"text",staticStyle:{"font-weight":"bold"},attrs:{type:"button","data-tooltype":"text"}}),a("select",{staticClass:"text-size mx-2"}),a("div",{staticClass:"text-color"}),a("div",{staticClass:"spacer"}),a("button",{staticClass:"pen",attrs:{type:"button","data-tooltype":"draw"}},[t._v("✎")]),a("select",{staticClass:"pen-size mx-2"}),a("div",{staticClass:"pen-color"}),a("div",{staticClass:"spacer"}),a("button",{staticClass:"comment",staticStyle:{display:"none"},attrs:{type:"button","data-tooltype":"point"}},[t._v("🗨")]),a("div",{staticClass:"spacer",staticStyle:{display:"none"}}),a("select",{staticClass:"scale mx-2"},[a("option",{attrs:{value:".5"}},[t._v("50%")]),a("option",{attrs:{value:"1"}},[t._v("100%")]),a("option",{attrs:{value:"1.33"}},[t._v("133%")]),a("option",{attrs:{value:"1.5"}},[t._v("150%")]),a("option",{attrs:{value:"2"}},[t._v("200%")])]),a("a",{staticClass:"rotate-ccw mx-2",attrs:{href:"javascript://"}},[t._v("⟲")]),a("a",{staticClass:"rotate-cw mx-2",attrs:{href:"javascript://"}},[t._v("⟳")]),a("div",{staticClass:"spacer"}),a("a",{staticClass:"clear",staticStyle:{display:"none"},attrs:{href:"javascript://",title:"Clear"}},[t._v("×")]),t.onlyView?t._e():a(s["a"],{staticClass:"mx-2",staticStyle:{color:"#0167d3!important","margin-top":"-4px",height:"26px"},attrs:{color:"primary"},on:{click:t.saveEditor}},[a(p["a"],[t._v("save")]),t._v("  Lưu  \n            ")],1),a(s["a"],{staticClass:"right",staticStyle:{"background-color":"transparent !important","border-color":"transparent !important"},attrs:{icon:""},on:{click:t.closeEditorPdf}},[a(p["a"],[t._v("close")])],1)],1),a("div",{staticStyle:{right:"0"},attrs:{id:"content-wrapper"}},[a("div",{staticClass:"pdfViewer",staticStyle:{"background-color":"#eee"},attrs:{id:"viewer"}})]),a("div",{staticStyle:{display:"none"},attrs:{id:"comment-wrapper"}},[a("h4",[t._v("Comments")]),a("div",{staticClass:"comment-list"},[a("div",{staticClass:"comment-list-container"},[a("div",{staticClass:"comment-list-item"},[t._v("No comments")])]),a("form",{staticClass:"comment-list-form",staticStyle:{display:"none"}},[a("input",{attrs:{type:"text",placeholder:"Add a Comment"}})])])])])])],1):t._e()],1)],1):t._e()},T=[],x=a("e12a"),D=x["a"],F=a("2877"),N=Object(F["a"])(D,b,T,!1,null,null,null);e["a"]=N.exports},"26ed":function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("cd55"),o=a("49e2"),r=a("0e8f"),l=a("4bd4"),c=a("132d"),d=a("a722"),p=a("2677"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"white",width:"100%"}},["overdue"===t.type||"preoverdue"===t.type?a(n["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(o["a"],["overdue"===t.type?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(c["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Lý do chậm hạn trả")]),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]):a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(c["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Lý do")]),a("span",{staticStyle:{color:"red"}},[t._v(" *")])]),a(i["a"],[a(s["b"],{staticClass:"py-2 px-2"},[a(d["a"],{attrs:{wrap:""}},[a(r["a"],{staticClass:"mx-3",attrs:{xs12:""}},[a(l["a"],{ref:"delayNoteForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a(p["a"],{attrs:{box:"","multi-line":"",rows:3,rules:function(){return""!==t.delayNote||"Trường dữ liệu bắt buộc"}},model:{value:t.delayNote,callback:function(e){t.delayNote=e},expression:"delayNote"}})],1)],1)],1)],1)],1)],1)],1):t._e(),a(n["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(o["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(c["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),"overdue"===t.type||"preoverdue"===t.type?a("span",[t._v("Ngày hẹn lại")]):t._e(),"betimes"===t.type?a("span",[t._v("Ngày hẹn trả sớm")]):t._e()]),a(i["a"],[a(s["b"],[a(d["a"],{staticClass:"pl-2",attrs:{wrap:""}},[a(c["a"],{staticClass:"hover-pointer",attrs:{color:"blue"},on:{click:t.showDatePicker}},[t._v("event")])],1)],1)],1)],1)],1)],1)},m=[];function h(t,e){return _(t)||y(t,e)||g(t,e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t,e){if(t){if("string"===typeof t)return v(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function y(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,s,n,o,r=[],l=!0,c=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(i=n.call(a)).done)&&(r.push(i.value),r.length!==e);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}function _(t){if(Array.isArray(t))return t}var C={components:{},props:["extendDateEdit","type"],data:function(){return{extendDateInput:"",minDate:null,delayNote:""}},created:function(){},watch:{},mounted:function(){this.extendDateInput=this.extendDateEdit?this.parseCurrentDate(this.extendDateEdit):this.formatDateInput(new Date),this.minDate=this.getCurentDateTime("date")},methods:{doExport:function(){var t,e=this,a=e.extendDateInput?new Date(e.extendDateInput).getTime():"";return t="overdue"===e.type||"preoverdue"===e.type?{text:e.delayNote,extendDate:a,valid:e.$refs.delayNoteForm.validate()}:{text:e.delayNote,extendDate:a,valid:!0},t},getCurentDateTime:function(t){var e=new Date;return"datetime"===t?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," | ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):"date"===t?"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")):void 0},formatDateInput:function(t){return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()},parseCurrentDate:function(t){if(!t)return null;var e=t.split(" "),a=h(e,2),i=a[0],s=a[1],n="".concat(i).split("/"),o=h(n,3),r=o[0],l=o[1],c=o[2],d="".concat(s).split(":"),p=h(d,3),u=p[0],m=p[1];p[2];return"".concat(c,"-").concat(l.padStart(2,"0"),"-").concat(r.padStart(2,"0")," ").concat(u,":").concat(m)}}},S=C,b=a("2877"),T=Object(b["a"])(S,u,m,!1,null,null,null);e["a"]=T.exports},"4a3a":function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("cd55"),o=a("49e2"),r=a("0e8f"),l=a("132d"),c=a("2677"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[a(n["a"],{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a(o["a"],{key:1},[""!==t.esignType&&"digital"!==t.esignType&&"plugin"!==t.esignType?a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(l["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Duyệt hồ sơ")])]):t._e(),a(i["a"],[a(s["b"],{staticClass:"px-0 py-0"},["captcha"===t.esignType?a(r["a"],{staticClass:"my-3",attrs:{xs12:"",sm12:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[t._v("(*) Xác thực ký duyệt hồ sơ")]),a("v-captcha",{ref:"captcha"})],1):t._e(),"password"===t.esignType?a(r["a"],{staticClass:"my-3 pl-3",attrs:{xs12:"",sm4:""}},[a("span",{staticClass:"ml-3",staticStyle:{color:"#ec0f0f"}},[t._v("(*) Xác thực ký duyệt hồ sơ")]),a(c["a"],{attrs:{box:"",label:"Nhập mật khẩu xác thực","append-icon":t.e1?"visibility":"visibility_off","append-icon-cb":function(){return t.e1=!t.e1},rules:[function(t){return!!t||"Yêu cầu nhập mật khẩu"}],type:t.e1?"password":"text",name:"input-10-2",required:""},model:{value:t.passWord,callback:function(e){t.passWord=e},expression:"passWord"}})],1):t._e()],1)],1)],1)],1)],1)},p=[],u=a("1157"),m=a.n(u),h=a("854a"),f=a.n(h),g=a("cc20"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a(r["a"],{staticClass:"text-xs-center",attrs:{xs12:"",sm12:""}},[a("span",[t._v("Kéo thả các ô vuông đúng thứ tự của từ")]),a("br"),a(g["a"],{staticStyle:{"background-color":"#81D4FA"},attrs:{label:"","text-color":"white"}},[t._v("\n      "+t._s(t.captcha)+"\n    ")])],1)],1)},y=[],_={props:["index"],components:{},data:function(){return{arrCaptcha:[],captcha:"",currentlyDragging:null,loggedEvent:"",images:[{name:"Image 1",src:"http://placehold.it/100/000000/ffffff"},{name:"Image 2",src:"http://placehold.it/100/C93742/ffffff"},{name:"Image 3",src:"http://placehold.it/100/6894D1/ffffff"}]}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){var t=this;t.makeRandomString(),t.shuffleArrCaptcha(t.arrCaptcha)},watch:{},methods:{makeRandomString:function(){for(var t=this,e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<4;i++)e+=a.charAt(Math.floor(Math.random()*a.length));e&&(t.arrCaptcha=t.shuffleArrCaptcha(e.split(""))),t.captcha=e},shuffleArrCaptcha:function(t){var e=t.length,a=null,i=0;while(e>0)i=Math.floor(Math.random()*e),e--,a=t[e],t[e]=t[i],t[i]=a;return t},checkValidCatcha:function(){for(var t=this,e="",a=$("#captcha").children(),i=0;i<a.length;i++)e+=a[i].innerHTML;return t.captcha===e}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""}}},C=_,S=a("2877"),b=Object(S["a"])(C,v,y,!1,null,null,null),T=b.exports;function x(){return document.getElementById("plugin0")}f.a.options={closeButton:!0,timeOut:"5000"};var D=x,F={props:{detailDossier:{},dataEsign:{},filesPdfSignPlugin:{type:Array,default:function(){return[]}}},components:{"v-captcha":T},data:function(){return{tabActive:"tabs-1",filesSign:[],activeKS:!1,noteReason:"",thongTinHoSo:{},passWord:"",e1:!0}},created:function(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},computed:{kysoSuccess:function(){return this.$store.getters.kysoSuccess},esignType:function(){return this.dataEsign.signatureType}},watch:{},mounted:function(){""!==this.esignType&&"digital"!==this.esignType||(this.activeKS=!0)},methods:{changeActive:function(){},doExport:function(){var t=this,e={textValue:t.noteReason,required:"password"===t.esignType?t.passWord:"digital"===t.esignType||""===t.esignType?t.activeKS:t.$refs.captcha.checkValidCatcha()};return e},checkCreateFile:function(t){var e;e=Array.isArray(t.createFiles)?t.createFiles:[t.createFiles];var a=!1;if(e.length>0)for(var i=e.length,s=0;s<i;s++){var n=e[s];0===n.counter&&(a=!0)}else a=!0;return a},showConfigSignService:function(){vgca_show_config()},viewFileKySo:function(t,e){},signAction:function(t,e){var a=function(t){var e=JSON.parse(t);e.Status},i={FileUploadHandler:"",SessionId:""};i["FileName"]=t["url"];var s=JSON.stringify(i);vgca_sign_approved(s,a)},kySo:function(t){var e,a=this;e=Array.isArray(t.createFiles)?t.createFiles:[t.createFiles];var i=[],s=!1;if(e.length>0)for(var n=e.length,o=0;o<n;o++){var r=e[o];if(0===r.counter){s=!0;break}var l=r.dossierFileId,c=r.dossierPartId;if(l&&c&&"digital"===a.esignType){var d=l+","+c;i.push(d)}else if(l&&"digital"!==a.esignType){var p=l;i.push(p)}}else alert("Không tồn tại tệp điện tử. Vui lòng kiểm tra lại");var u=t.eSignature;if(u){if(s)return void alert("Tệp điện tử chưa sẵn sàng. Xin vui lòng chờ trong giây lát");if(i){var m,h={};h.actionCode=t.actionCode,h.actionUser=window.themeDisplay.getUserName()?window.themeDisplay.getUserName():"",h.actionNote="",h.postStepCode=t.postStepCode?t.postStepCode:"",h.payload=t.payload?t.payload:"",h.assignUsers=t.assignUsers?t.assignUsers:"",h.payment=t.payment?t.payment:"",h.userNote=t.userNote?t.userNote:"",m=i.join(",");var f=t.actionName;if("digital"===a.esignType){if(!D().valid)return u=!1,void alert("Plugin ký số không hoạt động");a.kyDuyetYCGiamDinh(m,h,f)}else"captcha"!==a.esignType&&"password"!==a.esignType&&""!==a.esignType||a.completeKyDuyetCaptchaSignature(m,h,f)}}},kyDuyetYCGiamDinh:function(t,e,a){var i=this,s="/o/rest/v2/defaultsignature/digitalSignature/"+i.detailDossier.dossierId+"/hashComputed";m.a.ajax({type:"POST",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{strIdArr:t,actionCode:e.actionCode,postStepCode:e.postStepCode},success:function(t){var s=t.msg;if("fileEntryId"!==s){var n=t.hashComputers,o=t.signFieldNames,r=t.fileNames,l=t.fileEntryId,c=[];if(D().valid){for(var d=0;d<n.length;d++){var p=n[d],u=D().Sign(p);if(0===u||7===u){var m=D().Signature;o[d],r[d];c.push(m)}else alert(D().ErrorMessage)}i.completeKyDuyetManyYCGiamDinh(c.join(","),o.join(","),r.join(","),l.join(","),e,a)}else alert("Plugin ký số không hoạt động")}else alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số")},error:function(t){}})},completeKyDuyetManyYCGiamDinh:function(t,e,a,i,s,n){var o=this,r="/o/rest/v2/defaultsignature/digitalSignature/"+o.detailDossier.dossierId+"/dossierFiles";m.a.ajax({type:"PUT",url:r,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay.authToken},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],payload:s["payload"]?JSON.stringify(s["payload"]):"",assignUsers:s["assignUsers"],payment:s["payment"]?JSON.stringify(s["payment"]):"",userNote:s["userNote"],sign:t,signFieldName:e,fileName:a,fileEntryId:i},success:function(t){var e=t.msg;"success"===e?(o.$store.commit("setKysoSuccess",!0),""!==o.esignType&&f.a.success("Thực hiện ký số thành công")):"fileEntryId"===e?""!==o.esignType?alert("Không tìm thấy file bản thảo. Tạm dừng tiến trình ký số"):f.a.error("Yêu cầu thực hiện thất bại"):""!==o.esignType?alert(e):f.a.error("Yêu cầu thực hiện thất bại")},error:function(){""!==o.esignType?alert("Thực hiện ký số thất bại"):f.a.error("Yêu cầu thực hiện thất bại")}})},completeKyDuyetCaptchaSignature:function(t,e,a){var i=this,s="/o/rest/v2/defaultsignature/"+i.detailDossier.dossierId+"/dossierFiles";m.a.ajax({type:"PUT",url:s,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId()?window.themeDisplay.getScopeGroupId():"",Token:window.Liferay.authToken?window.Liferay.authToken:""},data:{actionCode:e["actionCode"],actionUser:e["actionUser"],actionNote:e["actionNote"],assignUserId:e["assignUserId"],postStepCode:e["postStepCode"],subUsers:e["subUsers"],payload:e["payload"]?JSON.stringify(e["payload"]):"",assignUsers:e["assignUsers"],payment:e["payment"]?JSON.stringify(e["payment"]):"",userNote:e["userNote"],fileEntryId:t},success:function(t){i.$store.commit("setKysoSuccess",!0),""!==i.esignType&&f.a.success("Thực hiện ký số thành công")},error:function(){""!==i.esignType?f.a.error("Thực hiện ký số thất bại"):f.a.error("Yêu cầu thực hiện thất bại")}})},completeKyDuyetYCGiamDinh:function(t,e,a,i,s,n){var o=this,r="/o/rest/v2/defaultsignature/digitalSignature/"+o.detailDossier.dossierId+"/dossierFile";m.a.ajax({type:"PUT",url:r,async:!1,dataType:"json",headers:{groupId:window.themeDisplay.getScopeGroupId(),Token:window.Liferay?window.Liferay.authToken:"","Cache-Control":"no-cache"},data:{actionCode:s["actionCode"],actionUser:s["actionUser"],actionNote:s["actionNote"],assignUserId:s["assignUserId"],postStepCode:s["postStepCode"],subUsers:s["subUsers"],sign:t,signFieldName:e,fileName:a,fileEntryId:i},success:function(t){var e=t.msg;"success"===e?f.a.success("Yêu cầu của bạn được thực hiện thành công"):"fileEntryId"===e?alert("Cảnh báo: Không tìm thấy file bản thảo. Tạm dừng tiến trình đóng dấu số"):alert(e)},error:function(){alert("ky so false")}})},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:""}}},N=F,w=Object(S["a"])(N,d,p,!1,null,null,null);e["a"]=w.exports},5279:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__);toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:function(){return"nm"}},detailDossier:{type:Object,default:function(){}},createFiles:{type:Array,default:function(){return[]}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[]}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData}},created:function(){var t=this;t.page=1,t.$nextTick((function(){t.detailDossier["dossierId"]&&t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId).then((function(e){t.dossierFilesItems=e;var a=[],i=function(e){var i=a.filter((function(a){return t.createFiles[e]["dossierPartNo"]===a.dossierPartNo}));i&&0!==i.length||a.push(t.createFiles[e])};for(var s in t.createFiles)i(s);t.createFiles=a})).catch((function(t){}))}))},mounted:function(){var t=this;t.$nextTick((function(){t.createFiles.length>0&&setTimeout((function(){t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)}),300)}))},methods:{genAllAlpacaForm:function(t,e){var a=this;if(t.length>0){var i=t.filter((function(t){return t.eForm})),s=e.filter((function(t){return t.eForm}));i.length>0?i.forEach((function(t){t.eForm&&a.$store.dispatch("loadAlpcaForm",t)})):e.forEach((function(t){t.eForm&&(t["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))})),s.length!==i.length&&s.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.eForm&&(t["templateFileNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},mergeDossierTemplateVsDossierFiles:function(t,e){return 0!==e.length?t.forEach((function(t){var a=e.find((function(e){return t.partNo===e.dossierPartNo&&e.eForm}));a?t["daKhai"]=!0:!a&&t.eForm&&(t["daKhai"]=!1)})):t.forEach((function(t){t.eForm&&(t["daKhai"]=!1)})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("loadFormScript",item).then((function(resScript){vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,window.$("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)}))}))},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateFileNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.dialogPDF=!0,e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})))}))},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.detailDossier.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},viewFile2:function(t){var e=this;if("doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var a=e.initDataResource.dossierApi+"/"+e.detailDossier.dossierId+"/files/"+t.referenceUid;window.open(a)}else e.dialogPDFLoading=!0,e.dialogPDF=!0,t["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("viewFile",t).then((function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t}))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle:function(t){return"calc(100% - 50px)"},downloadFileTemplate:function(t,e){var a=this;if(a.fileTemplateItems.length>0){var i=a.fileTemplateItems.find((function(e){return t.fileTemplateNo===e.fileTemplateNo}));if(i){var s=a.initDataResource.serviceInfoApi+"/"+i.serviceCode+"/filetemplates/"+i.fileTemplateNo;window.open(s)}}},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:{icon:"attach_file",color:"primary",size:14}}}}},"610f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{class:t.className,style:t.maxWidth,attrs:{role:"checkbox",title:t.toggled?t.title_checked:t.title_unchecked,"aria-checked":t.ariaChecked}},[a("input",{staticClass:"v-switch-input",attrs:{type:"checkbox"},on:{change:function(e){return e.stopPropagation(),t.toggle.apply(null,arguments)}}}),a("div",{staticClass:"v-switch-core",style:t.coreStyle},[a("div",{staticClass:"v-switch-button",style:t.buttonStyle})]),t.labels?[t.toggled?a("span",{staticClass:"v-switch-label v-left",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelChecked)}}):a("span",{staticClass:"v-switch-label v-right",style:t.labelStyle,domProps:{innerHTML:t._s(t.labelUnchecked)}})]:t._e()],2)},s=[];function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o={colorChecked:"#75C791",colorUnchecked:"#bfcbd9",cssColors:!1,labelChecked:"on",labelUnchecked:"off",width:50,height:22,margin:3},r=function(t,e){return"object"===n(t)&&t.hasOwnProperty(e)},l=function(t){return t+"px"},c={name:"toggle-button",props:{title_checked:"",title_unchecked:"",value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sync:{type:Boolean,default:!1},speed:{type:Number,default:300},color:{type:[String,Object],validator:function(t){return"object"===n(t)?t.checked||t.unchecked:"string"===typeof t}},cssColors:{type:Boolean,default:!1},labels:{type:[Boolean,Object],default:!1,validator:function(t){return"object"===n(t)?t.checked||t.unchecked:"boolean"===typeof t}},height:{type:Number,default:o.height},width:{type:Number,default:o.width}},computed:{className:function(){var t=this.toggled,e=this.disabled;return["vue-js-switch",{toggled:t,disabled:e}]},ariaChecked:function(){return this.toggled.toString()},coreStyle:function(){return{width:l(this.width),height:l(this.height),backgroundColor:this.cssColors?null:this.colorCurrent,borderRadius:l(Math.round(this.height/2))}},maxWidth:function(){return{width:l(this.width)+"!important"}},buttonRadius:function(){return this.height-2*o.margin},distance:function(){return l(this.width-this.height+o.margin)},buttonStyle:function(){return{width:l(this.buttonRadius),height:l(this.buttonRadius),transition:"transform ".concat(this.speed,"ms"),transform:this.toggled?"translate3d(".concat(this.distance,", 3px, 0px)"):null}},labelStyle:function(){return{lineHeight:l(this.height)}},colorChecked:function(){var t=this.color;return"object"!==n(t)?t||o.colorChecked:r(t,"checked")?t.checked:o.colorChecked},colorUnchecked:function(){var t=this.color;return r(t,"unchecked")?t.unchecked:o.colorUnchecked},colorCurrent:function(){return this.toggled?this.colorChecked:this.colorUnchecked},labelChecked:function(){return r(this.labels,"checked")?this.labels.checked:o.labelChecked},labelUnchecked:function(){return r(this.labels,"unchecked")?this.labels.unchecked:o.labelUnchecked}},watch:{value:function(t){this.sync&&(this.toggled=!!t)}},data:function(){return{toggled:!!this.value}},methods:{toggle:function(t){this.toggled=!this.toggled,this.$emit("input",this.toggled),this.$emit("change",{value:this.toggled,srcEvent:t})}}},d=c,p=a("2877"),u=Object(p["a"])(d,i,s,!1,null,null,null);e["a"]=u.exports},7121:function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("ac7c"),o=a("cd55"),r=a("49e2"),l=a("132d"),c=a("a722"),d=a("3a2f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[3===t.type||4===t.type?a(o["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(r["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(l["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Phân công chỉ đạo\n      ")]),a(i["a"],[a("div",{staticClass:"px-4 py-1"},[a(c["a"],{attrs:{wrap:""}},t._l(t.data_uyquyen,(function(e,i){return a(n["a"],{key:e.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",title:e.userName},on:{change:function(e){return t.changeDelegacy(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}},[a("template",{slot:"label"},[a("span",{staticClass:"black--text"},[t._v(t._s(e.userName))])])],2)})),1)],1)])],1)],1):t._e(),a(o["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(r["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(l["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),6===t.type||7===t.type||8===t.type||9===t.type?a("span",[t._v("Chọn phòng ban thực hiện")]):a("span",[t._v("Chọn người thực hiện")])]),a(i["a"],[1===t.type||3===t.type||5===t.type?a("div",{staticClass:"px-4 py-1"},[a(c["a"],{attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a(n["a"],{key:e.userId,staticStyle:{display:"inline-block","min-width":"190px","max-width":"190px"},attrs:{slot:"activator",title:e.userName},on:{change:function(e){return t.changeAssigned(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}},[a("template",{slot:"label"},[a("span",{staticClass:"black--text"},[t._v(t._s(e.userName))])])],2)})),1)],1):t._e(),6===t.type||7===t.type||8===t.type||9===t.type?a(s["b"],{staticClass:"px-4 py-1"},[t.reRender?a(c["a"],{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_rolegroup,(function(e,i){return a("div",{key:e.roleId,staticClass:"ml-3"},[a(c["a"],{attrs:{wrap:""}},[a(d["a"],{attrs:{top:""}},[a(n["a"],{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.roleName},on:{change:function(e){return t.checkAssignedRoleGroup(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.roleName)+" ")])],1)],1)],1)})),0):t._e()],1):t._e(),2===t.type||4===t.type?a(s["b"],{staticClass:"px-4 py-1"},[a(c["a"],{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a("div",{key:e.userId,staticClass:"ml-3"},[a(c["a"],{attrs:{wrap:""}},[a(d["a"],{attrs:{top:""}},[a(n["a"],{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.userName},on:{change:function(e){return t.checkAsign(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.userName)+" ")])],1)],1)],1)})),0)],1):t._e()],1)],1)],1)],1)},u=[],m=a("854a"),h=a.n(m),f=a("610f");h.a.options={closeButton:!0,timeOut:"2000"};var g={components:{"toggle-button":f["a"]},props:{assign_items:{type:Array,default:function(){return[]}},data_rolegroup:{type:Array,default:function(){return[]}},data_uyquyen:{type:Array,default:function(){return[]}},type:{type:Number,default:function(){return 1}},configNote:{type:Object,default:function(){}},detailDossier:{type:Object,default:function(){}}},model:{prop:"assign_items"},watch:{},data:function(){return{reRender:!0,toUsersExport:[],data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}},created:function(){setTimeout((function(){window.$(".btn-tgl").addClass("btn-hidden")}),200)},mounted:function(){var t=this;t.data_phancong=t.assign_items,8!==t.type&&9!==t.type||(t.data_rolegroup=t.data_rolegroup.filter((function(e){return!t.checkUserRole(e.roleCode)})))},methods:{changeAssigned:function(t,e){var a=this;if(0!==a.type)if(!0===t)if(5===a.type){for(var i in a.assign_items)a.assign_items[i].assigned=0;a.assign_items[e].assigned=1}else a.assign_items[e].assigned=1;else a.assign_items[e].assigned=0},checkAssignedRoleGroup:function(t,e){var a=this;if(0!==a.type)if(!0===t)if(7===a.type||9===a.type){for(var i in a.data_rolegroup)a.data_rolegroup[i].assigned=0;a.data_rolegroup[e].assigned=1}else 6!==a.type&&8!==a.type||(a.data_rolegroup[e].assigned=1);else a.data_rolegroup[e].assigned=0;var s=[];for(var n in a.data_rolegroup)if(1===a.data_rolegroup[n].assigned){var o=a.data_rolegroup[n].hasOwnProperty("lstUser")&&a.data_rolegroup[n]["lstUser"]?a.data_rolegroup[n]["lstUser"]:[];Array.isArray(o)||(o=[o]),o=o.map((function(t){return t=Object.assign(t,{assigned:1}),t})),s=s.concat(o)}a.toUsersExport=s,a.reRender=!1,a.$nextTick((function(){a.reRender=!0}))},changeDelegacy:function(t,e){var a=this;3!==a.type&&4!==a.type||(a.data_uyquyen[e].assigned=!0===t?1:0)},checkAsign:function(t,e){var a=this;t?(a.assign_items[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.assign_items[e].assigned=0,window.$("#btn-".concat(e)).addClass("btn-hidden"))},changeTypeAssign:function(t,e){var a=this;t.value?(a.assign_items[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.assign_items[e].assigned=2,window.$("#btn-".concat(e)).addClass("btn-hidden"))},doReAsign:function(){var t=this,e={dossierId:t.detailDossier.dossierId,users:t.data_uyquyen};t.$store.dispatch("postDossierUserAsign",e).then((function(t){h.a.success("Yêu cầu của bạn thực hiện thành công")})).catch((function(t){}))},doExport:function(){var t,e=this;return t=6===e.type||7===e.type||8===e.type||9===e.type?e.toUsersExport.filter((function(t){return Number(t.assigned)>0})):e.assign_items.filter((function(t){return Number(t.assigned)>0})),0===t.length?(e.assignValidate=!1,e.assignValidate):(e.assignValidate=!0,e.assignValidate)},getToUsersExport:function(){var t=this;return t.toUsersExport},getDataDelegacy:function(){var t=this;return t.data_uyquyen},checkUserRole:function(t){var e=this,a=e.$store.getters.getUser.role;if(!a)return!1;var i=a.findIndex((function(e){return e===t}));return i>=0}}},v=g,y=a("2877"),_=Object(y["a"])(v,p,u,!1,null,null,null);e["a"]=_.exports},"76eb":function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("0e8f"),o=a("a722"),r=a("e0c7"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(i["a"],[a(s["b"],{staticClass:"pb-0"},[a(o["a"],{attrs:{wrap:""}},[a(n["a"],{attrs:{xs12:"",sm2:""}},[a(r["a"],{staticClass:"pl-0 text-header"},[t._v("Thủ tục: ")])],1),a(n["a"],{attrs:{xs12:"",sm10:""}},[a(r["a"],{staticClass:"pl-0 header-text-field text-header"},[t._v("  "+t._s(t.thongTinChiTietHoSo.serviceName)+" ")])],1),a(n["a"],{attrs:{xs12:"",sm2:""}},[a(r["a"],{staticClass:"pl-0 text-header"},[t._v("Mã số hồ sơ: ")])],1),a(n["a"],{attrs:{xs12:"",sm4:""}},[a(r["a"],{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.dossierNo)+" ")])],1),a(n["a"],{attrs:{xs12:"",sm2:""}},[a(r["a"],{staticClass:"pl-0 text-header"},[t._v("Thời hạn giải quyết: ")])],1),a(n["a"],{attrs:{xs12:"",sm4:""}},[a(r["a"],{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.durationText(t.thongTinChiTietHoSo.durationUnit,t.thongTinChiTietHoSo.durationCount))+" làm việc  ")])],1),a(n["a"],{attrs:{xs12:"",sm2:""}},[a(r["a"],{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),a(n["a"],{attrs:{xs12:"",sm4:""}},[a(r["a"],{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.receiveDate)+" ")])],1),a(n["a"],{attrs:{xs12:"",sm2:""}},[a(r["a"],{staticClass:"pl-0 text-header"},[t._v("Ngày hẹn trả: ")])],1),a(n["a"],{attrs:{xs12:"",sm4:""}},[a(r["a"],{staticClass:"pl-0 text-header header-text-field"},[t._v("  "+t._s(t.thongTinChiTietHoSo.dueDate)+" ")])],1)],1)],1)],1)},c=[],d={data:function(){return{thongTinChiTietHoSo:{}}},computed:{loading:function(){return this.$store.getters.loading}},created:function(){},methods:{initData:function(t){this.thongTinChiTietHoSo=t},durationText:function(t,e){var a;if(1===t&&e>8){var i,s=Math.floor(e/8)+" ngày";i=e%8!==0?8*(e/8-Math.floor(e/8))+" giờ":"",a="".concat(s," ").concat(i)}else 0===t?a=e+" ngày":1===t&&e<=8&&(a=e+" giờ");return a}},filters:{dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear(),"  ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))}return""}}},p=d,u=a("2877"),m=Object(u["a"])(p,l,c,!1,null,null,null);e["a"]=m.exports},"7aca":function(t,e,a){"use strict";var i=a("c6a6"),s=a("8336"),n=a("b0af"),o=a("99d9"),r=a("2b5d"),l=a("8fea"),c=a("169a"),d=a("cd55"),p=a("49e2"),u=a("0e8f"),m=a("132d"),h=a("a722"),f=a("490a"),g=a("9910"),v=a("e0c7"),y=a("2677"),_=a("a844"),C=a("71d9"),S=a("2a7f"),b=a("3a2f"),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a(d["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(p["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(m["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),1===t.data_payment.requestPayment||3===t.data_payment.requestPayment||4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a("span",[t._v("\n          Phí, lệ phí thủ tục hành chính\n        ")]):t._e(),2===t.data_payment.requestPayment?a("span",[t._v("Lập phiếu thanh toán")]):t._e()]),a(n["a"],[a(o["b"],{staticClass:"pb-1"},[t.feeList&&t.feeList.length?a(l["a"],{staticClass:"elevation-1",staticStyle:{"border-bottom":"1px solid #dedede","border-left":"1px solid #dedede"},attrs:{headers:t.headers,items:t.feeList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center pt-2",attrs:{width:"50"}},[t._v(" "+t._s(e.index+1))]),a("td",{staticClass:"text-xs-left py-1"},[t.getDataSource("paymentFee")?a("div",[1===t.data_payment.editable||2===t.data_payment.editable||3===t.data_payment.editable?a(r["a"],{attrs:{items:t.getDataSource("paymentFee")},on:{change:function(a){return t.changeFee(e.index)}},model:{value:e.item.paymentFee,callback:function(a){t.$set(e.item,"paymentFee",a)},expression:"props.item.paymentFee"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item.paymentFee))])],1):a("div",[1===t.data_payment.editable||2===t.data_payment.editable||3===t.data_payment.editable?a(y["a"],{on:{input:t.changeTenPhi},model:{value:e.item.paymentFee,callback:function(a){t.$set(e.item,"paymentFee",a)},expression:"props.item.paymentFee"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item.paymentFee))])],1)]),a("td",{staticClass:"px-3 py-1",staticStyle:{width:"170px"}},[t.getDataSource("feeAmount")?a("div",[1===t.data_payment.editable||3===t.data_payment.editable?a(r["a"],{attrs:{items:t.getDataSource("feeAmount")},on:{change:function(a){return t.changeFee(e.index)}},model:{value:e.item.feeAmount,callback:function(a){t.$set(e.item,"feeAmount",a)},expression:"props.item.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(e.item.feeAmount.toString().replace(/\./g,"")))+"    ")])],1):a("div",[1===t.data_payment.editable||3===t.data_payment.editable?a(y["a"],{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:""},on:{keyup:function(a){return t.changeFee(e.index)}},model:{value:e.item.feeAmount,callback:function(a){t.$set(e.item,"feeAmount",a)},expression:"props.item.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(e.item.feeAmount.toString().replace(/\./g,"")))+"    ")])],1)]),a("td",{staticClass:"px-3 py-1",staticStyle:{width:"170px"}},[t.getDataSource("serviceAmount")?a("div",[2===t.data_payment.editable||3===t.data_payment.editable?a(r["a"],{attrs:{items:t.getDataSource("serviceAmount")},on:{change:function(a){return t.changeFee(e.index)}},model:{value:e.item.serviceAmount,callback:function(a){t.$set(e.item,"serviceAmount",a)},expression:"props.item.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(e.item.serviceAmount.toString().replace(/\./g,"")))+"    ")])],1):a("div",[2===t.data_payment.editable||3===t.data_payment.editable?a(y["a"],{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:""},on:{keyup:function(a){return t.changeFee(e.index)}},model:{value:e.item.serviceAmount,callback:function(a){t.$set(e.item,"serviceAmount",a)},expression:"props.item.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(e.item.serviceAmount.toString().replace(/\./g,"")))+"    ")])],1)]),t.showCounterFee?a("td",{staticClass:"py-1",staticStyle:{width:"170px"}},[2===t.data_payment.editable||3===t.data_payment.editable?a(y["a"],{attrs:{type:"number"},on:{keyup:function(a){return t.changeFee(e.index)},change:function(a){return t.changeFee(e.index)},input:function(a){return t.changeFee(e.index)}},model:{value:e.item.counter,callback:function(a){t.$set(e.item,"counter",a)},expression:"props.item.counter"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item.counter))])],1):t._e(),a("td",{staticClass:"text-xs-left px-2 py-1",staticStyle:{"font-weight":"bold"},attrs:{width:"170"}},[1===t.data_payment.requestPayment?a("div",{attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(e.item.feeTong.toString().replace(/\./g,"")))+"    ")])]):t._e(),2===t.data_payment.requestPayment?a("div",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(e.item.totalFee.toString().replace(/\./g,"")))+"    ")])]):t._e(),4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a("div",{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(e.item.feeTong.toString().replace(/\./g,"")))+"    ")])]):t._e()]),t.splitBienLai&&5!=t.paymentDetail.paymentStatus&&!e.item.hasOwnProperty("invoiceFileEntryId")?a("td",{staticClass:"text-xs-center py-1",attrs:{width:"120"}},[a(b["a"],{attrs:{top:""}},[0!==e.index?a(s["a"],{attrs:{slot:"activator",width:"50",height:"32",color:"red",dense:"",small:"",dark:""},on:{click:function(a){return t.xoaBienLai(e.index)}},slot:"activator"},[a(m["a"],{staticStyle:{color:"#fff !important"}},[t._v("delete")])],1):t._e(),a("span",[t._v("Xóa")])],1),a(b["a"],{staticClass:"ml-2",attrs:{top:""}},[a(s["a"],{attrs:{slot:"activator",width:"50",height:"32",color:"primary",dense:"",small:"",dark:""},on:{click:t.themBienLai},slot:"activator"},[a(m["a"],[t._v("add")])],1),a("span",[t._v("Thêm biên lai")])],1)],1):t._e()]}}],null,!1,584970620)},[a("template",{slot:"footer"},[a("td",{staticClass:"text-xs-center",staticStyle:{"border-right":"1px solid #dedede"},attrs:{colspan:t.showCounterFee?5:4}},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("TỔNG TIỀN")])]),a("td",{staticClass:"px-2 text-xs-left",staticStyle:{"border-right":"1px solid #dedede","font-weight":"bold"},attrs:{colspan:t.splitBienLai&&5!=t.paymentDetail.paymentStatus?2:1}},[a("span",[t._v(t._s(t.currency(t.totalFeeAll.toString().replace(/\./g,"")))+"    vnđ")])])])],2):t._e(),a(h["a"],{staticClass:"my-2",attrs:{wrap:""}},[!t.getDataSource("paymentMethod")||5!=t.data_payment.requestPayment||1!==t.data_payment.editable&&2!==t.data_payment.editable&&3!==t.data_payment.editable?t._e():a(u["a"],{staticStyle:{"max-width":"145px"}},[a(v["a"],{staticClass:"pl-0 text-right"},[t._v("Hình thức thanh toán: ")])],1),!t.getDataSource("paymentMethod")||5!=t.data_payment.requestPayment||1!==t.data_payment.editable&&2!==t.data_payment.editable&&3!==t.data_payment.editable?t._e():a(u["a"],{staticStyle:{"max-width":"300px"}},[a(i["a"],{attrs:{"item-text":"name",items:t.getDataSource("paymentMethod")},on:{change:t.changeMethod},model:{value:t.data_payment.paymentMethod,callback:function(e){t.$set(t.data_payment,"paymentMethod",e)},expression:"data_payment.paymentMethod"}})],1)],1),a(h["a"],{staticClass:"my-2",staticStyle:{position:"relative"},attrs:{wrap:""}},[a(u["a"],{staticClass:"my-0 py-0",staticStyle:{width:"145px","max-width":"145px"}},[a(v["a"],{staticClass:"pl-0 text-right"},[t._v("Ghi chú: ")])],1),a(u["a"],[0==t.activeEdit?a("div",{},[a(_["a"],{staticClass:"py-0",attrs:{row:"2",readonly:t.activeEdit,required:""},model:{value:t.data_payment.paymentNote,callback:function(e){t.$set(t.data_payment,"paymentNote",e)},expression:"data_payment.paymentNote"}})],1):t._e(),t.activeEdit||""===t.data_payment.paymentNote?a("p",{staticClass:"my-0 py-1"},[t._v("\n                "+t._s(t.data_payment.paymentNote)+"   \n                "),1==t.activeEdit?a(m["a"],{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"blue",size:"20",title:"Sửa",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!1}}},[t._v("\n                  create\n                ")]):t._e()],1):t._e(),a("span",{staticStyle:{position:"absolute",top:"15px",right:"10px"}},[0==t.activeEdit?a(m["a"],{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"green",size:"25",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!0}}},[t._v("\n                  check\n                ")]):t._e()],1)])],1),t.paymentFile&&5===t.data_payment.requestPayment?a("div",[a("span",[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" File báo thanh toán:")]),t._v(" \n            "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.viewFile()}}},[a(m["a"],[t._v("attach_file")]),t._v("\n              "+t._s(t.paymentFileName)+"\n            ")],1),a(b["a"],{attrs:{top:""}},[a(s["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){return e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[a(m["a"],{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),a("span",[t._v("Tải xuống")])],1)],1):t._e()],1)],1)],1)],1),a(c["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a(n["a"],[a(C["a"],{attrs:{flat:"",dark:"",color:"primary"}},[a(S["b"],[t._v("File đính kèm")]),a(g["a"]),a(s["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a(m["a"],[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a(f["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},x=[],D=a("716b"),F={props:{paymentDetail:{type:Object,default:function(){}},payments:{type:Object,default:function(){}},viaPortal:{type:Number,default:function(){return 0}},detailDossier:{type:Object,default:function(){}},dataSource:{type:Object,default:function(){}},splitBienLai:{type:Boolean,default:function(){return!1}}},model:{prop:"payments"},data:function(){return{headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên phí, lệ phí",align:"center",sortable:!1},{text:"Lệ phí",align:"center",sortable:!1},{text:"Phí",align:"center",sortable:!1},{text:"Thành tiền",align:"center",sortable:!1}],feeList:"",showCounterFee:!1,data_payment:{},money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0,totalFeeAll:0}},directives:{money:D["VMoney"]},created:function(){var t=this;if(t.data_payment=t.payments,t.payments.hasOwnProperty("groupPaymentFile")&&t.payments.groupPaymentFile)t.feeList=JSON.parse(t.payments.groupPaymentFile);else{var e={requestPayment:t.payments["requestPayment"],advanceAmount:t.payments["advanceAmount"],feeAmount:t.payments["feeAmount"],serviceAmount:t.payments["serviceAmount"],shipAmount:t.payments["shipAmount"],counter:t.payments.hasOwnProperty("counter")?t.payments["counter"]:"",paymentFee:t.payments["paymentFee"],feeTong:0,totalFee:0};t.feeList=[e]}if(t.showCounterFee=t.payments.hasOwnProperty("counter"),t.showCounterFee&&(t.headers=[{text:"STT",align:"center",sortable:!1},{text:"Tên phí, lệ phí",align:"center",sortable:!1},{text:"Lệ phí",align:"center",sortable:!1},{text:"Phí",align:"center",sortable:!1},{text:"Số lượng",align:"center",sortable:!1},{text:"Thành tiền",align:"center",sortable:!1}]),t.splitBienLai&&5!=t.paymentDetail.paymentStatus&&t.headers.push({text:"Thao tác",align:"center",sortable:!1}),t.payments&&(setTimeout((function(){t.totalFeeAll=0;for(var e=0;e<t.feeList.length;e++){var a=t.feeList[e],i="number"===typeof a.feeAmount?Number(a.feeAmount):Number(a.feeAmount.toString().replace(/\./g,""));if(1===a.requestPayment){var s="number"===typeof a.serviceAmount?Number(a.serviceAmount):Number(a.serviceAmount.toString().replace(/\./g,""));t.feeList[e].feeTong=i+s,t.feeList[e].totalFee=i+s}else if(2===a.requestPayment){var n=a.serviceAmount?Number(a.serviceAmount.toString().replace(/\./g,"")):0,o=a.shipAmount?Number(a.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===o?t.feeList[e].totalFee=i+n:t.feeList[e].totalFee=i+n+o}else{var r=a.advanceAmount?Number(a.advanceAmount.toString().replace(/\./g,"")):0,l=a.serviceAmount?Number(a.serviceAmount.toString().replace(/\./g,"")):0,c=a.shipAmount?Number(a.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===c?(t.feeList[e].feeTong=i+l,t.feeList[e].totalFee=i+l-r):(t.feeList[e].feeTong=i+l+c,t.feeList[e].totalFee=i+l+c-r)}t.showCounterFee&&(t.feeList[e].feeTong=t.feeList[e].feeTong*a.counter,t.feeList[e].totalFee=t.feeList[e].totalFee*a.counter),t.feeList[e].totalFee<0&&(t.feeList[e].totalFee=0),t.totalFeeAll+=t.feeList[e].totalFee}}),300),5===t.payments.requestPayment)){var a=t.detailDossier;t.$store.dispatch("getPaymentFiles",a).then((function(e){t.paymentFile=e}))}},computed:{paymentFileName:function(){return this.$store.getters.getPaymentFileName},originality:function(){var t=this;return t.getOriginality()}},watch:{viaPortal:function(t){this.changeFee()},detailDossier:function(t){var e=this;if(5===e.payments.requestPayment){var a=t;e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t}))}}},methods:{themBienLai:function(){var t=this,e={requestPayment:t.payments["requestPayment"],advanceAmount:t.payments["advanceAmount"],feeAmount:0,serviceAmount:0,shipAmount:t.payments["shipAmount"],counter:t.payments.hasOwnProperty("counter")?t.payments["counter"]:"",paymentFee:t.payments["paymentFee"],feeTong:0,totalFee:0};t.feeList.push(e)},xoaBienLai:function(t){var e=this;e.feeList.splice(t,1),e.changeFee()},changeFee:function(){var t=this;setTimeout((function(){var e=[];t.totalFeeAll=0,t.payments.advanceAmount=0,t.payments.feeAmount=0,t.payments.serviceAmount=0;for(var a=0;a<t.feeList.length;a++){var i=t.feeList[a],s="number"===typeof i.feeAmount?Number(i.feeAmount):Number(i.feeAmount.toString().replace(/\./g,""));if(1===i.requestPayment){var n="number"===typeof i.serviceAmount?Number(i.serviceAmount):Number(i.serviceAmount.toString().replace(/\./g,""));t.feeList[a].feeTong=s+n,t.feeList[a].totalFee=s+n,t.payments.feeAmount=Number(t.payments.feeAmount)+s,t.payments.serviceAmount=Number(t.payments.serviceAmount)+n,e.push({feeAmount:s,serviceAmount:n,paymentFee:i.paymentFee,paymentAmount:t.feeList[a].totalFee,tranId:a+1})}else if(2===i.requestPayment){var o=i.serviceAmount?Number(i.serviceAmount.toString().replace(/\./g,"")):0,r=i.shipAmount?Number(i.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===r?t.feeList[a].totalFee=s+o:t.feeList[a].totalFee=s+o+r,t.payments.feeAmount=Number(t.payments.feeAmount)+s,t.payments.serviceAmount=Number(t.payments.serviceAmount)+o,e.push({feeAmount:s,serviceAmount:o,paymentFee:i.paymentFee,paymentAmount:t.feeList[a].totalFee,tranId:a+1})}else{var l=i.advanceAmount?Number(i.advanceAmount.toString().replace(/\./g,"")):0,c=i.serviceAmount?Number(i.serviceAmount.toString().replace(/\./g,"")):0,d=i.shipAmount?Number(i.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===d?(t.feeList[a].feeTong=s+c,t.feeList[a].totalFee=s+c-l):(t.feeList[a].feeTong=s+c+d,t.feeList[a].totalFee=s+c+d-l),t.payments.advanceAmount=Number(t.payments.advanceAmount)+l,t.payments.feeAmount=Number(t.payments.feeAmount)+s,t.payments.serviceAmount=Number(t.payments.serviceAmount)+c,e.push({feeAmount:s,serviceAmount:c,paymentFee:i.paymentFee,paymentAmount:t.feeList[a].totalFee,tranId:a+1})}t.showCounterFee&&(t.feeList[a].feeTong=t.feeList[a].feeTong*i.counter,t.feeList[a].totalFee=t.feeList[a].totalFee*i.counter),t.feeList[a].totalFee<0&&(t.feeList[a].totalFee=0),t.totalFeeAll+=t.feeList[a].totalFee,t.payments.counter=t.feeList[0].counter}t.payments.paymentAmount=t.totalFeeAll,t.splitBienLai&&t.feeList&&t.feeList.length>1&&(t.payments.groupPaymentFile=JSON.stringify(e)),t.feeList&&1==t.feeList.length&&(t.payments.paymentFee=t.feeList[0]["paymentFee"])}),200)},changeTenPhi:function(t){var e=this;setTimeout((function(){e.feeList&&1==e.feeList.length&&(e.payments.paymentFee=e.feeList[0]["paymentFee"])}),100)},changeMethod:function(){var t=this;t.payments.paymentMethod=t.data_payment.paymentMethod},viewFile:function(){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;var e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e}))},downloadPaymentFile:function(t){var e=this,a="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(a)},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},getDataSource:function(t){var e=this,a=e.dataSource;if(!a||0==Object.keys(a).length)return!1;var i=a[t]?a[t]:"";return i},goBack:function(){window.history.back()}},filters:{}},N=F,w=a("2877"),P=Object(w["a"])(N,T,x,!1,null,null,null);e["a"]=P.exports},"87c1":function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("cd55"),o=a("49e2"),r=a("0e8f"),l=a("4bd4"),c=a("132d"),d=a("a722"),p=a("2677"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(n["a"],{staticClass:"expansion-pl ext__form",attrs:{value:[!0],expand:""}},[a(o["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(c["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Ý kiến của cán bộ")]),2===t.user_note?a("span",{staticClass:"red--text"},[t._v("  *")]):t._e()]),a(i["a"],[a(s["b"],{staticClass:"py-2 px-4"},[a(d["a"],{attrs:{wrap:""}},[a(r["a"],{attrs:{xs12:""}},[a(l["a"],{ref:"userNoteForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a(p["a"],{attrs:{"multi-line":"",rows:4,rules:2===t.user_note?[function(){return""!==t.noteYkien||"Trường dữ liệu bắt buộc"}]:[],box:"",label:"Nhập ý kiến"},model:{value:t.noteYkien,callback:function(e){t.noteYkien=e},expression:"noteYkien"}})],1)],1)],1)],1)],1)],1)],1)},m=[],h={props:{user_note:{type:Number,required:!0},configNote:{type:Object,required:!1}},data:function(){return{noteYkien:"",valid:!1}},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then((function(t){e.thongTinChiTietHoSo=t}))},doExport:function(){var t=this,e={text:t.noteYkien,valid:t.$refs.userNoteForm.validate()};return e}}},f=h,g=a("2877"),v=Object(g["a"])(f,u,m,!1,null,null,null);e["a"]=v.exports},"885b":function(t,e,a){"use strict";var i=a("99d9"),s=a("ac7c"),n=a("0e8f"),o=a("a722"),r=a("ba95"),l=a("40fe"),c=a("5d23"),d=a("3a2f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"phancong",staticStyle:{"background-color":"white",width:"100%"}},[t.type>0?a("div",[a(o["a"],{attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a(n["a"],{key:i,staticStyle:{"max-width":"190px"}},[a(r["a"],[a(l["a"],{class:e.jobPosTitle?"pt-2":"",staticStyle:{"min-width":"30px"}},[a(s["a"],{on:{change:function(e){return t.changeAssigned(e,i)}},model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}})],1),a(c["a"],[a(c["c"],[a("span",{staticClass:"black--text",staticStyle:{"font-size":"13px"}},[t._v(t._s(e.userName))])]),e.jobPosTitle?a(c["b"],[a("span",{staticStyle:{"font-size":"13px",color:"#0000008a"}},[t._v(t._s(e.jobPosTitle))])]):t._e()],1)],1)],1)})),1),t.assignValidate?t._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người để thực hiện")])],1):a(i["b"],[a(o["a"],{staticClass:"my-1",attrs:{wrap:""}},t._l(t.data_phancong,(function(e,i){return a("div",{key:e.userId,staticClass:"ml-3"},[a(o["a"],{attrs:{wrap:""}},[a(d["a"],{attrs:{top:""}},[a(s["a"],{staticStyle:{"min-width":"150px"},attrs:{slot:"activator",label:e.userName?e.userName:e["fullName"]},on:{change:function(e){return t.checkAsign(e,i)}},slot:"activator",model:{value:e.assigned,callback:function(a){t.$set(e,"assigned",a)},expression:"item.assigned"}}),a("span",{staticClass:"pl-0"},[t._v(" "+t._s(e.userName?e.userName:e["fullName"])+" ")])],1),a("toggle-button",{staticClass:"mx-1 btn-tgl",attrs:{id:"btn-"+i,title_checked:"Thực hiện",title_unchecked:"Phối hợp",labels:{checked:"TH",unchecked:"PH"},color:{checked:"#7DCE94",unchecked:"#82C7EB"},width:50},on:{change:function(e){return t.changeTypeAssign(e,i)}},model:{value:t.presenterAddGroup,callback:function(e){t.presenterAddGroup=e},expression:"presenterAddGroup"}})],1)],1)})),0),t.assignValidate?t._e():a("span",{staticClass:"ml-3",staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu chọn người thực hiện")])],1)],1)},u=[],m=a("610f"),h={components:{"toggle-button":m["a"]},props:{reAsignUsers:{type:Array,default:function(){return[]}},type:{type:Number,default:function(){return 1}},configNote:{type:Object,default:function(){}}},model:{prop:"reAsignUsers"},data:function(){return{data_phancong:[],assignedtype_items:{2:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2}],3:[{text:"Không có phân công",value:0},{text:"Thực hiện chính",value:1},{text:"Thực hiện phối hợp",value:2},{text:"Theo dõi",value:3}]},title_asign:{1:"PHÂN CÔNG NGƯỜI THỰC HIỆN",2:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP",3:"PHÂN CÔNG THỰC HIỆN, PHỐI HỢP VÀ THEO DÕI"},presenterAddGroup:!0,assignValidate:!0}},created:function(){setTimeout((function(){window.$(".btn-tgl").addClass("btn-hidden")}),200)},mounted:function(){this.data_phancong=this.reAsignUsers},watch:{reAsignUsers:function(t){this.data_phancong=t}},methods:{changeAssigned:function(t,e){var a=this;1===a.type&&(a.reAsignUsers[e].assigned=!0===t?1:0)},checkAsign:function(t,e){var a=this;t?(a.reAsignUsers[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.reAsignUsers[e].assigned=0,window.$("#btn-".concat(e)).addClass("btn-hidden"))},changeTypeAssign:function(t,e){var a=this;t.value?(a.reAsignUsers[e].assigned=1,window.$("#btn-".concat(e)).removeClass("btn-hidden")):(a.reAsignUsers[e].assigned=2,window.$("#btn-".concat(e)).addClass("btn-hidden"))},doExport:function(){var t=this,e=t.reAsignUsers.filter((function(t){return Number(t.assigned)>0}));return 0===e.length?(t.assignValidate=!1,t.assignValidate):(t.assignValidate=!0,t.assignValidate)}}},f=h,g=a("2877"),v=Object(g["a"])(f,p,u,!1,null,null,null);e["a"]=v.exports},"8a22":function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a026");__webpack_exports__["a"]={props:{item:{type:Object,default:function(){return{dossierId:0}}},layout_view:{type:Object}},created:function created(){var vm=this;null!==vm.layout_view&&void 0!==vm.layout_view&&"undefined"!==vm.layout_view&&vue__WEBPACK_IMPORTED_MODULE_0__["a"].component("my-dynamic-view",{template:vm.layout_view["template"],data:eval(" ( "+vm.layout_view["data"]+" ) "),created:eval(" ( "+vm.layout_view["created"]+" ) "),updated:eval(" ( "+vm.layout_view["updated"]+" ) "),methods:vm.layout_view["methods"]})}}},"8bf2":function(t,e,a){"use strict";var i=a("b0af"),s=a("cd55"),n=a("49e2"),o=a("0e8f"),r=a("132d"),l=a("a722"),c=a("e0c7"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(s["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(n["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(r["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("Thông tin gửi bưu chính\n    ")]),a(i["a"],[a(l["a"],{staticClass:"my-2",attrs:{wrap:""}},[a(o["a"],{attrs:{xs12:"",sm2:""}},[a(c["a"],{staticClass:"pl-0"},[t._v("Dịch vụ đăng ký: ")])],1),a(o["a"],{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v("VNPOST")])]),a(o["a"],{attrs:{xs12:"",sm2:""}},[a(c["a"],{staticClass:"pl-0"},[t._v("Bưu cục: ")])],1),a(o["a"],{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postName))])]),a(o["a"],{attrs:{xs12:"",sm2:""}},[a(c["a"],{staticClass:"pl-0"},[t._v("Tên người nhận: ")])],1),a(o["a"],{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.applicantName))])]),a(o["a"],{attrs:{xs12:"",sm2:""}},[a(c["a"],{staticClass:"pl-0"},[t._v("Số điện thoại: ")])],1),a(o["a"],{attrs:{xs12:"",sm4:""}},[a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalTelNo))])]),a(o["a"],{attrs:{xs12:"",sm2:""}},[a(c["a"],{staticClass:"pl-0"},[t._v("Địa chỉ: ")])],1),a(o["a"],{attrs:{xs12:"",sm10:""}},[t.postalService["postalWardName"]?a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalAddress)+" - "+t._s(t.postalService["postalWardName"])+" - "+t._s(t.postalService["postalDistrictName"])+" - "+t._s(t.postalService["postalCityName"]))]):a("p",{staticClass:"mb-0",staticStyle:{"padding-top":"9px"}},[t._v(t._s(t.postalService.postalAddress)+" - "+t._s(t.postalService["postalDistrictName"])+" - "+t._s(t.postalService["postalCityName"]))])])],1)],1)],1)],1)},p=[],u={props:{postalService:{type:Object,default:function(){}}},data:function(){return{postName:""}},computed:{},created:function(){var t=this;t.$nextTick((function(){var t=this;t.$store.dispatch("getVNPOSTcode").then((function(e){var a=e.filter((function(e){return Number(e.itemCode)===Number(t.postalService.postalCityCode)}));a.length>0&&(t.postName=a[0].itemName)}))}))},methods:{}},m=u,h=a("2877"),f=Object(h["a"])(m,d,p,!1,null,null,null);e["a"]=f.exports},c23d:function(t,e,a){"use strict";var i=a("8336"),s=a("b0af"),n=a("169a"),o=a("cd55"),r=a("49e2"),l=a("132d"),c=a("490a"),d=a("9910"),p=a("71d9"),u=a("2a7f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[a(o["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(r["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(l["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Tài liệu kết quả\n      ")]),a(s["a"],t._l(t.createFiles,(function(e,i){return a("div",{key:e.partNo+"cr",staticClass:"form_alpaca",staticStyle:{position:"relative"}},[a(o["a"],{staticClass:"expaned__list__data",attrs:{value:[!0],expand:""}},[a(r["a"],{attrs:{"hide-actions":"",value:!1}},[a("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[a("div",{staticStyle:{"align-items":"center",background:"#fff","padding-left":"25px"},style:{width:t.checkStyle(e)}},t._l(t.dossierFilesItems,(function(i,s){return e.dossierPartNo+t.id===i.dossierPartNo+t.id?a("div",{key:s+"cr"},[a("div",{staticClass:"mb-2",staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center",background:"#fff","padding-left":"25px","font-size":"12px"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(s+1)+". ")]),a("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.viewFile2(i)}}},[a(l["a"],{staticClass:"mr-1",attrs:{color:t.getDocumentTypeIcon(i.fileType)["color"],size:t.getDocumentTypeIcon(i.fileType)["size"]}},[t._v("\n                          "+t._s(t.getDocumentTypeIcon(i.fileType)["icon"])+"\n                        ")]),t._v("\n                        "+t._s(i.displayName?i.displayName:i.dossierTemplateNo)+" - \n                        "),a("i",[t._v(t._s(i.modifiedDate))])],1)])]):t._e()})),0)])])],1)],1)})),0),a(n["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a(s["a"],[a(p["a"],{attrs:{dark:"",color:"primary"}},[a(u["b"],[t._v("File đính kèm")]),a(d["a"]),a(i["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a(l["a"],[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a(c["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)],1)],1)},h=[],f=a("5279"),g=f["a"],v=a("2877"),y=Object(v["a"])(g,m,h,!1,null,null,null);e["a"]=y.exports},d77c:function(t,e,a){"use strict";var i=a("b0af"),s=a("99d9"),n=a("ac7c"),o=a("8fea"),r=a("cd55"),l=a("49e2"),c=a("132d"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a(i["a"],{staticClass:"mb-3"},[a(r["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(l["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(c["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Danh sách biên lai")])]),a(i["a"],[a(s["b"],{staticClass:"px-0 py-0"},[t.feeList&&t.feeList.length?a(o["a"],{staticClass:"elevation-1",staticStyle:{"border-bottom":"1px solid #dedede","border-left":"1px solid #dedede"},attrs:{headers:t.headers,items:t.feeList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{attrs:{width:"50"}},[a(n["a"],{attrs:{primary:"","hide-details":"",color:"primary"},model:{value:e.item.select,callback:function(a){t.$set(e.item,"select",a)},expression:"props.item.select"}})],1),a("td",{staticClass:"text-xs-center pt-2",attrs:{width:"170"}},[t._v(" "+t._s(e.item.soBienLai))]),a("td",{staticClass:"text-xs-left py-1"},[a("div",[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item&&e.item.paymentFee?e.item.paymentFee:""))])])]),a("td",{staticClass:"px-3 py-1",staticStyle:{width:"170px"}},[a("div",[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item&&e.item.feeAmount?t.currency(e.item.feeAmount.toString().replace(/\./g,"")):0)+"    ")])])]),a("td",{staticClass:"px-3 py-1",staticStyle:{width:"170px"}},[a("div",[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item&&e.item.serviceAmount?t.currency(e.item.serviceAmount.toString().replace(/\./g,"")):0)+"    ")])])]),a("td",{staticClass:"text-xs-left px-2 py-1",staticStyle:{"font-weight":"bold"},attrs:{width:"170"}},[a("div",{staticStyle:{"padding-top":"7px"}},[a("span",[t._v(t._s(e.item&&e.item.paymentAmount?t.currency(e.item.paymentAmount.toString().replace(/\./g,"")):0)+"    ")])])])]}}],null,!1,1324436747)}):a("div",{staticClass:"ma-3 ml-4"},[t._v("\n              KHÔNG CÓ BIÊN LAI NÀO\n            ")])],1)],1)],1)],1)],1)],1)},p=[],u={props:{payments:{type:Object,default:function(){}}},components:{},data:function(){return{loading:!0,loadingAction:!1,feeList:[],headers:[{text:"",align:"center",sortable:!1},{text:"Số biên lai",align:"center",sortable:!1},{text:"Tên phí, lệ phí",align:"center",sortable:!1},{text:"Lệ phí",align:"center",sortable:!1},{text:"Phí",align:"center",sortable:!1},{text:"Thành tiền",align:"center",sortable:!1}]}},computed:{},created:function(){var t=this;t.$nextTick((function(){var e=[],a=t.payments.groupEInvoice?JSON.parse(t.payments.groupEInvoice):[];t.payments.groupEInvoice?(e=JSON.parse(t.payments.groupPaymentFile),e.forEach((function(t){var e=a.find((function(e){return e.tranId==t.tranId}));t["select"]=!1,t["soBienLai"]=e?e["soBienlai"]:""})),t.feeList=e.filter((function(t){return t.hasOwnProperty("invoiceFileEntryId")&&"0"!=t.invoiceFileEntryId}))):e=[]}))},watch:{payments:function(t){var e=this,a=[],i=e.payments.groupEInvoice?JSON.parse(e.payments.groupEInvoice):[];e.payments.groupEInvoice?(a=JSON.parse(e.payments.groupPaymentFile),a.forEach((function(t){var e=i.find((function(e){return e.tranId==t.tranId}));t["select"]=!1,t["soBienLai"]=e["soBienlai"]})),e.feeList=a.filter((function(t){return t.hasOwnProperty("invoiceFileEntryId")&&"0"!=t.invoiceFileEntryId}))):a=[]}},methods:{getBienLaiXoa:function(){var t=this,e=t.feeList.filter((function(t){return t.select}));return e},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""}}},m=u,h=a("2877"),f=Object(h["a"])(m,d,p,!1,null,null,null);e["a"]=f.exports},d80f:function(t,e,a){"use strict";var i=a("0798"),s=a("c6a6"),n=a("8336"),o=a("b0af"),r=a("99d9"),l=a("ac7c"),c=a("2e4b"),d=a("169a"),p=a("cd55"),u=a("49e2"),m=a("0e8f"),h=a("4bd4"),f=a("132d"),g=a("a722"),v=a("9910"),y=a("2677"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},["dieuchinhdulieu"!==t.type&&t.formBuilder.length>0&&!t.pending?a(p["a"],{staticClass:"expansion-pl ext__form",attrs:{value:t.panel,expand:""}},t._l(t.formBuilder,(function(e,i){return a(u["a"],{key:i},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(f["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v("\n      "+t._s(e.fieldLabel)+" "),!0===e.required||"true"===e.required?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e()]),a(o["a"],[a(r["b"],{staticClass:"py-2 px-2"},[a(h["a"],{ref:"form1",refInFor:!0,attrs:{"lazy-validation":"",id:"form_"+e.fieldName},model:{value:t.valid1,callback:function(e){t.valid1=e},expression:"valid1"}},[a(g["a"],{attrs:{wrap:""}},[a(m["a"],{staticClass:"mx-3",attrs:{xs12:""}},["textarea"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,"multi-line":"",rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e(),"string"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e(),"number"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[t.rules.number],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e(),e.fieldType.indexOf("checkbox")>=0?a(l["a"],{attrs:{value:e.value},on:{change:function(a){return t.inputChangeCheckbox(a,e)}}},[a("template",{slot:"label"},[a("div",{staticStyle:{color:"black !important"}},[t._v(t._s(e.fieldLabel))])])],2):t._e(),t.validDatasourceSelect(e.fieldType)&&JSON.parse(e.fieldType)["select"]&&!JSON.parse(e.fieldType)["api"]?a(s["a"],{staticClass:"select-border",attrs:{items:t.validDatasourceSelect(e.fieldType)?JSON.parse(e.fieldType)["select"]:[],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,placeholder:e.placeholder,"item-text":"text","item-value":"value","hide-no-data":"","hide-selected":!0,box:""},on:{change:function(e){return t.inputChangeValue(e,i)}}}):t._e(),t.validDatasourceSelect(e.fieldType)&&JSON.parse(e.fieldType)["select"]&&JSON.parse(e.fieldType)["api"]?a(s["a"],{staticClass:"select-border",attrs:{items:t.validDatasourceSelect(e.fieldType)?JSON.parse(e.fieldType)["dataSource"]:[],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,placeholder:e.placeholder,"item-text":JSON.parse(e.fieldType)["textMapping"],"item-value":JSON.parse(e.fieldType)["valueMapping"],"hide-no-data":"","hide-selected":!0,box:""},on:{change:function(e){return t.inputChangeValue(e,i)}}}):t._e(),"date"===e.fieldType?a(g["a"],{staticClass:"pl-2",attrs:{wrap:""}},[a(f["a"],{attrs:{color:"blue"}},[t._v("event")])],1):t._e(),e.fieldType.indexOf("options_group")>=0?a(g["a"],{staticClass:"mt-2",attrs:{wrap:""}},t._l(t.optionsGroup,(function(e,i){return a(m["a"],{key:i,staticClass:"pr-3",attrs:{xs4:""}},[a(s["a"],{staticClass:"select-border",attrs:{items:t.optionsGroup[i]["datasource"],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,label:e.fieldLabel,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,"hide-no-data":"",box:""},on:{change:function(e){return t.inputChangeSelect(e,i)}}})],1)})),1):t._e()],1)],1)],1)],1),a(d["a"],{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a(c["a"],{attrs:{"full-width":"",landscape:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a(r["a"],{staticStyle:{background:"#fff"}},[a(v["a"]),a(n["a"],{attrs:{color:"primary",flat:""},on:{click:t.pickDateCustom}},[t._v("\n              Xác nhận\n            ")])],1)],1)],1)],1)})),1):t._e(),"dieuchinhdulieu"!==t.type||t.pending?t._e():a("div",{staticClass:"ext__form px-3"},[t._l(t.formBuilder,(function(e,i){return t.formBuilder.length>0?a("div",{key:i,staticClass:"mb-2",attrs:{"hide-actions":""}},[a("div",{staticClass:"py-1",staticStyle:{"border-bottom":"1px solid #8a898942"}},[a("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+". ")]),t._v(t._s(e.fieldLabel)+" "),!0===e.required||"true"===e.required?a("span",{staticStyle:{color:"red"}},[t._v(" *")]):t._e()]),a(h["a"],{ref:"form",refInFor:!0,attrs:{"lazy-validation":""},model:{value:t.valid2,callback:function(e){t.valid2=e},expression:"valid2"}},[a(g["a"],{attrs:{wrap:""}},[a(m["a"],{staticClass:"px-3 mt-2",attrs:{xs12:""}},["textarea"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,"multi-line":"",rules:!0===e.required||"true"===e.required?[t.rules.required,t.rules.varchar5000]:[t.rules.varchar5000],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e()],1),a(m["a"],{staticClass:"px-3",attrs:{xs12:""}},["string"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required,t.rules.varchar5000]:[t.rules.varchar5000],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e()],1),a(m["a"],{staticClass:"px-3",attrs:{xs12:""}},["number"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[t.rules.number],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e()],1),a(m["a"],{staticClass:"px-3",attrs:{xs12:""}},[e.fieldType.indexOf("select")>=0?a(s["a"],{staticClass:"select-border",attrs:{items:t.validDatasourceSelect(e.fieldType)?JSON.parse(e.fieldType)["select"]:[],value:e.value,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required,placeholder:e.placeholder,"item-text":"text","item-value":"value","hide-no-data":"","hide-selected":!0,box:""},on:{change:function(e){return t.inputChangeValue(e,i)}}}):t._e()],1),a(m["a"],{staticClass:"px-3",attrs:{xs12:""}},["date"===e.fieldType?a(g["a"],{staticClass:"mt-2",attrs:{wrap:""}},[a(f["a"],{attrs:{color:"blue"}},[t._v("event")])],1):t._e()],1),a(m["a"],{staticClass:"px-3",attrs:{xs12:""}},["status"===e.fieldType?a(y["a"],{attrs:{box:"",id:e.fieldName,value:e.value,placeholder:e.placeholder,rules:!0===e.required||"true"===e.required?[t.rules.required]:[],required:!0===e.required||"true"===e.required},on:{input:function(a){return t.inputChangeValue(e)}}}):t._e()],1)],1)],1),a(d["a"],{attrs:{width:"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a(c["a"],{attrs:{"full-width":"",landscape:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a(r["a"],{staticStyle:{background:"#fff"}},[a(v["a"]),a(n["a"],{attrs:{color:"primary",flat:""},on:{click:t.pickDateCustom}},[t._v("\n            Xác nhận\n          ")])],1)],1)],1):t._e()})),0===t.formBuilder.length?a("div",[a(i["a"],{attrs:{outline:"",color:"warning",icon:"priority_high",value:!0}},[t._v("\n        Không có form điều chỉnh dữ liệu\n      ")])],1):t._e()],2)],1)},C=[],S=a("1157"),b=a.n(S),T=a("bc3a"),x=a.n(T);function D(t,e){return w(t)||N(t,e)||k(t,e)||F()}function F(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,s,n,o,r=[],l=!0,c=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(i=n.call(a)).done)&&(r.push(i.value),r.length!==e);l=!0);}catch(d){c=!0,s=d}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw s}}return r}}function w(t){if(Array.isArray(t))return t}function P(t){return E(t)||A(t)||k(t)||I()}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(t,e){if(t){if("string"===typeof t)return O(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(t,e):void 0}}function A(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function E(t){if(Array.isArray(t))return O(t)}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var L={props:{dossier_id:{type:Number},action_id:{type:Number},type:{type:String,default:function(){return""}}},data:function(){return{pending:!1,optionsGroup:[],itemId:null,fieldNameID:"",date:null,dialog:!1,formBuilder:[],panel:[],valid:!1,valid1:!1,valid2:!1,rulesValid:{number:function(t){var e=/^\d+$/;return e.test(t)||"Kiểu dữ liệu sai định dạng"}},rules:{required:function(t){return!!t||"Trường dữ liệu bắt buộc"},number:function(t){var e=/^\d+$/;return e.test(t)||"Kiểu dữ liệu sai định dạng"},varchar50:function(t){return!t||(t=String(t).trim(),t.length<=50||"Không được nhập quá 50 ký tự")},varchar100:function(t){return!t||(t=String(t).trim(),t.length<=100||"Không được nhập quá 100 ký tự")},varchar255:function(t){return!t||(t=String(t).trim(),t.length<=255||"Không được nhập quá 255 ký tự")},varchar500:function(t){return!t||(t=String(t).trim(),t.length<=500||"Không được nhập quá 500 ký tự")},varchar5000:function(t){return!t||(t=String(t).trim(),t.length<=5e3||"Không được nhập quá 5000 ký tự")}}}},watch:{dossier_id:function(){var t=this,e={dossierId:t.dossier_id,actionId:t.action_id};t.$store.dispatch("getExtraForm",e).then((function(e){if(t.formBuilder=e,t.formBuilder.length>0)for(var a in t.formBuilder)"date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&isNaN(new Date(t.formBuilder[a]["value"]).getTime())?t.formBuilder[a]["value"]="":"date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&!isNaN(new Date(t.formBuilder[a]["value"]).getTime())&&(t.formBuilder[a]["value"]=new Date(t.formBuilder[a]["value"]))})).catch((function(){t.formBuilder=[]}))},formBuilder:function(){var t=this;t.allExpand(t.formBuilder)}},created:function(){var t=this,e=t.$router.history.current.query;t.$nextTick((function(){var a={dossierId:t.dossier_id,actionId:t.action_id};a["dossierId"]&&a["actionId"]&&t.$store.dispatch("getExtraForm",a).then((function(a){if(t.formBuilder=a,t.formBuilder.length>0){var i=function(a){if("date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&isNaN(new Date(t.formBuilder[a]["value"]).getTime()))t.formBuilder[a]["value"]="";else if("date"===t.formBuilder[a]["fieldType"]&&t.formBuilder[a]["value"]&&!isNaN(new Date(t.formBuilder[a]["value"]).getTime()))t.formBuilder[a]["value"]=new Date(t.formBuilder[a]["value"]);else if(t.formBuilder[a]["fieldType"].indexOf("select")>=0&&JSON.parse(t.formBuilder[a]["fieldType"])["select"]&&JSON.parse(t.formBuilder[a]["fieldType"])["api"]){var i=JSON.parse(t.formBuilder[a]["fieldType"])["api"],s=[],n={headers:{groupId:e.hasOwnProperty("groupIdSiteMng")&&e.groupIdSiteMng?e.groupIdSiteMng:window.themeDisplay.getScopeGroupId()},params:{}};x.a.get(i,n).then((function(e){t.pending=!0,s=e.data&&e.data["data"]?e.data["data"]:e.data;var i=JSON.parse(t.formBuilder[a]["fieldType"]);i["dataSource"]=s,t.formBuilder[a]["fieldType"]=JSON.stringify(i),t.pending=!1})).catch((function(t){}))}else if(t.formBuilder[a]["fieldType"].indexOf("options_group")>=0)for(var o in t.optionsGroup=JSON.parse(t.formBuilder[a]["fieldType"])["options_group"],t.optionsGroup)t.optionsGroup[o].hasOwnProperty("api")&&t.optionsGroup[o]["api"]&&t.getDataSource(t.optionsGroup[o]["api"],o,{})};for(var s in t.formBuilder)i(s);t.allExpand(t.formBuilder)}}))}))},methods:{allExpand:function(t){var e=this;e.panel=P(Array(t.length).keys()).map((function(t){return!0}))},openDialogCustom:function(t,e){var a=this;a.dialog=!0,a.fieldNameID=e,a.itemId=t},pickDateCustom:function(){var t=this;t.date&&(t.itemId.value=new Date(t.date)),t.dialog=!1},inputChangeValue:function(t,e){var a=this;void 0!==e&&null!==e&&"undefined"!==e&&"null"!==e?a.formBuilder[e]["value"]=t:t.value=document.getElementById(t.fieldName).value},inputChangeCheckbox:function(t,e){e.value=void 0!==t&&null!==t&&"undefined"!==t&&"null"!==t},inputChangeSelect:function(t,e){var a=this;a.optionsGroup[e]["value"]=t,a.optionsGroup.length>e+1&&(a.optionsGroup[e+1]["value"]="",a.getDataSource(a.optionsGroup[e+1]["api"],e+1,{parent:t}))},getDataSource:function(t,e,a){var i=this,s=i.$router.history.current.query,n={headers:{groupId:s.hasOwnProperty("groupIdSiteMng")&&s.groupIdSiteMng?s.groupIdSiteMng:window.themeDisplay.getScopeGroupId()},params:a||{}};x.a.get(t,n).then((function(t){t.data&&t.data["data"]?i.optionsGroup[e]["datasource"]=t.data["data"]:i.optionsGroup[e]["datasource"]=[]})).catch((function(t){i.optionsGroup[e]["datasource"]=[]}))},showDatePicker:function(){this.$refs.datepicker.showDatePicker()},dateTimeView:function(t){if(t){var e=new Date(t);return"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear())}return""},parseCurrentDate:function(t){if(!t)return null;var e=t.split("/"),a=D(e,3),i=a[0],s=a[1],n=a[2];return"".concat(n,"-").concat(s.padStart(2,"0"),"-").concat(i.padStart(2,"0"))},validDatasourceSelect:function(t){if(!t)return!1;try{var e=JSON.parse(t);return!!e}catch(a){return!1}},checkValid:function(){var t=this,e=!0;if(t.formBuilder.length>0)for(var a in t.formBuilder)if(t.formBuilder[a].fieldType.indexOf("options_group")>=0){for(var i in t.optionsGroup)if((!0===t.optionsGroup[i]["required"]||"true"===t.optionsGroup[i]["required"])&&!t.optionsGroup[i]["value"])return e=!1,alert(t.formBuilder[a]["fieldLabel"]+" là bắt buộc!"),e}else if((!0===t.formBuilder[a]["required"]||"true"===t.formBuilder[a]["required"])&&!t.formBuilder[a]["value"])return e=!1,alert(t.formBuilder[a]["fieldLabel"]+" là bắt buộc!"),b()("#form_"+t.formBuilder[a].fieldName)[0].__vue__.validate(),e;return e},formSubmitData:function(){var t=this,e={};if(t.formBuilder.length>0){for(var a in t.formBuilder)if(t.formBuilder[a].fieldName){var i=t.formBuilder[a].value;if("date"===t.formBuilder[a].fieldType&&(i=new Date(t.formBuilder[a].value).getTime()?new Date(t.formBuilder[a].value).getTime():""),"number"===t.formBuilder[a].fieldType)try{i=Number(t.formBuilder[a].value)}catch(o){}if(t.formBuilder[a].fieldType.indexOf("checkbox")>=0){var s=JSON.parse(t.formBuilder[a]["fieldType"])["checkbox"];i=1==t.formBuilder[a].value?s["checked"]:s["uncheck"]}e[t.formBuilder[a].fieldName]=i}else if(!t.formBuilder[a].fieldName&&t.formBuilder[a].fieldType.indexOf("options_group")>=0)for(var n in t.optionsGroup)e[t.optionsGroup[n].fieldName]=t.optionsGroup[n]["value"]}else e="";return e},getCurentDateTime:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0"))}},filters:{parseDate:function(t){if(!t)return"";var e="";return e=isNaN(Number(t))?new Date(t):new Date(Number(t)),e?"".concat(e.getDate().toString().padStart(2,"0"),"/").concat((e.getMonth()+1).toString().padStart(2,"0"),"/").concat(e.getFullYear()," ").concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")):""}}},M=L,H=a("2877"),B=Object(H["a"])(M,_,C,!1,null,null,null);e["a"]=B.exports},e12a:function(module,__webpack_exports__,__webpack_require__){"use strict";var toastr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("854a"),toastr__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(toastr__WEBPACK_IMPORTED_MODULE_0__),_TiepNhan_HoSoTrongNhom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("335e");toastr__WEBPACK_IMPORTED_MODULE_0___default.a.options={closeButton:!0,timeOut:"5000"},__webpack_exports__["a"]={props:{id:{type:String,default:function(){return"nm"}},detailDossier:{type:Object,default:function(){}},createFiles:{type:Array,default:function(){return[]}},esignType:{type:String,default:function(){return""}},preCondition:{type:String,default:function(){return""}},chiTietAction:"",dossierSelected:[]},components:{"ho-so-nhom":_TiepNhan_HoSoTrongNhom__WEBPACK_IMPORTED_MODULE_1__["a"]},data:function(){return{dialog_editor_pdf:!1,activePdfEditor:!1,showViewerPdfEditor:!1,dialogConfirm:!1,labelConfirm:"",dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileTemplateItems:[],currentFormView:"",pstFixed:0,pstEl:0,endEl:0,dialogSelectDosier:!1,dossierIntoGroup:[],filesAdd:[],documentType:"Tài liệu đính kèm",receiveMessage:"",active:!0,loadingApacal:!1,thaoTacGop:!1,doNotSign:!1,fileEditor:"",typeSignPlugin:"",requiredSignPlugin:!1,loadingHsm:!1,doActionGroupNew:!1,selectedFileKySo:[],filesKySoGop:[],kySoThaoTacGop:!1,mappingFileSignedUpdate:{dossierFiles:"",fileEntries:""}}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){var t=this;return t.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData},dossierIntoGroupSelect:function(){return this.$store.getters.getDossierIntoGroup},createFileSignedSync:function(){return this.$store.getters.getCreateFileSigned},userLoginInfomation:function(){return this.$store.getters.getUserLogin}},created:function(){var t=this;try{t.activePdfEditor=activePdfEditor}catch(a){}var e=t.$router.history.current.query;e.hasOwnProperty("dossiers")&&(t.thaoTacGop=!0);try{t.doActionGroupNew=doActionGroupNew}catch(i){}try{t.kySoThaoTacGop=kySoThaoTacGop}catch(s){}t.receiveMessage=function(e){t.saveAlpacaFormCallBack(e)},t.page=1,t.$nextTick((function(){try{var e="",i=!0,s=t.preCondition.split(",");if(s&&s.length>0){var n=s.filter((function(t){return t.indexOf("typeSignPlugin=")>=0}));e=n&&n.length>0?n[0].split("=")[1]:"";var o=s.filter((function(t){return t.indexOf("requiredSignPlugin=")>=0}));i=!!(o&&o.length>0)&&o[0].split("=")[1]}t.typeSignPlugin=e,t.requiredSignPlugin=i}catch(a){}if(t.detailDossier["dossierId"])if(t.thaoTacGop)t.createFiles=t.createFiles.map((function(t){return Object.assign(t,{filesAttach:[]})}));else{var r=[];r.push(t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId)),r.push(t.$store.dispatch("loadDossierTemplates",t.detailDossier)),Promise.all(r).then((function(e){var a=e[1]["dossierParts"],i=e[0];t.dossierFilesItems=i,t.dossierFilesItems.forEach((function(e,a){t.detailDossier["dossierId"]===t.createFileSignedSync["dossierId"]?(e["isSigned"]=t.createFileSignedSync["createFiles"][a]["isSigned"],e["fileEntryId"]=t.createFileSignedSync["createFiles"][a]["fileEntryId"],e["pdfSigned"]=t.createFileSignedSync["createFiles"][a]["pdfSigned"]):(e["isSigned"]=!1,e["fileEntryId"]="",e["pdfSigned"]="")})),t.createFiles=t.mergeDossierTemplateVsDossierFiles(t.createFiles,i),0!==a.length&&t.createFiles.forEach((function(t){var e=a.find((function(e){return t.partNo===e.partNo}));e&&(t["required"]=e["required"],t["partTip"]=e["partTip"])}))})),t.detailDossier["groupDossierId"]&&t.getDossierIntoGroup(t.detailDossier["groupDossierId"])}}))},watch:{$route:function(t,e){},dossierFilesItems:function(t){}},mounted:function(){var t=this;t.$nextTick((function(){t.createFiles.length>0&&!t.thaoTacGop&&setTimeout((function(){t.genAllAlpacaForm(t.dossierFilesItems,t.createFiles)}),300)}))},methods:{genAllAlpacaForm:function(t,e){var a=this;if(t.length>0&&t.filter((function(t){return t.eForm&&t.size})).length>0){var i=t.filter((function(t){return t.eForm})),s=e.filter((function(t){return t.eForm}));i.length>0||e.forEach((function(t){t.eForm&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))})),s.length!==i.length&&s.forEach((function(t){var e=i.findIndex((function(e){return t.partNo===e.dossierPartNo}));-1===e&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))}else e.forEach((function(t){t.eForm&&(t["templateNo"]=a.detailDossier.dossierTemplateNo,a.showAlpacaJSFORM(t))}))},mergeDossierTemplateVsDossierFiles:function(t,e){return 0!==e.length?t.forEach((function(t,a){t["editForm"]=!0,t["embed"]=!1;var i=e.find((function(e){return t.partNo===e.dossierPartNo&&0!==e.fileSize&&e.eForm||t.partNo===e.dossierPartNo&&!e.eForm}));i?t["daKhai"]=!0:i||(t["daKhai"]=!1)})):t.forEach((function(t){t.eForm&&(t["daKhai"]=!1,t["editForm"]=!0,t["embed"]=!1)})),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item["dossierId"]=vm.detailDossier.dossierId,item["editForm"]=!0,item.templateNo=vm.detailDossier.dossierTemplateNo;var eformScript="";if(item.formScript){try{eformScript=eval("("+item.formScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0,vm.active=!1,vm.active=!0;var deliverableType=item.deliverableType?item.deliverableType:"",paramsEmbed={userId:window.themeDisplay.getUserId(),userEmail:1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid:vm.detailDossier.referenceUid,code:vm.detailDossier.referenceUid,dossierStatus:vm.detailDossier.dossierStatus,dossierSubStatus:vm.detailDossier.dossierSubStatus,tp:item.partNo,token:localStorage.getItem("jwt_token"),dossierNo:vm.detailDossier.dossierNo,submitDate:vm.detailDossier.submitDate,govAgencyCode:vm.detailDossier.govAgencyCode,govAgencyName:vm.detailDossier.govAgencyName,dossierTemplateNo:vm.detailDossier.dossierTemplateNo,dossierId:vm.detailDossier.dossierId},fileTemplateNo="";try{fileTemplateNo=item.fileTemplateNo?item.fileTemplateNo:item.templateFileNo}catch(error){}eformScript&&eformScript.hasOwnProperty("formCode")&&eformScript.formCode&&(fileTemplateNo=eformScript.formCode);var urlEmbed=eformScript.eformEmbed+"/"+fileTemplateNo+"___"+deliverableType+"?originURL="+encodeURIComponent(document.location.origin);for(var key in paramsEmbed)urlEmbed+="&"+key+"="+paramsEmbed[key];setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src="",setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),50)}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):{};var fileExist="",dataFormFile="";try{fileExist=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm}))}catch(error){}var hasDataFormFile="";if(fileExist&&fileExist.formData)try{dataFormFile=JSON.parse(fileExist.formData),hasDataFormFile=Object.keys(dataFormFile).length}catch(error){}formData=resData?eval("("+resData+")"):{},hasDataFormFile&&(formData=dataFormFile);var fileTemplateNo="";try{fileTemplateNo=item.fileTemplateNo?item.fileTemplateNo:item.templateFileNo}catch(error){}formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=fileTemplateNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}else vm.$store.dispatch("loadFormScriptKQ",item).then((function(resScript){try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0,vm.active=!1,vm.active=!0;var _deliverableType=item.deliverableType?item.deliverableType:"",_paramsEmbed={userId:window.themeDisplay.getUserId(),userEmail:1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid:vm.detailDossier.referenceUid,code:vm.detailDossier.referenceUid,dossierStatus:vm.detailDossier.dossierStatus,dossierSubStatus:vm.detailDossier.dossierSubStatus,tp:item.partNo,token:localStorage.getItem("jwt_token"),dossierNo:vm.detailDossier.dossierNo,submitDate:vm.detailDossier.submitDate,govAgencyCode:vm.detailDossier.govAgencyCode,govAgencyName:vm.detailDossier.govAgencyName,dossierTemplateNo:vm.detailDossier.dossierTemplateNo,dossierId:vm.detailDossier.dossierId},_fileTemplateNo="";try{_fileTemplateNo=item.templateFileNo?item.templateFileNo:item.fileTemplateNo}catch(error){}eformScript&&eformScript.hasOwnProperty("formCode")&&eformScript.formCode&&(_fileTemplateNo=eformScript.formCode);var _urlEmbed=eformScript.eformEmbed+"/"+_fileTemplateNo+"___"+_deliverableType+"?originURL="+encodeURIComponent(document.location.origin);for(var _key in _paramsEmbed)_urlEmbed+="&"+_key+"="+_paramsEmbed[_key];setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=_urlEmbed}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):eformScript,formData=resData?eval("("+resData+")"):{};var fileTemplateNo="";try{fileTemplateNo=item.templateFileNo?item.templateFileNo:item.fileTemplateNo}catch(error){}formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=fileTemplateNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))},saveAlpacaForm:function(t,e){var a=this,i=a.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));i?(i["dossierId"]=a.detailDossier.dossierId,i["id"]=a.id,a.loadingApacal=!0,a.$store.dispatch("putAlpacaForm",i).then((function(t){setTimeout((function(){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Yêu cầu của bạn thực hiện thành công"),a.createFiles[e].daKhai=!0,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileSigned("update")})).catch((function(t){}))}),3e3)})).catch((function(t){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))):(t["dossierId"]=a.detailDossier.dossierId,t["id"]=a.id,a.loadingApacal=!0,a.$store.dispatch("postEform",t).then((function(t){setTimeout((function(){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Yêu cầu của bạn thực hiện thành công"),a.createFiles[e].daKhai=!0,a.$store.dispatch("loadDossierFiles",a.detailDossier.dossierId).then((function(t){a.dossierFilesItems=t,a.createFileSigned("update")})).catch((function(t){}))}),3e3)})).catch((function(t){a.loadingApacal=!1,toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))},saveAlpacaFormCallBack:function(t){var e=this,a=t.data?JSON.parse(t.data):"";if(a.hasOwnProperty("tp")&&a.tp){var i=e.dossierFilesItems.find((function(t){return t.dossierPartNo===a.tp&&t.eForm&&0!==t.fileSize}));if(i){var s=e.createFiles.findIndex((function(t){return t.partNo===a.tp}));i["dossierId"]=e.detailDossier.dossierId,i["formData"]=a,e.$store.dispatch("putAlpacaFormCallBack",i).then((function(t){setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thực hiện thành công"),e.createFiles[s].daKhai=!0,e.showAlpacaJSFORM(e.createFiles[s])}),3e3),e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}else a["dossierId"]=e.detailDossier.dossierId,e.$store.dispatch("postEformCallBack",a).then((function(t){var i=e.createFiles.findIndex((function(t){return t.partNo===a.tp}));setTimeout((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Thực hiện thành công"),e.createFiles[i].daKhai=!0,e.createFiles[i].daKhai=!0,e.showAlpacaJSFORM(e.createFiles[i])}),3e3),e.$store.dispatch("loadDossierFiles",e.detailDossier.dossierId).then((function(t){e.dossierFilesItems=t})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))}},pickFile:function(t){var e=this;e.stateAddFileOther=!1,document.getElementById("file"+t.partNo).value="",document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e,a){var i=this;if(i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.detailDossier.dossierId,e["dossierTemplateNo"]=i.detailDossier.dossierTemplateNo,i.thaoTacGop){i.progressUploadPart="";var s=$('input[id="file'+e.partNo+'"]')[0].files,n=s.length;if(s)for(var o=0;o<n;o++){var r=s[o],l=r["name"];r["name"]&&(l=r["name"].replace(/\%/g,""),l=l.replace(/\//g,""),l=l.replace(/\\/g,"")),3===e.partType&&e["displayName"]&&(l=e["displayName"].replace(/\%/g,""),l=l.replace(/\//g,""),l=l.replace(/\\/g,""));var c="";try{c=e.templateFileNo?e.templateFileNo:e.fileTemplateNo}catch(p){}var d={displayName:l,fileType:r.type,fileSize:r.size,isSync:!1,file:r,dossierPartNo:e.partNo,dossierTemplateNo:e.dossierTemplateNo,fileTemplateNo:c,formData:"",referenceUid:"",modifiedDate:i.getCurentDateTime(),createDate:(new Date).getTime()};i.dossierFilesItems.push(d),i.createFiles[a]["filesAttach"].push(d)}}else i.$store.dispatch("uploadSingleFile",e).then((function(t){i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems),i.createFileSigned()}))})).catch((function(t){i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems),i.createFileSigned()}))}))},createFileEntry:function(t,e,a){var i=this;if(t){var s={};s["FileUploadHandler"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/vgca/fileupload",s["SessionId"]="",s["FileName"]="";var n=function(t){var s=JSON.parse(t);if(0===s.Status){var n;try{n=JSON.parse(s.FileServer),"https:"===window.top.location.protocol&&(n.url=n.url.replace("http:","https:")),n.url=n.url.replace(":80/","/");var o=s.FileName;try{o=s.FileName.split("\\").pop()}catch(c){}var r="";try{r=e.templateFileNo?e.templateFileNo:e.fileTemplateNo}catch(c){}var l={displayName:o,fileType:"",fileSize:10,isSync:!1,file:"",dossierPartNo:e.partNo,dossierTemplateNo:i.detailDossier.dossierTemplateNo,fileTemplateNo:r,formData:"",referenceUid:"",modifiedDate:i.getCurentDateTime(),createDate:(new Date).getTime(),preview:n.url,fileEntryESign:n.fileEntryId};i.dossierFilesItems=[l],i.createFiles[a]["filesAttach"]=[l]}catch(c){}toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Giấy tờ đã được ký duyệt")}else s.Message?(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(s.Message)):(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Ký duyệt không thành công"))},o=JSON.stringify(s);vgca_sign_approved(o,n)}else{i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e["dossierId"]=i.detailDossier.dossierId,e["dossierTemplateNo"]=i.detailDossier.dossierTemplateNo;var r=$('input[id="file'+e.partNo+'"]')[0].files,l=r[0],c=l["name"];l["name"]&&(c=l["name"].replace(/\%/g,""),c=c.replace(/\//g,""),c=c.replace(/\\/g,"")),3===e.partType&&e["displayName"]&&(c=e["displayName"].replace(/\%/g,""),c=c.replace(/\//g,""),c=c.replace(/\\/g,""));var d="";try{d=e.templateFileNo?e.templateFileNo:e.fileTemplateNo}catch(u){}var p={displayName:c,fileType:l.type,fileSize:l.size,isSync:!1,file:l,dossierPartNo:e.partNo,dossierTemplateNo:e.dossierTemplateNo,fileTemplateNo:d,formData:"",referenceUid:"",modifiedDate:i.getCurentDateTime(),createDate:(new Date).getTime(),preview:"",fileEntryESign:""};i.$store.dispatch("uploadFileThaoTacGop",p).then((function(t){i.progressUploadPart="";var e=JSON.parse(t.FileServer);p.fileEntryESign=e.fileEntryId,"https:"===window.top.location.protocol&&(e.url=e.url.replace("http:","https:")),e.url=e.url.replace(":80/","/"),p.preview=e.url,i.dossierFilesItems=[p],i.createFiles[a]["filesAttach"]=[p]})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Tải lên không thành công")}))}},loadAlpcaForm:function(t){var e=this,a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm&&0!==e.fileSize}));a?(a["id"]=e.id,e.$store.dispatch("loadAlpcaForm",a)):e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},loadAlpcaFormClick:function(t){var e=this;window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage),e.currentFormView==="formAlpaca"+t.partNo+e.id?e.currentFormView="":e.currentFormView="formAlpaca"+t.partNo+e.id,e.pstEl=e.endEl=0,setTimeout((function(){$("#formAlpaca"+t.partNo+e.id).height()>200&&(e.pstEl=$("#wrapForm"+t.partNo+e.id).offset().top,e.endEl=$("#formAlpaca"+t.partNo+e.id).height(),$(window).scroll((function(){e.pstFixed=$(window).scrollTop()})))}),300);var a=e.dossierFilesItems.find((function(e){return e.dossierPartNo===t.partNo&&e.eForm}));if(a)if(a.fileSize){a["id"]=e.id,t["editForm"]=!1;for(var i="",s=0;s<e.dossierFilesItems.length;s++)if(e.dossierFilesItems[s]["dossierPartNo"]===t["partNo"]&&e.dossierFilesItems[s]["eForm"]){i=s;break}e.dossierFilesItems[i]["isSigned"]?setTimeout((function(){document.getElementById("displayPDF"+t.partNo+e.id).src=e.dossierFilesItems[i].pdfSigned}),200):e.$store.dispatch("viewFile",a).then((function(t){document.getElementById("displayPDF"+a.dossierPartNo+e.id).src=t}))}else e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}));else e.createFiles.forEach((function(a){a.eForm&&t.partNo===a.partNo&&(a["templateNo"]=e.detailDossier.dossierTemplateNo,e.showAlpacaJSFORM(a))}))},editFormAlpaca:function editFormAlpaca(item,index){var vm=this;vm.createFiles[index].editForm=!0,window.scrollBy(0,10),vm.active=!1,vm.active=!0;var fileFind=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm})),eformScript="";try{eformScript=eval("("+fileFind.formScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){vm.createFiles[index].embed=!0;var deliverableType=item.deliverableType?item.deliverableType:"",paramsEmbed={userId:window.themeDisplay.getUserId(),userEmail:1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid:vm.detailDossier.referenceUid,code:vm.detailDossier.referenceUid,dossierStatus:vm.detailDossier.dossierStatus,dossierSubStatus:vm.detailDossier.dossierSubStatus,tp:item.partNo,token:localStorage.getItem("jwt_token"),dossierNo:vm.detailDossier.dossierNo,submitDate:vm.detailDossier.submitDate,govAgencyCode:vm.detailDossier.govAgencyCode,govAgencyName:vm.detailDossier.govAgencyName,dossierTemplateNo:vm.detailDossier.dossierTemplateNo,dossierId:vm.detailDossier.dossierId},fileTemplateNo="";try{fileTemplateNo=item.fileTemplateNo?item.fileTemplateNo:item.templateFileNo}catch(error){}eformScript&&eformScript.hasOwnProperty("formCode")&&eformScript.formCode&&(fileTemplateNo=eformScript.formCode);var urlEmbed=eformScript.eformEmbed+"/"+fileTemplateNo+"___"+deliverableType+"?originURL="+encodeURIComponent(document.location.origin);for(var key in paramsEmbed)urlEmbed+="&"+key+"="+paramsEmbed[key];setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),500)}else vm.createFiles[index].embed=!1,setTimeout((function(){var t=vm.dossierFilesItems.find((function(t){return t.dossierPartNo===item.partNo&&t.eForm}));t["id"]=vm.id,vm.$store.dispatch("loadAlpcaForm",t)}),200)},previewFormAlpaca:function previewFormAlpaca(item,index){var vm=this;vm.createFiles[index]["editForm"]=!1,window.scrollBy(0,10),vm.active=!1,vm.active=!0;for(var indexFile="",i=0;i<vm.dossierFilesItems.length;i++)if(vm.dossierFilesItems[i]["dossierPartNo"]===item["partNo"]&&vm.dossierFilesItems[i]["eForm"]){indexFile=i;break}vm.dossierFilesItems[indexFile]["isSigned"]?setTimeout((function(){document.getElementById("displayPDF"+item.partNo+vm.id).src=vm.dossierFilesItems[indexFile].pdfSigned}),200):vm.dossierFilesItems.forEach((function(file){if(file.dossierPartNo===item.partNo&&file.eForm&&!file.removed)if(file["dossierId"]=vm.detailDossier.dossierId,vm.onlyView)item["editForm"]=!1,vm.$store.dispatch("viewFile",file).then((function(t){file["eForm"]?vm.pdfEform=!0:vm.pdfEform=!1,setTimeout((function(){document.getElementById("displayPDF"+item.partNo+vm.id).src=t}),200)}));else{var eformScript=eval("("+file.formScript+")");eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed?(item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),500)):(file["id"]=vm.id,vm.$store.dispatch("putAlpacaForm",file).then((function(t){item["editForm"]=!1,setTimeout((function(){vm.$store.dispatch("viewFile",file).then((function(t){document.getElementById("displayPDF"+file.dossierPartNo+vm.id).src=t}))}),200)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}}))},deleteSingleFileEform:function deleteSingleFileEform(item,index){var vm=this,x=confirm("Bạn có muốn xóa?");x&&(vm.dossierFilesItems.forEach((function(file){file.dossierPartNo===item.partNo&&file.eForm&&(file["dossierId"]=vm.detailDossier.dossierId,vm.$store.dispatch("deleteDossierFile",file).then((function(resFile){vm.$store.dispatch("loadDossierFiles",vm.detailDossier.dossierId).then((function(result){vm.dossierFilesItems=result,vm.createFileSigned("update"),item["editForm"]=!0;var fileViewsTemp=vm.dossierFilesItems.filter((function(t){return t.dossierPartNo===item.partNo&&!t.eForm}));fileViewsTemp&&(vm.fileViews=fileViewsTemp);var eformScript="";item.templateNo=vm.detailDossier.dossierTemplateNo,vm.$store.dispatch("loadFormScriptKQ",item).then((function(resScript){try{eformScript=eval("("+resScript+")")}catch(error){}if(eformScript&&eformScript.hasOwnProperty("eformEmbed")&&eformScript.eformEmbed){item.embed=!0,vm.active=!1,vm.active=!0;var deliverableType=item.deliverableType?item.deliverableType:"",paramsEmbed={userId:window.themeDisplay.getUserId(),userEmail:1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,referenceUid:vm.detailDossier.referenceUid,code:vm.detailDossier.referenceUid,dossierStatus:vm.detailDossier.dossierStatus,dossierSubStatus:vm.detailDossier.dossierSubStatus,tp:item.partNo,token:localStorage.getItem("jwt_token"),dossierNo:vm.detailDossier.dossierNo,submitDate:vm.detailDossier.submitDate,govAgencyCode:vm.detailDossier.govAgencyCode,govAgencyName:vm.detailDossier.govAgencyName,dossierTemplateNo:vm.detailDossier.dossierTemplateNo,dossierId:vm.detailDossier.dossierId},fileTemplateNo="";try{fileTemplateNo=item.fileTemplateNo?item.fileTemplateNo:item.templateFileNo}catch(error){}eformScript&&eformScript.hasOwnProperty("formCode")&&eformScript.formCode&&(fileTemplateNo=eformScript.formCode);var urlEmbed=eformScript.eformEmbed+"/"+fileTemplateNo+"___"+deliverableType+"?originURL="+encodeURIComponent(document.location.origin);for(var key in paramsEmbed)urlEmbed+="&"+key+"="+paramsEmbed[key];setTimeout((function(){document.getElementById("formAlpaca"+item.partNo+vm.id+"embed").src=urlEmbed}),300)}else item.embed=!1,vm.active=!1,vm.active=!0,vm.$store.dispatch("loadFormData",item).then((function(resData){var formScript,formData;window.$("#formAlpaca"+item.partNo+vm.id).empty(),formScript=item.formScript?eval("("+item.formScript+")"):{},formData=resData?eval("("+resData+")"):{};var fileTemplateNo="";try{fileTemplateNo=item.templateFileNo?item.templateFileNo:item.fileTemplateNo}catch(error){}formData.dossierId_hidden=vm.detailDossier.dossierId,formData.dossierStatus_hidden=vm.detailDossier.dossierStatus,formData.dossierSubStatus_hidden=vm.detailDossier.dossierSubStatus,formData.fileTemplateNo_hidden=fileTemplateNo,formData.deliverableType_hidden=item.deliverableType,formData.userEmailAddress_hidden=1===vm.originality?vm.userLoginInfomation.applicantContactEmail:vm.userLoginInfomation.employeeEmail,formData.referenceUid=vm.detailDossier.referenceUid,formScript.data=formData,window.$('div[id="formAlpaca'+item.partNo+vm.id+'"]').alpaca(formScript)}))}))}))})))})),vm.createFiles[index].daKhai=!1)},previewFileEfom:function(t,e){var a=this;a.dossierFilesItems.forEach((function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e["dossierId"]=a.detailDossier.dossierId,a.dialogPDFLoading=!0,a.documentType="Tài liệu khai trực tuyến",a.dialogPDF=!0,e["id"]=a.id,a.$store.dispatch("putAlpacaForm",e).then((function(t){setTimeout((function(){a.$store.dispatch("viewFile",e).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))}),1e3)})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")})))}))},showConfigSignService:function(){vgca_show_config()},viewFileKySo:function(t,e){},signAction:function(t,e,a,i){var s=this,n=function(t){var i=JSON.parse(t);if(0===i.Status&&i.FileServer){var n;try{n=JSON.parse(i.FileServer)}catch(u){}if(n&&("https:"===window.location.protocol&&0===n.url.indexOf("http:")&&(n.url=n.url.replace("http","https")),n.url=n.url.replace(":80/","/")),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Tài liệu đã được ký duyệt"),a){for(var o="",r=0;r<s.dossierFilesItems.length;r++)if(s.dossierFilesItems[r]["dossierPartNo"]===a&&s.dossierFilesItems[r]["eForm"]){o=r;break}s.dossierFilesItems[o].isSigned=!0,s.dossierFilesItems[o].pdfSigned=n?n.url:"",s.dossierFilesItems[o].fileEntryId=n?n.fileEntryId:"",s.createFiles[e]["editForm"]?(s.createFiles[e]["editForm"]=!1,setTimeout((function(){document.getElementById("displayPDF"+a+s.id).src=n.url}),200)):setTimeout((function(){document.getElementById("displayPDF"+a+s.id).src=n.url}),200)}else s.dossierFilesItems[e].isSigned=!0,s.dossierFilesItems[e].pdfSigned=n?n.url:"",s.dossierFilesItems[e].fileEntryId=n?n.fileEntryId:"";var l=[];if(s.dossierFilesItems.length>0)for(var c=function(t){var e=s.createFiles.filter((function(e){return String(e.partNo)===String(s.dossierFilesItems[t]["dossierPartNo"])}));e&&e.length>0&&(s.dossierFilesItems[t]=Object.assign(s.dossierFilesItems[t],{createFileDossierPartEform:e[0]["eForm"]}),l.push(s.dossierFilesItems[t]))},d=0;d<s.dossierFilesItems.length;d++)c(d);var p={dossierId:s.detailDossier["dossierId"],createFiles:l};s.$store.commit("setCreateFileSigned",p)}else i.Message?(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(i.Message)):(toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Quá trình ký số bị hủy bỏ"))},o={};o["FileUploadHandler"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/vgca/fileupload",o["SessionId"]="",o["FileName"]=window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+s.detailDossier["dossierId"]+"/files/"+t["referenceUid"]+"/preview.pdf";var r=JSON.stringify(o);"approved"===i?vgca_sign_approved(r,n):"issued"===i?vgca_sign_issued(r,n):"income"===i?vgca_sign_income(r,n):"copy"===i&&vgca_sign_copy(r,n)},signHsm:function(t,e,a){var i=this;i.loadingHsm=!0;var s={token:localStorage.getItem("jwt_token"),dossierId:i.detailDossier.dossierId,dossierFileIds:t?t.dossierFileId.toString():a};i.$store.dispatch("kySoHsm",s).then((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Ký số thành công"),i.loadingHsm=!1})).catch((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Ký số thất bại"),i.loadingHsm=!1}))},kySoHsmAll:function(){var t=this,e=t.dossierFilesItems.filter((function(t){return"pdf"===t.fileType.toLowerCase()})),a=[];if(e.forEach((function(e){var i=t.createFiles.find((function(t){return e.dossierPartNo===t.partNo}));i&&a.push(e)})),a.length){var i=confirm("Bạn có chắc chắn thực hiện đóng dấu tất cả giấy tờ?");if(i){var s=a.map((function(t){return t["dossierFileId"]})).toString();t.signHsm("","",s)}}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Không có giấy tờ nào")},deleteSingleFile:function(t,e,a){var i=this,s=confirm("Bạn có muốn xóa?");s&&(i.thaoTacGop?(i.dossierFilesItems=i.dossierFilesItems.filter((function(e){return e.createDate!==t.createDate})),i.createFiles[a]["filesAttach"]=i.createFiles[a]["filesAttach"].filter((function(e){return e.createDate!==t.createDate}))):(t["dossierId"]=i.detailDossier.dossierId,i.$store.dispatch("deleteDossierFile",t).then((function(a){i.fileViews.splice(e,1),i.partView=t.dossierPartNo,i.$store.dispatch("loadDossierFiles",i.detailDossier.dossierId).then((function(t){i.dossierFilesItems=t,i.createFileSigned(),i.createFiles=i.mergeDossierTemplateVsDossierFiles(i.createFiles,i.dossierFilesItems)}))})).catch((function(t){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.clear(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Yêu cầu của bạn thực hiện thất bại.")}))))},viewFile:function(t){var e=this,a=this;a.dossierFilesItems.forEach((function(i){i["dossierId"]=a.detailDossier.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)}))},viewFileAlpaca:function(t){var e=this,a=0;e.loadingApacal=!0;var i=function i(){setTimeout((function(){e.$store.dispatch("viewFile",t).then((function(s){"pending"===s&&a<=10?(a+=1,i()):a>10?e.loadingApacal=!1:(e.loadingApacal=!1,setTimeout((function(){document.getElementById("displayPDF"+t.dossierPartNo+e.id).src=s}),100))})).catch((function(){e.loadingApacal=!1}))}),1e3)};i()},viewFile2:function(t,e){var a=this;if("doc"===t.fileType||"docx"===t.fileType||"xlsx"===t.fileType||"xls"===t.fileType||"zip"===t.fileType||"rar"===t.fileType||"txt"===t.fileType){var i=a.initDataResource.dossierApi+"/"+a.detailDossier.dossierId+"/files/"+t.referenceUid;window.location.assign(i)}else a.dialogPDFLoading=!0,a.documentType="Tài liệu đính kèm",a.dialogPDF=!0,t["dossierId"]=a.detailDossier.dossierId,a.dossierFilesItems[e]["preview"]?(a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=a.dossierFilesItems[e]["preview"]):"plugin"===a.esignType&&a.dossierFilesItems[e]["isSigned"]?(a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=a.dossierFilesItems[e]["pdfSigned"]):a.$store.dispatch("viewFile",t).then((function(t){a.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+a.id).src=t}))},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var a=e.dossierFilesItems.filter((function(e){return e.dossierPartNo===t.partNo&&!e.eForm}));if(!a)return;e.fileViews=a,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},checkStyle:function(t){return"calc(100% - 140px)"},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},changeDisplayName:function(t,e){var a=this,i={dossierId:a.detailDossier.dossierId,value:value};a.$store.dispatch("changeDisplayNameFile",i).then((function(t){a.fileViews[e].displayName=t.displayName,a.stateEdit=!1})).catch((function(t){}))},validCreateFileTemplate:function(){var t=this;if(t.createFiles.length>0){for(var e=0;e<t.createFiles.length;e++)if(t.createFiles[e]["required"]&&!t.createFiles[e]["daKhai"]){var a="Chú ý :"+t.createFiles[e].partName+" là thành phần bắt buộc!";return toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error(a),!1}return!0}return!0},getDossierIntoGroup:function(t){var e=this,a={groupDossierId:t};e.dossierIntoGroup=[],e.$store.dispatch("getDossiersIntoGroup",a).then((function(t){e.dossierIntoGroup=t,e.dossierIntoGroup=e.dossierIntoGroup.filter((function(t){return String(t["stepCode"])===String(e.detailDossier["stepCode"])&&String(t["dossierId"])!==String(e.detailDossier["dossierId"])}))}))},checkIsSigned:function(t){var e=this;if(e.createFileSignedSync){var a=e.createFileSignedSync["createFiles"].filter((function(e){return e.dossierFileId===t}));return a.length>0&&a[0]}return!1},checkUseSign:function(){var t=this;return t.doNotSign},checkRequiredSignPlugin:function(){var t=this;return"true"===t.requiredSignPlugin||!0===t.requiredSignPlugin},createFileSigned:function(t){var e=this;e.dossierFilesItems.forEach((function(a,i){if(e.createFileSignedSync&&e.detailDossier["dossierId"]===e.createFileSignedSync["dossierId"]){var s=e.checkIsSigned(a["dossierFileId"]);s&&"update"!==t?(e.dossierFilesItems[i]["isSigned"]=s["isSigned"],e.dossierFilesItems[i]["fileEntryId"]=s["fileEntryId"],e.dossierFilesItems[i]["pdfSigned"]=s["pdfSigned"]):(e.dossierFilesItems[i]["isSigned"]=!1,e.dossierFilesItems[i]["fileEntryId"]="",e.dossierFilesItems[i]["pdfSigned"]="")}else e.dossierFilesItems[i]["isSigned"]=!1,e.dossierFilesItems[i]["fileEntryId"]="",e.dossierFilesItems[i]["pdfSigned"]=""}));var a=[];if(e.dossierFilesItems.length>0)for(var i=function(t){var i=e.createFiles.filter((function(a){return String(a.partNo)===String(e.dossierFilesItems[t]["dossierPartNo"])}));i&&i.length>0&&a.push(e.dossierFilesItems[t])},s=0;s<e.dossierFilesItems.length;s++)i(s);var n={dossierId:e.detailDossier["dossierId"],createFiles:a};e.$store.commit("setCreateFileSigned",n)},toggleCheckboxKySo:function(t){},getDanhSachFileThaoTacGop:function(){var t=this,e=t.$router.history.current.query,a=Array.from(t.createFiles,(function(t){return t.templateFileNo})),i=[];if(0===t.dossierSelected.length){if(e.hasOwnProperty("dossiers")){var s=e.dossiers.split(",");i=s}}else i=Array.from(t.dossierSelected,(function(t){return t.dossierId}));var n={paramsInput:{dossierIds:i.toString(),fileTemplateNo:a.toString()}};t.filesKySoGop=[],t.$store.dispatch("getFileYeuCauKySo",n).then((function(e){if(e&&e.data)if(t.filesKySoGop=e.data.filter((function(t){return 2==t.dossierPartType&&"pdf"==t.fileType&&t.fileSize})),t.filesKySoGop&&t.filesKySoGop.length){var a=[];if(t.dossierSelected.forEach((function(e){var i=t.filesKySoGop.find((function(t){return t.dossierId==e.dossierId}));i||a.push(e.dossierNo)})),a&&a.length){var i=confirm("Hồ sơ: "+a.toString()+" không có giấy tờ để ký duyệt");if(i){var s=confirm("Tổng số "+t.filesKySoGop.length+" giấy tờ sẽ được ký duyệt");s&&t.kySoGop()}}else{var n=confirm("Tổng số "+t.filesKySoGop.length+" giấy tờ sẽ được ký duyệt");n&&t.kySoGop()}}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Không có giấy tờ để ký duyệt");else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Không có giấy tờ để ký duyệt")}))},kySoGop:function(){var t=this,e=function(e){var a=JSON.parse(e);if(0==a.Status&&a.Message&&a.Files){var i=a.Files,s=[],n=[];i.forEach((function(t){var e=JSON.parse(t.FileSignedURL),a=e["fileEntryId"],i=t["FileID"];s.push(i),n.push(a)})),t.mappingFileSignedUpdate.dossierFiles=s.toString(),t.mappingFileSignedUpdate.fileEntries=n.toString(),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Ký số thành công")}};if(t.filesKySoGop&&t.filesKySoGop.length){var a=[];t.filesKySoGop.forEach((function(t,e){var i={FileID:t.dossierFileId,FileName:t.displayName,URL:window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+t["dossierId"]+"/files/"+t["referenceUid"]+"/preview.pdf"};a.push(i)}));var i={FileUploadHandler:window.themeDisplay.getPortalURL()+"/o/rest/v2/vgca/fileupload",SessionId:"",Files:a},s=JSON.stringify(i);vgca_sign_files(s,e)}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Không có giấy tờ nào")},showDanhSachKySo:function(){var t=this,e=function(e){var a=JSON.parse(e);if(0==a.Status&&a.Files){var i=a.Files;i.forEach((function(e){if(0==e.Status){var a;try{a=JSON.parse(e.FileSignedURL)}catch(l){}a&&("https:"===window.location.protocol&&0===a.url.indexOf("http:")&&(a.url=a.url.replace("http","https")),a.url=a.url.replace(":80/","/"));var i=t.dossierFilesItems.findIndex((function(t){return t.dossierFileId==e.FileID}));t.dossierFilesItems[i].isSigned=!0,t.dossierFilesItems[i].pdfSigned=a?a.url:"",t.dossierFilesItems[i].fileEntryId=a?a.fileEntryId:""}var s=[];if(t.dossierFilesItems.length>0)for(var n=function(e){var a=t.createFiles.filter((function(a){return String(a.partNo)===String(t.dossierFilesItems[e]["dossierPartNo"])}));a&&a.length>0&&(t.dossierFilesItems[e]=Object.assign(t.dossierFilesItems[e],{createFileDossierPartEform:a[0]["eForm"]}),s.push(t.dossierFilesItems[e]))},o=0;o<t.dossierFilesItems.length;o++)n(o);var r={dossierId:t.detailDossier["dossierId"],createFiles:s};t.$store.commit("setCreateFileSigned",r)})),toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Ký số thành công")}},a=t.selectedFileKySo.find((function(t){return 1==t.selected}));if(a){var i=[],s=t.dossierFilesItems.filter((function(t){return 2==t.dossierPartType&&"pdf"==t.fileType}));s.forEach((function(e,a){if(t.selectedFileKySo[a]){var s={FileID:e.dossierFileId,FileName:e.displayName,URL:window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+t.detailDossier["dossierId"]+"/files/"+e["referenceUid"]+"/preview.pdf"};i.push(s)}}));var n={FileUploadHandler:window.themeDisplay.getPortalURL()+"/o/rest/v2/vgca/fileupload",SessionId:"",Files:i},o=JSON.stringify(n);vgca_sign_files(o,e)}else toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Chưa có giấy tờ nào được chọn")},addFileToDossier:function(){var t=this,e=t.dossierIntoGroupSelect.map((function(t){return t.dossierId})).toString(),a=t.filesAdd.map((function(t){return t.dossierFileId})).toString(),i={dossierIds:e,dossierFileId:a};t.$store.dispatch("uploadFileDossierGroup",i).then((function(e){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.success("Đính kèm tài liệu thành công"),t.dialogSelectDosier=!1,t.filesAdd=[],t.$store.commit("setSelectDossierGroup",[])}))},attachOtherDossier:function(t){var e=this;e.filesAdd=[t],e.dialogSelectDosier=!0},cancelAddFile:function(){var t=this;t.dialogSelectDosier=!1,t.filesAdd=[],t.$store.commit("setSelectDossierGroup",[])},confirmAction:function(t){var e=this;e.dialogConfirm=!1,e.dialogSelectDosier=!0},getCreateFileAttach:function(){var t=this;return t.createFiles},getCurentDateTime:function(){var t=new Date;return"".concat(t.getDate().toString().padStart(2,"0"),"/").concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getFullYear()," | ").concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"))},getDocumentTypeIcon:function(t){var e="doc,docx",a="xls,xlsx",i="png,jpg,jpeg";return t?e.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-word-o",color:"blue",size:14}:a.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-excel-o",color:"green",size:14}:"pdf"===t.toLowerCase()?{icon:"fa fa-file-pdf-o",color:"red",size:14}:i.indexOf(t.toLowerCase())>=0?{icon:"fas fa fa-file-image-o",color:"primary",size:14}:{icon:"fas fa fa-paperclip",color:"",size:14}:{icon:"fas fa fa-paperclip",color:"primary",size:14}},showEditorPdf:function(t){var e=this;if(e.showViewerPdfEditor=!0,$(".toolbar .text-color").html(""),$(".toolbar .pen-color").html(""),"undefined"!==typeof Storage)for(var a in localStorage)a.indexOf("/preview.pdf/")>0&&localStorage.removeItem(a);e.fileEditor=t;var i=window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+e.detailDossier["dossierId"]+"/files/"+t["referenceUid"]+"/preview.pdf",s={};if(s[i+"/text/size"]="14",s[i+"/text/color"]="#EF4437",s[i+"/pen/size"]="1",s[i+"/pen/color"]="#EF4437",s[i+"/tooltype"]="text",s[i+"/scale"]="1.33",s[i+"/rotate"]="0",e.fileEditor["signInfo"]&&(s[i+"/annotations"]=e.fileEditor["signInfo"]),"undefined"!==typeof Storage)for(var n in s)localStorage.setItem(n,s[n]);e.dialog_editor_pdf=!0,setTimeout((function(){initPdf(i)}),200)},saveEditor:function(){var t=this,e=confirm("Bạn có chắc chắn lưu các ghi chú cho giấy tờ này?");if(e){var a=window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+t.detailDossier["dossierId"]+"/files/"+t.fileEditor["referenceUid"]+"/preview.pdf";if("undefined"!==typeof Storage){var i=localStorage.getItem(a+"/annotations"),s={dossierFileId:t.fileEditor.dossierFileId,annotation:i};t.$store.dispatch("saveEditor",s).then((function(e){t.$store.dispatch("loadDossierFiles",t.detailDossier.dossierId).then((function(e){t.dossierFilesItems=e})).catch((function(t){})),t.dialog_editor_pdf=!1,t.showViewerPdfEditor=!1})).catch((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Lưu ghi chú thất bại")}))}}},closeEditorPdf:function(){var t=this;if(t.onlyView)t.dialog_editor_pdf=!1,t.showViewerPdfEditor=!1;else{var e=confirm("Bạn có muốn lưu các ghi chú cho giấy tờ này?");if(e){var a=window.themeDisplay.getPortalURL()+"/o/rest/v2/dossiers/"+t.thongTinHoSo["dossierId"]+"/files/"+t.fileEditor["referenceUid"]+"/preview.pdf";if("undefined"!==typeof Storage){var i=localStorage.getItem(a+"/annotations"),s={dossierFileId:t.fileEditor.dossierFileId,annotation:i};t.$store.dispatch("saveEditor",s).then((function(e){t.$store.dispatch("loadDossierFiles",t.thongTinHoSo.dossierId).then((function(e){t.dossierFilesItems=e})).catch((function(t){})),t.dialog_editor_pdf=!1,t.showViewerPdfEditor=!1})).catch((function(){toastr__WEBPACK_IMPORTED_MODULE_0___default.a.error("Lưu ghi chú thất bại")}))}}else t.dialog_editor_pdf=!1,t.showViewerPdfEditor=!1}}}}},e4e5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.layout_view&&void 0!==t.layout_view&&"undefined"!==t.layout_view?a("my-dynamic-view"):t._e()},s=[],n=a("8a22"),o=n["a"],r=a("2877"),l=Object(r["a"])(o,i,s,!1,null,null,null);e["a"]=l.exports},e722:function(t,e,a){"use strict";var i=a("c6a6"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showTotal?a("div",{style:t.viewMobile?"":"text-align: left;position: absolute;line-height: 46px;"},[t._v("Tổng số "),a("span",{staticClass:"text-bold primary--text"},[t._v(t._s(t.total))]),t._v(" "+t._s(t.nameRecord)+". ")]):t._e(),t.total>0?a("div",{staticClass:"vue-tiny-pagination pagination layout",style:t.viewMobile?"":"justify-content: flex-end; -webkit-justify-content: flex-end;"},[t.showLimit?a("div",{staticClass:"pr-2 flex",staticStyle:{width:"120px"}},[t._v("\n      Số hồ sơ mỗi trang:\n    ")]):t._e(),t.showLimit?a("div",{staticClass:"pr-3 xs4 sm2 flex",staticStyle:{"max-width":"70px !important"}},[a(i["a"],{attrs:{items:t.limits},on:{input:t.onLimitChange},model:{value:t.numberPerPage,callback:function(e){t.numberPerPage=e},expression:"numberPerPage"}})],1):t._e(),a("div",{staticClass:"pr-3 xs4 sm2 flex"},[a(i["a"],{attrs:{items:t.totalPagesData,"item-text":"text","item-value":"value"},on:{input:t.goToPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),a("ul",{staticClass:"tiny-pagination",class:t.customClass},[a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,on:{click:function(e){return e.preventDefault(),t.lastPageLast.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("first_page")])])]),a("li",{staticClass:"page-item",class:t.classFirstPage},[a("button",{staticClass:"pagination__navigation",class:t.classFirstPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.lastPage.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_left")])])]),a("li",{staticClass:"page-item",staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation pagination__navigation--disabled text-bold primary--text",staticStyle:{"border-right":"0","border-left":"0"}},[t._v("\n          "+t._s(t.titlePage)+"\n        ")])]),a("li",{staticClass:"page-item",class:t.classLastPage,staticStyle:{"margin-right":"0"}},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,staticStyle:{"border-left":"0"},on:{click:function(e){return e.preventDefault(),t.nextPage.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("chevron_right")])])]),a("li",{staticClass:"page-item",class:t.classLastPage},[a("button",{staticClass:"pagination__navigation",class:t.classLastPage,on:{click:function(e){return e.preventDefault(),t.nextPageLast.apply(null,arguments)}}},[a("i",{staticClass:"material-icons icon",attrs:{"aria-hidden":"true"}},[t._v("last_page")])])])])]):t._e()])},n=[],o=a("9029"),r="TinyPagination",l={name:r,props:{total:{type:Number,required:!0},nameRecord:{type:String,default:"hồ sơ"},page:{type:Number,default:1},numberPerPage:{type:Number,default:15},lang:{type:String,default:"en"},customClass:{type:String},limits:{type:Array,default:function(){return[15,30,50,100]}},showLimit:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!0}},data:function(){return{version:"0.2.1",currentPage:1,translations:{en:{prev:"Previous",title:"Page",next:"Next"}},availableLanguages:["en"]}},created:function(){this.currentPage=this.page},watch:{page:function(t){this.currentPage=parseInt(t)}},computed:{translation:function(){return this.availableLanguages.includes(this.lang)?this.translations[this.lang]:this.translations["en"]},totalPages:function(){return Math.ceil(this.total/this.numberPerPage)},totalPagesData:function(){for(var t=[],e={},a=1;a<=this.totalPages;++a)e={value:a,text:"Trang "+a},t.push(e);return t},titlePage:function(){return"".concat(this.currentPage)},classFirstPage:function(){return{"c-not-allowed pagination__navigation--disabled":1===this.currentPage}},classLastPage:function(){return{"c-not-allowed pagination__navigation--disabled":this.currentPage===this.totalPages}},viewMobile:function(){return o["isMobile"]}},methods:{nextPage:function(){this.currentPage!==this.totalPages&&(this.currentPage+=1,this.$emit("tiny:change-page",{page:this.currentPage,numberPerPage:this.numberPerPage}))},lastPage:function(){this.currentPage>1&&(this.currentPage-=1,this.$emit("tiny:change-page",{page:this.currentPage,numberPerPage:this.numberPerPage}))},nextPageLast:function(){this.currentPage=this.totalPages,this.$emit("tiny:change-page",{page:this.totalPages,numberPerPage:this.numberPerPage})},lastPageLast:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1,numberPerPage:this.numberPerPage})},goToPage:function(){this.$emit("tiny:change-page",{page:this.currentPage,numberPerPage:this.numberPerPage})},onLimitChange:function(){this.currentPage=1,this.$emit("tiny:change-page",{page:1,numberPerPage:this.numberPerPage})}}},c=l,d=a("2877"),p=Object(d["a"])(c,s,n,!1,null,null,null);e["a"]=p.exports},f374:function(t,e,a){"use strict";var i=a("c6a6"),s=a("8336"),n=a("b0af"),o=a("99d9"),r=a("2b5d"),l=a("169a"),c=a("cd55"),d=a("49e2"),p=a("0e8f"),u=a("132d"),m=a("a722"),h=a("490a"),f=a("9910"),g=a("e0c7"),v=a("2677"),y=a("a844"),_=a("71d9"),C=a("2a7f"),S=a("3a2f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a(c["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(d["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(u["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),1===t.data_payment.requestPayment||3===t.data_payment.requestPayment||4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a("span",[t._v(t._s(t.data_payment.paymentFee))]):t._e(),2===t.data_payment.requestPayment?a("span",[t._v("Lập phiếu thanh toán")]):t._e()]),a(n["a"],[a(o["b"],{staticClass:"pb-1"},[a(m["a"],{attrs:{wrap:""}},[a(p["a"],{attrs:{xs12:"",md2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[t._v("Tên phí, lệ phí: ")])],1),a(p["a"],{attrs:{xs12:"",md10:""}},[t.getDataSource("paymentFee")?a(p["a"],[1===t.data_payment.editable||2===t.data_payment.editable||3===t.data_payment.editable?a(r["a"],{attrs:{items:t.getDataSource("paymentFee")},on:{change:t.changeFee},model:{value:t.data_payment.paymentFee,callback:function(e){t.$set(t.data_payment,"paymentFee",e)},expression:"data_payment.paymentFee"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.data_payment.paymentFee))])],1):a(p["a"],[1===t.data_payment.editable||2===t.data_payment.editable||3===t.data_payment.editable?a(v["a"],{model:{value:t.data_payment.paymentFee,callback:function(e){t.$set(t.data_payment,"paymentFee",e)},expression:"data_payment.paymentFee"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.data_payment.paymentFee))])],1)],1),a(p["a"],{attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[t._v("Lệ phí: ")])],1),a(p["a"],{attrs:{xs12:"",sm3:""}},[t.getDataSource("feeAmount")?a(p["a"],[1===t.data_payment.editable||3===t.data_payment.editable?a(r["a"],{attrs:{items:t.getDataSource("feeAmount")},on:{change:t.changeFee},model:{value:t.data_payment.feeAmount,callback:function(e){t.$set(t.data_payment,"feeAmount",e)},expression:"data_payment.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.feeAmount.toString().replace(/\./g,"")))+"    vnđ")])],1):a(p["a"],[1===t.data_payment.editable||3===t.data_payment.editable?a(v["a"],{on:{keyup:t.changeFee},model:{value:t.data_payment.feeAmount,callback:function(e){t.$set(t.data_payment,"feeAmount",e)},expression:"data_payment.feeAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.feeAmount.toString().replace(/\./g,"")))+"    vnđ")])],1)],1),a(p["a"],{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[t._v("Phí: ")])],1),a(p["a"],{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[t.getDataSource("serviceAmount")?a(p["a"],[2===t.data_payment.editable||3===t.data_payment.editable?a(r["a"],{attrs:{items:t.getDataSource("serviceAmount")},on:{change:t.changeFee},model:{value:t.data_payment.serviceAmount,callback:function(e){t.$set(t.data_payment,"serviceAmount",e)},expression:"data_payment.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.serviceAmount.toString().replace(/\./g,"")))+"    vnđ")])],1):a(p["a"],[2===t.data_payment.editable||3===t.data_payment.editable?a(v["a"],{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.serviceAmount,callback:function(e){t.$set(t.data_payment,"serviceAmount",e)},expression:"data_payment.serviceAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.serviceAmount.toString().replace(/\./g,"")))+"    vnđ")])],1)],1),a(p["a"],{attrs:{xs12:"",sm2:""}}),2!==t.viaPortal&&"2"!==t.viaPortal||0===t.data_payment.shipAmount?t._e():a(p["a"],{attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[t._v("Phí chuyển phát: ")])],1),2!==t.viaPortal&&"2"!==t.viaPortal||0===t.data_payment.shipAmount?t._e():a(p["a"],{attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?a(v["a"],{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.shipAmount,callback:function(e){t.$set(t.data_payment,"shipAmount",e)},expression:"data_payment.shipAmount"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.currency(t.data_payment.shipAmount.toString().replace(/\./g,"")))+"    vnđ")])],1),t.showCounterFee?a(p["a"],{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[t._v("Số lượng: ")])],1):t._e(),t.showCounterFee?a(p["a"],{staticClass:"pt-1",attrs:{xs12:"",sm3:""}},[2===t.data_payment.editable||3===t.data_payment.editable?a(v["a"],{attrs:{type:"number"},on:{keyup:t.changeFee,change:t.changeFee,input:t.changeFee},model:{value:t.data_payment.counter,callback:function(e){t.$set(t.data_payment,"counter",e)},expression:"data_payment.counter"}}):a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(t.data_payment.counter))])],1):t._e(),a(p["a"],{attrs:{xs12:"",sm2:""}}),a(p["a"],{attrs:{xs12:""}}),!t.getDataSource("paymentMethod")||5!=t.data_payment.requestPayment||1!==t.data_payment.editable&&2!==t.data_payment.editable&&3!==t.data_payment.editable?t._e():a(p["a"],{attrs:{xs12:"",md2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[t._v("Hình thức thanh toán: ")])],1),!t.getDataSource("paymentMethod")||5!=t.data_payment.requestPayment||1!==t.data_payment.editable&&2!==t.data_payment.editable&&3!==t.data_payment.editable?t._e():a(p["a"],{attrs:{xs12:"",md3:""}},[a(p["a"],[a(i["a"],{attrs:{"item-text":"name",items:t.getDataSource("paymentMethod")},on:{change:t.changeFee},model:{value:t.data_payment.paymentMethod,callback:function(e){t.$set(t.data_payment,"paymentMethod",e)},expression:"data_payment.paymentMethod"}})],1)],1)],1)],1),a(o["b"],{staticClass:"pt-0"},[a(m["a"],{attrs:{wrap:""}},[1===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),1===t.data_payment.requestPayment?a(p["a"],{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),1===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm1:""}}):t._e(),2===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),2===t.data_payment.requestPayment?a(p["a"],{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),2===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm1:""}}):t._e(),4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Tổng: ")])])],1):t._e(),4===t.data_payment.requestPayment||5===t.data_payment.requestPayment?a(p["a"],{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.feeTong.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),4===t.data_payment.requestPayment?a(p["a"],{staticClass:"pt-1",attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Đã tạm nộp: ")])])],1):t._e(),4===t.data_payment.requestPayment?a(p["a"],{staticClass:"pt-1",staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[1===t.data_payment.editable||3===t.data_payment.editable?a(v["a"],{directives:[{name:"money",rawName:"v-money",value:t.money,expression:"money"}],attrs:{suffix:"vnđ"},on:{keyup:t.changeFee},model:{value:t.data_payment.advanceAmount,callback:function(e){t.$set(t.data_payment,"advanceAmount",e)},expression:"data_payment.advanceAmount"}}):a("span",[t._v(t._s(t.currency(Number(t.data_payment.advanceAmount.toString().replace(/\./g,"")).toString().replace(/\./g,"")))+"    vnđ")])],1):t._e(),4===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm1:""}}):t._e(),4===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm2:""}},[a(g["a"],{staticClass:"pl-0 text-right"},[a("span",{staticClass:"text-bold"},[t._v("Còn phải nộp: ")])])],1):t._e(),4===t.data_payment.requestPayment?a(p["a"],{staticStyle:{"padding-top":"7px"},attrs:{xs12:"",sm3:""}},[a("span",[t._v(t._s(t.currency(t.totalFee.toString().replace(/\./g,"")))+"    vnđ")])]):t._e(),4===t.data_payment.requestPayment?a(p["a"],{attrs:{xs12:"",sm1:""}}):t._e()],1),a(m["a"],{staticStyle:{position:"relative"},attrs:{wrap:""}},[a(p["a"],{staticClass:"my-0 py-1",staticStyle:{width:"70px"}},[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Ghi chú:")]),a(p["a"],{staticStyle:{width:"calc(100% - 80px)"}},[0==t.activeEdit?a("div",{staticClass:"pl-2"},[a(y["a"],{staticClass:"py-0",attrs:{row:"2",readonly:t.activeEdit,required:""},model:{value:t.data_payment.paymentNote,callback:function(e){t.$set(t.data_payment,"paymentNote",e)},expression:"data_payment.paymentNote"}})],1):t._e(),t.activeEdit||""===t.data_payment.paymentNote?a("p",{staticClass:"px-2 my-0 py-1"},[t._v("\n                "+t._s(t.data_payment.paymentNote)+"   \n                "),1==t.activeEdit?a(u["a"],{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"blue",size:"20",title:"Sửa",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!1}}},[t._v("\n                  create\n                ")]):t._e()],1):t._e(),a("span",{staticStyle:{position:"absolute",top:"15px",right:"10px"}},[0==t.activeEdit?a(u["a"],{staticClass:"hover-pointer btn-add mx-0 my-0",attrs:{color:"green",size:"25",grey:"","darken-4":""},on:{click:function(e){e.stopPropagation(),t.activeEdit=!0}}},[t._v("\n                  check\n                ")]):t._e()],1)])],1),t.paymentFile&&5===t.data_payment.requestPayment?a("div",[a("span",[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" File báo thanh toán:")]),t._v(" \n            "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.viewFile()}}},[a(u["a"],[t._v("attach_file")]),t._v("\n              "+t._s(t.paymentFileName)+"\n            ")],1),a(S["a"],{attrs:{top:""}},[a(s["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(e){return e.stopPropagation(),t.downloadPaymentFile(t.item)}},slot:"activator"},[a(u["a"],{staticStyle:{color:"#0d71bb"},attrs:{size:"16",color:"primary"}},[t._v("save_alt")])],1),a("span",[t._v("Tải xuống")])],1)],1):t._e()],1)],1)],1)],1),a(l["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a(n["a"],[a(_["a"],{attrs:{flat:"",dark:"",color:"primary"}},[a(C["b"],[t._v("File đính kèm")]),a(f["a"]),a(s["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a(u["a"],[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a(h["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},T=[],x=a("716b"),D={props:{payments:{type:Object,default:function(){}},viaPortal:{type:Number,default:function(){return 0}},detailDossier:{type:Object,default:function(){}},dataSource:{type:Object,default:function(){}}},model:{prop:"payments"},data:function(){return{showCounterFee:!1,data_payment:{},money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,paymentFile:"",dialogPDF:!1,dialogPDFLoading:!0}},directives:{money:x["VMoney"]},created:function(){var t=this;t.data_payment=t.payments,t.showCounterFee=t.payments.hasOwnProperty("counter"),t.payments&&setTimeout((function(){var e="number"===typeof t.payments.feeAmount?Number(t.payments.feeAmount):Number(t.payments.feeAmount.toString().replace(/\./g,""));if(1===t.payments.requestPayment){var a="number"===typeof t.payments.serviceAmount?Number(t.payments.serviceAmount):Number(t.payments.serviceAmount.toString().replace(/\./g,""));t.feeTong=e+a,t.totalFee=e+a}else if(2===t.payments.requestPayment){var i=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,s=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===s?t.totalFee=e+i:t.totalFee=e+i+s}else{var n=t.payments.advanceAmount?Number(t.payments.advanceAmount.toString().replace(/\./g,"")):0,o=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,r=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;if(2!==t.viaPortal&&"2"!==t.viaPortal||0===r?(t.feeTong=e+o,t.totalFee=e+o-n):(t.feeTong=e+o+r,t.totalFee=e+o+r-n),5===t.payments.requestPayment){var l=t.detailDossier;t.$store.dispatch("getPaymentFiles",l).then((function(e){t.paymentFile=e}))}}t.showCounterFee&&(t.feeTong=t.feeTong*t.payments.counter,t.totalFee=t.totalFee*t.payments.counter),t.totalFee<0&&(t.totalFee=0)}),300)},computed:{paymentFileName:function(){return this.$store.getters.getPaymentFileName},originality:function(){var t=this;return t.getOriginality()}},watch:{viaPortal:function(t){this.changeFee()},detailDossier:function(t){var e=this;if(5===e.payments.requestPayment){var a=t;e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t}))}}},methods:{changeFee:function(){var t=this;setTimeout((function(){var e=t.data_payment,a=e.feeAmount?Number(e.feeAmount.toString().replace(/\./g,"")):0;if(1===e.requestPayment){var i=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0;t.feeTong=a+i,t.totalFee=a+i}else if(2===e.requestPayment){var s=t.payments.serviceAmount?Number(t.payments.serviceAmount.toString().replace(/\./g,"")):0,n=t.payments.shipAmount?Number(t.payments.shipAmount.toString().replace(/\./g,"")):0;2!==t.viaPortal&&"2"!==t.viaPortal||0===n?t.totalFee=a+s:t.totalFee=a+s+n}else{var o=Number(e.advanceAmount.toString().replace(/\./g,"")),r=Number(e.serviceAmount.toString().replace(/\./g,"")),l=Number(e.shipAmount.toString().replace(/\./g,""));2!==t.viaPortal&&"2"!==t.viaPortal||0===l?(t.feeTong=a+r,t.totalFee=a+r-o):(t.feeTong=a+r+l,t.totalFee=a+r+l-o)}t.showCounterFee&&(t.feeTong=t.feeTong*e.counter,t.totalFee=t.totalFee*e.counter),t.totalFee<0&&(t.totalFee=0)}),200)},viewFile:function(){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;var e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e}))},downloadPaymentFile:function(t){var e=this,a="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(a)},currency:function(t){if(t){var e=(t/1).toFixed(0).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return""},getDataSource:function(t){var e=this,a=e.dataSource;if(!a||0==Object.keys(a).length)return!1;var i=a[t]?a[t]:"";return i},goBack:function(){window.history.back()}},filters:{}},F=D,N=a("2877"),w=Object(N["a"])(F,b,T,!1,null,null,null);e["a"]=w.exports},fc7b:function(t,e,a){"use strict";var i=a("8212"),s=a("4ca6"),n=a("8336"),o=a("b0af"),r=a("99d9"),l=a("cc20"),c=a("8fea"),d=a("169a"),p=a("cd55"),u=a("49e2"),m=a("0e8f"),h=a("132d"),f=a("a722"),g=a("490a"),v=a("9910"),y=a("e0c7"),_=a("71d9"),C=a("2a7f"),S=a("3a2f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-info",staticStyle:{width:"100%"}},[a(p["a"],{staticClass:"expansion-pl",attrs:{value:[!0],expand:""}},[a(u["a"],[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"background-triangle-small"},[a(h["a"],{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),a("span",[t._v("Phí, lệ phí thủ tục hành chính")])]),a(o["a"],[t.feeList&&t.feeList.length?a(c["a"],{staticClass:"elevation-1",staticStyle:{"border-bottom":"1px solid #dedede","border-left":"1px solid #dedede"},attrs:{headers:t.headers,items:t.feeList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center pt-2",attrs:{width:"50"}},[t._v(" "+t._s(e.index+1))]),a("td",{staticClass:"text-xs-left py-1"},[a("div",[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item&&e.item.paymentFee?e.item.paymentFee:""))])])]),a("td",{staticClass:"px-3 py-1",staticStyle:{width:"170px"}},[a("div",[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item&&e.item.feeAmount?t.currency(e.item.feeAmount.toString().replace(/\./g,"")):0)+"    ")])])]),a("td",{staticClass:"px-3 py-1",staticStyle:{width:"170px"}},[a("div",[a("p",{staticClass:"mt-1 mb-0"},[t._v(t._s(e.item&&e.item.serviceAmount?t.currency(e.item.serviceAmount.toString().replace(/\./g,"")):0)+"    ")])])]),a("td",{staticClass:"text-xs-left px-2 py-1",staticStyle:{"font-weight":"bold"},attrs:{width:"170"}},[a("div",{staticStyle:{"padding-top":"7px"}},[a("span",[t._v(t._s(e.item&&e.item.paymentAmount?t.currency(e.item.paymentAmount.toString().replace(/\./g,"")):0)+"    ")])])])]}}],null,!1,4056960390)},[a("template",{slot:"footer"},[a("td",{staticClass:"text-xs-center",staticStyle:{"border-right":"1px solid #dedede"},attrs:{colspan:4}},[a("span",[t._v("TỔNG TIỀN")])]),a("td",{staticClass:"px-2 text-xs-left",staticStyle:{"border-right":"1px solid #dedede","font-weight":"bold"}},[a("span",[t._v(t._s(t.paymentProfile&&t.paymentProfile.paymentAmount?t.currency(t.paymentProfile.paymentAmount.toString().replace(/\./g,"")):0)+"    vnđ")])])])],2):t._e(),a(f["a"],{staticClass:"my-2",staticStyle:{position:"relative"},attrs:{wrap:""}},[a(m["a"],{staticClass:"my-0 py-0",staticStyle:{width:"145px","max-width":"145px"}},[a(y["a"],{staticClass:"pl-0 text-right"},[t._v("Ghi chú: ")])],1),a(m["a"],[a("p",{staticClass:"my-0 py-1"},[t._v("\n              "+t._s(t.paymentNote)+"\n            ")])])],1),a(r["b"],{staticClass:"px-4 pt-0"},[a("p",{staticClass:"mb-0"},[a("span",{staticClass:"red--text"},[t._v("* ")]),t._v(" Lựa chọn hình thức thanh toán:")]),a("div",{staticClass:"text-xs-left mt-2 mb-3 ml-0"},[t.thanhToanChuyenKhoan?a(l["a"],{staticClass:"mb-2",style:0===t.methodSelect?"opacity: 1;font-weight:normal":1===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"indigo","text-color":"white"},nativeOn:{click:function(e){return t.showThanhToanChuyenKhoan.apply(null,arguments)}}},[a(i["a"],{style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[a(h["a"],{staticStyle:{color:"#fff !important"},attrs:{size:"20"}},[t._v("payment")])],1),a("span",{staticClass:"py-2",style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[t._v("Thanh toán trực tiếp, chuyển khoản")])],1):t._e(),t.showPayGov?a(l["a"],{staticClass:"mb-2",style:0===t.methodSelect?"opacity: 1;font-weight:normal":5===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"#3b5ab5","text-color":"white"},nativeOn:{click:function(e){return t.toPayGov()}}},[a(i["a"],{style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/paygov_logo.png?t=983123",alt:"trevor"}})]),a("span",{staticClass:"py-2",style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[t._v("Thanh toán qua Cổng hỗ trợ thanh toán quốc gia")])],1):t._e(),t.thanhToanKeypay&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile)&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("keypayUrl")&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile)["keypayUrl"]&&!t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("kpdvcqg")?a(l["a"],{staticClass:"mb-2",style:0===t.methodSelect?"opacity: 1;font-weight:normal":2===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"orange","text-color":"white"},nativeOn:{click:function(e){t.toKeyPay(t.getEPaymentProfile(t.paymentProfile.epaymentProfile).keypayUrl)}}},[a(i["a"],{style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-keypay.png",alt:"trevor"}})]),a("span",{staticClass:"py-2",style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[t._v("Thanh toán qua Keypay")])],1):t._e(),t.getEPaymentProfile(t.paymentProfile.epaymentProfile)&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("kpdvcqg")?a(l["a"],{staticClass:"mb-2",style:0===t.methodSelect?"opacity: 1;font-weight:normal":3===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"orange","text-color":"white"},nativeOn:{click:function(e){return t.toKeyPayDvcqg("kpdvcqg")}}},[a(i["a"],{style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-keypay.png",alt:"trevor"}})]),a("span",{staticClass:"py-2",style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[t._v("Thanh toán Keypay Cổng DVCQG")])],1):t._e(),t.getEPaymentProfile(t.paymentProfile.epaymentProfile)&&t.getEPaymentProfile(t.paymentProfile.epaymentProfile).hasOwnProperty("ppkpdvcqg")?a(l["a"],{staticClass:"mb-2",style:0===t.methodSelect?"opacity: 1;font-weight:normal":4===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"#cb7755","text-color":"white"},nativeOn:{click:function(e){return t.toKeyPayDvcqg("ppkpdvcqg")}}},[a(i["a"],{style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-ppkp.png",alt:"trevor"}})]),a("span",{staticClass:"py-2",style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[t._v("Thanh toán qua Cổng DVCQG")])],1):t._e(),t.dataVietelPay?a(l["a"],{staticClass:"mb-2",style:0===t.methodSelect?"opacity: 1;font-weight:normal":6===t.methodSelect?"opacity: 1;font-weight:bold":"opacity: 0.6;font-weight:normal",attrs:{color:"green","text-color":"white"},nativeOn:{click:function(e){return t.showViettelPay.apply(null,arguments)}}},[a(i["a"],{style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[a("img",{staticStyle:{background:"#fff"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-viettelpay.svg"}})]),a("span",{staticClass:"py-2",style:t.loadingPay?"pointer-events: none;":"cursor: pointer"},[t._v("Thanh toán qua ứng dụng ViettelPay")])],1):t._e()],1),t.isBank?a("div",{staticClass:"ml-0 mt-2 px-2 py-1",staticStyle:{border:"1px solid #004b9485","border-radius":"3px"}},[a("div",[t.paymentProfile.hasOwnProperty("tkThuHuong")?a(r["b"],{staticClass:"px-0 pb-1 pt-0"},[a("div",[a("p",[a("span",{staticClass:"text-bold mr-3"},[t._v("Tên tài khoản thụ hưởng: ")]),a("span",[t._v(t._s(t.paymentProfile.tenTKThuHuong))])]),a("p",[a("span",{staticClass:"text-bold mr-4"},[t._v("Số tài khoản thụ hưởng: ")]),a("span",[t._v(t._s(t.paymentProfile.tkThuHuong))])])])]):t._e(),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"paymentFile1"},on:{change:function(e){return t.uploadPaymentFile(e)}}}),a("span",{staticClass:"text-bold",staticStyle:{color:"#004b94!important"}},[t._v("Tải lên file báo thanh toán chuyển khoản (Định dạng: .png, .jpg, .jpeg)")]),t.progressUploadPart?a(g["a"],{attrs:{width:2,size:25,color:"green",indeterminate:""}}):a(S["a"],{staticClass:"ml-2",attrs:{top:""}},[a(n["a"],{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.pickFile()}},slot:"activator"},[a(s["a"],[a(h["a"],{attrs:{size:"24",color:"#004b94"}},[t._v("cloud_upload")])],1)],1),a("span",[t._v("Tải file lên")])],1)],1),t.paymentFile?a("div",[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.viewFile()}}},[a(h["a"],{attrs:{size:"18",color:"#004b94"}},[t._v("insert_drive_file")]),a("span",{staticClass:"ml-2"},[t._v(t._s(t.paymentFileName))]),a(n["a"],{staticClass:"ml-3 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},on:{click:function(e){return e.stopPropagation(),t.downloadPaymentFile(t.item)}}},[a(h["a"],[t._v("cloud_download")]),t._v("  \n                  Tải xuống\n                ")],1),a(n["a"],{staticClass:"ml-2 mr-2",attrs:{dark:"",small:"",color:"blue darken-1"},on:{click:function(e){return e.stopPropagation(),t.pickFile()}}},[a(h["a"],[t._v("cloud_upload")]),t._v("  \n                  Cập nhật\n                ")],1)],1)]):t._e(),t.epaymentValid?t._e():a("span",{staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu tải lên file báo thanh toán")])]):t._e(),!t.isBank&&t.errorNotSelect?a("p",{staticStyle:{color:"#f44336"}},[t._v("* Yêu cầu lựa chọn hình thức thanh toán")]):t._e()])],1)],1)],1),a(d["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[a(o["a"],[a(_["a"],{attrs:{dark:"",color:"primary"}},[a(C["b"],[t._v("File đính kèm")]),a(v["a"]),a(n["a"],{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[a(h["a"],[t._v("close")])],1)],1),t.dialogPDFLoading?a("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[a(g["a"],{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPreview",src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1),a(d["a"],{staticStyle:{overflow:"hidden"},attrs:{"max-width":"350",transition:"scale-transition",origin:"center center"},model:{value:t.dialogQrViettelPay,callback:function(e){t.dialogQrViettelPay=e},expression:"dialogQrViettelPay"}},[a(o["a"],{staticClass:"text-xs-center",attrs:{color:"#24b2b4"}},[a(_["a"],{attrs:{dark:"",color:"primary"}},[a(C["b"],{staticClass:"white--text"},[t._v("THANH TOÁN DỊCH VỤ CÔNG")])],1),a("div",{staticClass:"d-inline-block py-2 mt-4",staticStyle:{position:"relative"}},[a("img",{staticClass:"logo",staticStyle:{position:"absolute",top:"70px",left:"60px",background:"#efe5e5","border-radius":"5px"},attrs:{src:"/o/opencps-store/js/cli/dvc/app/image/logo-viettelpay.svg",width:"30"}}),a(l["a"],{staticClass:"my-0 ml-1",staticStyle:{width:"135px","margin-top":"-5px !important"},attrs:{color:"#24b2b4","text-color":"white"}},[a("span",{staticStyle:{"font-size":"13px !important"}},[t._v("Quét để thanh toán")])])],1)],1)],1)],1)},T=[],x=a("1157"),D=a.n(x),F=a("854a"),N=a.n(F),w=a("716b");N.a.options={closeButton:!0,timeOut:"5000"};var P={props:{paymentProfile:{type:Object,default:function(){}},detailDossier:{type:Object,default:function(){}}},data:function(){return{data_payment:{advanceAmount:"",feeAmount:"",serviceAmount:"",shipAmount:"",paymentAmount:"",paymentNote:"",paymentFile:""},dataVietelPay:"",paymentFile:"",epaymentValid:!0,money:{decimal:"",thousands:".",prefix:"",suffix:"",precision:0,masked:!1},totalFee:0,feeTamThu:0,feeTong:0,checkPaid:!0,activeEdit:!0,progressUploadPart:!1,dialogQrViettelPay:!1,dialogPDF:!1,dialogPDFLoading:!0,isBank:!1,errorNotSelect:!1,methodSelect:0,ipAddress:"",loadingPay:!1,thanhToanChuyenKhoan:!0,paymentNote:"",feeList:[],headers:[{text:"STT",align:"center",sortable:!1},{text:"Tên phí, lệ phí",align:"center",sortable:!1},{text:"Lệ phí",align:"center",sortable:!1},{text:"Phí",align:"center",sortable:!1},{text:"Thành tiền",align:"center",sortable:!1}],thanhToanKeypay:!0}},directives:{money:w["VMoney"]},created:function(){var t=this;try{t.thanhToanChuyenKhoan=thanhToanChuyenKhoan}catch(a){}try{t.thanhToanKeypay=thanhToanKeypay}catch(a){}if(t.detailDossier.hasOwnProperty("dossierId")){var e=t.detailDossier;t.$store.dispatch("getPaymentFiles",e).then((function(e){t.paymentFile=e,t.data_payment["paymentFile"]=t.paymentFile,t.data_payment["paymentMethod"]=t.isBank?"Chuyển khoản":"Keypay",t.$store.commit("setPaymentProfile",t.data_payment)}))}},computed:{paymentFileName:function(){return this.$store.getters.getPaymentFileName},isBank:function(t){!0===t&&(this.errorNotSelect=!1)}},watch:{paymentProfile:function(t){var e=this;if(e.paymentProfile){e.paymentNote=t["paymentNote"]?t["paymentNote"]:"";try{e.paymentNote=JSON.parse(t["paymentNote"])["paymentNote"]}catch(o){}if(e.paymentProfile.hasOwnProperty("groupPaymentFile")&&e.paymentProfile.groupPaymentFile)e.feeList=JSON.parse(e.paymentProfile.groupPaymentFile);else{var a={requestPayment:e.paymentProfile["requestPayment"],advanceAmount:e.paymentProfile["advanceAmount"],feeAmount:e.paymentProfile["feeAmount"],serviceAmount:e.paymentProfile["serviceAmount"],shipAmount:e.paymentProfile["shipAmount"],counter:e.paymentProfile.hasOwnProperty("counter")?e.paymentProfile["counter"]:"",paymentFee:e.paymentProfile["paymentFee"],paymentAmount:e.paymentProfile["paymentAmount"]};e.feeList=[a]}if(e.paymentProfile.hasOwnProperty("epaymentProfile")&&e.paymentProfile.epaymentProfile){var i=e.getEPaymentProfile(e.paymentProfile.epaymentProfile);if(i&&i.hasOwnProperty("isPaygov")&&i["isPaygov"]){e.showPayGov=!0;var s=window.location.protocol;"http:"==s?D.a.getJSON("http://ipinfo.io",(function(t){e.ipAddress=t&&t.hasOwnProperty("ip")?t.ip:""})):"https:"==s&&D.a.getJSON("https://api.ipify.org?format=jsonp&callback=?",(function(t){e.ipAddress=t&&t.hasOwnProperty("ip")?t.ip:""}))}else e.showPayGov=!1;try{var n=JSON.parse(e.paymentProfile.epaymentProfile);e.dataVietelPay=n.genQRCode}catch(o){e.dataVietelPay=""}}e.feeTong=Number(e.paymentProfile.feeAmount)+Number(e.paymentProfile.serviceAmount),2!==e.detailDossier.viaPostal&&"2"!==e.detailDossier.viaPostal||0===e.paymentProfile.shipAmount||(e.feeTong=Number(e.paymentProfile.feeAmount)+Number(e.paymentProfile.serviceAmount)+Number(e.paymentProfile.shipAmount)),e.totalFee=e.feeTong-Number(e.paymentProfile.advanceAmount),e.totalFee<0&&(e.totalFee=0),e.data_payment={advanceAmount:e.paymentProfile.advanceAmount,feeAmount:e.paymentProfile.feeAmount,serviceAmount:e.paymentProfile.serviceAmount,shipAmount:e.paymentProfile.shipAmount,paymentAmount:e.totalFee,paymentNote:e.paymentProfile.paymentNote,paymentFile:e.paymentFile,paymentMethod:e.isBank?"Chuyển khoản":"Keypay"},e.$store.commit("setPaymentProfile",e.data_payment)}},detailDossier:function(t){var e=this;if(t.hasOwnProperty("dossierId")){var a=t;e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.data_payment["paymentMethod"]=e.isBank?"Chuyển khoản":"Keypay",e.$store.commit("setPaymentProfile",e.data_payment)}))}}},methods:{showThanhToanChuyenKhoan:function(){var t=this;t.isBank=!0,t.methodSelect=1,t.$store.commit("setVisibleDoAction",!0)},uploadPaymentFile:function(t){var e=this;e.progressUploadPart=!0;var a={};a["dossierId"]=e.detailDossier.dossierId,a["referenceUid"]=e.detailDossier.referenceUid,a["selector"]="paymentFile1",a["partTip"]={tip:"",maxSize:10,extensions:"jpg,png,jpeg"};D()("#paymentFile1")[0].files[0];e.$store.dispatch("uploadPaymentFile",a).then((function(t){e.epaymentValid=!0,e.progressUploadPart=!1,e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.data_payment["paymentMethod"]=e.isBank?"Chuyển khoản":"Keypay",e.$store.commit("setPaymentProfile",e.data_payment),e.$store.dispatch("getPaymentFiles",a).then((function(t){e.paymentFile=t,e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)}))})).catch((function(t){e.progressUploadPart=!1}))},viewFile:function(){var t=this;t.dialogPDFLoading=!0,t.dialogPDF=!0;var e={dossierId:t.detailDossier.dossierId,referenceUid:t.detailDossier.referenceUid};t.$store.dispatch("viewPaymentFile",e).then((function(e){t.dialogPDFLoading=!1,document.getElementById("dialogPreview").src=e}))},getEPaymentProfile:function(t){if(!t)return"";try{return JSON.parse(t),JSON.parse(t)}catch(e){return""}},deleteFile:function(t){var e=this,a=confirm("Bạn có chắc chắn xóa file?");a&&(t["dossierId"]=e.dossierId,e.$store.dispatch("deletePaymentFile",t).then((function(t){N.a.clear(),N.a.success("Xóa file thành công."),e.paymentFile="",e.data_payment["paymentFile"]=e.paymentFile,e.$store.commit("setPaymentProfile",e.data_payment)})).catch((function(t){N.a.clear(),N.a.error("Xóa file thất bại.")})))},downloadPaymentFile:function(t){var e=this,a="/o/rest/v2/dossiers/"+e.detailDossier.dossierId+"/payments/"+e.detailDossier.referenceUid+"/confirmfile";window.open(a)},pickFile:function(){document.getElementById("paymentFile1").value="",document.getElementById("paymentFile1").click()},currency:function(t){return t&&t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0},validPayment:function(){return this.paymentFile?this.epaymentValid=!0:this.epaymentValid=!1,this.isBank?this.errorNotSelect=!1:this.errorNotSelect=!0,!1!==this.isBank},toKeyPay:function(t){var e=this;e.isBank=!1,e.methodSelect=2,e.$store.commit("setVisibleDoAction",!1),window.open(t,"_self")},toKeyPayDvcqg:function(t){var e=this;e.loadingPay=!0,e.isBank=!1,e.methodSelect="kpdvcqg"===t?3:4,e.$store.commit("setVisibleDoAction",!1);var a={dossierId:e.detailDossier.dossierId,key:t};e.$store.dispatch("toKeypayDvcqg",a).then((function(t){e.loadingPay=!1,window.open(t,"_self")})).catch((function(){e.loadingPay=!1}))},toPayGov:function(){var t=this;t.loadingPay=!0,t.methodSelect=5,t.isBank=!1;var e={dossierId:t.detailDossier.dossierId,ipAddress:t.ipAddress};t.$store.dispatch("toPayGov",e).then((function(e){t.loadingPay=!1,e.hasOwnProperty("url")&&window.open(e.url,"_self")})).catch((function(){t.loadingPay=!1}))},showViettelPay:function(){var t=this;t.isBank=!1,t.methodSelect=6,t.$store.commit("setVisibleDoAction",!1),t.dialogQrViettelPay=!0},goBack:function(){window.history.back()}},filters:{}},I=P,k=a("2877"),A=Object(k["a"])(I,b,T,!1,null,null,null);e["a"]=A.exports}}]);